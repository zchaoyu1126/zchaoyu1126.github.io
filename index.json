[{"categories":["C++"],"content":"ç¬¬ä¸€ç«  æ¦‚è¿° ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:0","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.1 åå­—ç©ºé—´ C++æ ‡å‡†åº“ä¸­çš„ç±»å’Œå‡½æ•°æ˜¯åœ¨åå­—ç©ºé—´stdä¸­å£°æ˜çš„ã€‚åå­—ç©ºé—´å¯ä»¥æ¶ˆé™¤é‚£äº›å› é‡åè€Œå¯¼è‡´çš„å‘½åå†²çª ğŸ’¡å…è®¸ä½¿ç”¨æ²¡æœ‰åå­—çš„åå­—ç©ºé—´ ç”±äºåå­—ç©ºé—´æ²¡æœ‰åå­—ï¼Œå› æ­¤æ— æ³•åœ¨å…¶ä»–ç©ºé—´ä¸­å¼•ç”¨ã€‚ æ— ååå­—ç©ºé—´ä¸­çš„å˜é‡ä¸å¿…å£°æ˜ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå†æ¬¡å£°æ˜ç›¸åŒå˜é‡ååä¼šè¢«è¦†ç›–ã€‚ æ— ååå­—ç©ºé—´å†…çš„æˆå‘˜çš„ä½œç”¨åŸŸä¸ºæœ¬æ–‡ä»¶ä»å£°æ˜åˆ°æ–‡ä»¶ç»“æŸã€‚ #include \u003ciostream\u003eusing namespace std; namespace ns1 { int inflag = 1; } namespace ns2 { int inflag = 2; } namespace { int inflag = 0; } int main() { cout \u003c\u003c ns1::inflag \u003c\u003c endl; cout \u003c\u003c ns2::inflag \u003c\u003c endl2; cout \u003c\u003c inflag \u003c\u003c endl; cout \u003c\u003c \"****\" \u003c\u003c endl; ns1::inflag = 2; ns2::inflag = 3; inflag = 4; cout \u003c\u003c ns1::inflag \u003c\u003c endl; cout \u003c\u003c ns2::inflag \u003c\u003c endl2; cout \u003c\u003c inflag \u003c\u003c endl; cout \u003c\u003c \"****\" \u003c\u003c endl; int inflag = 1; cout \u003c\u003c inflag \u003c\u003c endl; return 0; } // 1 // 2 // 0 // **** // 2 // 3 // 4 // **** // 1 ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:1","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.2 å®šä¹‰å¸¸é‡ æ ¼å¼ï¼š const int MAXLine = 1000 æ³¨æ„ï¼šå®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä¸”ä¸å¯å†æ¬¡èµ‹å€¼ ğŸ’¡å®å®šä¹‰ä¸å¸¸é‡çš„åŒºåˆ« constå¸¸é‡æœ‰æ•°æ®ç±»å‹ï¼Œè€Œå®å¸¸é‡æ²¡æœ‰æ•°æ®ç±»å‹ å®å¸¸é‡æœ‰æ—¶å¯èƒ½ä¼šå¯¼è‡´æŸäº›é”™è¯¯ï¼Œä¾‹å¦‚ #define x a+b è‹¥åœ¨ç¨‹åºä¸­å†™äº†x*4æ­¤ç±»è¡¨è¾¾ï¼Œåˆ™ä¼šå‡ºé”™ ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:2","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.3 å‡½æ•°é‡è½½ å‡½æ•°çš„å‚æ•°ä¸ªæ•°ä¸åŒ å‡½æ•°çš„å‚æ•°ç±»å‹ä¸åŒ å‡½æ•°å¿…é¡»åŒå constå…³é”®å­—å¯ä»¥ç”¨äºåŒºåˆ†é‡è½½å‡½æ•°ï¼ˆè§åï¼‰ ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:3","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.4 å‡½æ•°æ¨¡æ¿ å‡½æ•°æ¨¡æ¿ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¼–è¯‘ç³»ç»Ÿä¸äº§ç”Ÿä»»ä½•æ‰§è¡Œä»£ç ï¼Œå½“ç¼–è¯‘ç¨‹åºå‘ç°ä¸å‡½æ•°æ¨¡æ¿ä¸­ç›¸åŒ¹é…çš„å‡½æ•°è°ƒç”¨æ—¶ï¼Œç”Ÿæˆä¸€ä¸ªé‡è½½å‡½æ•°ã€‚ è¯¥é‡è½½å‡½æ•°ç§°ä¸ºæ¨¡æ¿å‡½æ•°ï¼Œæ˜¯å‡½æ•°æ¨¡æ¿çš„ä¸€ä¸ªå®ä¾‹ï¼Œåªå¤„ç†ä¸€ç§å”¯ä¸€çš„æ•°æ®ç±»å‹ã€‚ template \u003cclass T1, class T2, class T3\u003e T1 max(T2 a, T3 b){ return (a\u003eb)?(T1)a:(T2)b; } ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:4","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.5 å¸¦é»˜è®¤å‚æ•°çš„å‡½æ•° å®å‚ä¸å½¢å‚çš„ç»“åˆé¡ºåºï¼Œä»å·¦åˆ°å³ï¼Œæ•…å¸¦é»˜è®¤å‚æ•°çš„å‚æ•°å¿…é¡»åœ¨æœ€å³è¾¹ æ³¨æ„ä¸é‡è½½å‡½æ•°å…±åŒä½¿ç”¨æ—¶å¯èƒ½ä¼šå‡ºç°äºŒä¹‰æ€§é—®é¢˜ å‡½æ•°å£°æ˜ä¸­ç»™å½¢å‚æŒ‡å®šé»˜è®¤å€¼ï¼Œåˆåœ¨å‡½æ•°å®šä¹‰ä¸­ç»™å½¢å‚æŒ‡å®šé»˜è®¤å€¼ï¼Œæœ‰äº›ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œæœ‰äº›ä¼šé€šè¿‡ï¼ˆä»¥ç¬¬ä¸€æ¬¡ä¸ºå‡†ï¼‰ï¼Œä¸€èˆ¬åœ¨å‡½æ•°å£°æ˜ä¸­èµ‹å€¼ï¼ˆè€å¸ˆä¸Šè¯¾æ‰€è®²ï¼Œäº†è§£å³å¯ï¼‰ ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:5","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.6 å¼•ç”¨ ğŸ’¡å¼•ç”¨çš„æ ¸å¿ƒ å¼•ç”¨çš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªåœ°å€ä¸¤ä¸ªåå­—ã€‚ å¼•ç”¨æ—¶å¿…é¡»åˆå§‹åŒ– åˆå§‹åŒ–å€¼ä¸èƒ½æ˜¯ä¸€ä¸ªå¸¸æ•° ä¸€æ—¦è¢«å£°æ˜å°±ä¸èƒ½æŒ‡å‘å…¶ä»–å˜é‡ å¼•ç”¨æ˜¯å˜é‡çš„å¦ä¸€ä¸ªåå­—ï¼Œå¯ä»¥å¯¹å¼•ç”¨è¿›è¡Œèµ‹å€¼ï¼Œå–å€ç­‰æ“ä½œ ä»¥ä¸‹çš„å£°æ˜æ˜¯éæ³•çš„ void\u0026 test1 = max; // ä¸å…è®¸ä½¿ç”¨å¯¹voidçš„å¼•ç”¨ int\u0026 a[6] = ... // ä¸å…è®¸ä½¿ç”¨å¼•ç”¨çš„æ•°ç»„ int\u0026* p = max; // ä¸å…è®¸ä½¿ç”¨æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆ ğŸ’¡æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆå’ŒæŒ‡å‘æŒ‡é’ˆçš„å¼•ç”¨ æŒ‡é’ˆéœ€è¦æŒ‡å‘å†…å­˜ç©ºé—´ï¼Œè€Œå¼•ç”¨åªæ˜¯ä¸€ä¸ªåˆ«åè€Œå·²ï¼Œä¸æ˜¯å†…å­˜ç©ºé—´ã€‚ å¼•ç”¨ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å°±ä¸ä¼šå­˜åœ¨æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆï¼Œä½†æŒ‡é’ˆæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å­˜åœ¨æŒ‡å‘æŒ‡é’ˆçš„å¼•ç”¨ã€‚ int\u0026* p æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆ ä¸åˆæ³• int*\u0026 p æŒ‡å‘æŒ‡é’ˆçš„å¼•ç”¨ åˆæ³• #include \u003ciostream\u003eusing namespace std; int main() { //å¼•ç”¨çš„å®šä¹‰,å¯ä»¥æ˜¯å˜é‡åä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªå¼•ç”¨ int max = 1; int* pmax = \u0026max; int nums[6]; int\u0026 refmax = max; int\u0026 reffmax = refmax; cout \u003c\u003c max \u003c\u003c endl; refmax++; cout \u003c\u003c max \u003c\u003c endl; reffmax++; cout \u003c\u003c max \u003c\u003c endl; //ä¸‰è€…å…¨éƒ¨æŒ‡å‘max,çš†å¯å¯¹è¯¥å†…å­˜å•å…ƒè¿›è¡Œæ“ä½œ // void\u0026 test1 = max; // ä¸å…è®¸ä½¿ç”¨å¯¹voidçš„å¼•ç”¨ // int\u0026 a[6] = ... // ä¸å…è®¸ä½¿ç”¨å¼•ç”¨çš„æ•°ç»„ // int\u0026* p = max; // ä¸å…è®¸ä½¿ç”¨æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆ int*\u0026 p = pmax; cout \u003c\u003c (*p) \u003c\u003c \" \" \u003c\u003c p \u003c\u003c endl; } ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:6","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.7 constä¸å¸¸å¼•ç”¨ constæ˜¯ç”¨ä½œå®šä¹‰å¸¸é‡ï¼Œä¸€æ—¦æŸä¸ªå¯¹è±¡å®šä¹‰ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å€¼ã€‚å½“constä¸å¼•ç”¨ç›¸ç»“åˆä½¿ç”¨æ—¶ï¼Œç§°ä¸ºå¸¸å¼•ç”¨ã€‚ å¸¸å¼•ç”¨ä¸èƒ½ä¿®æ”¹å€¼ å¸¸å¼•ç”¨å¯ä»¥ä¸å¸¸é‡ï¼Œå˜é‡ï¼ˆæˆ–å­—é¢å€¼ã€è¡¨è¾¾å¼ï¼‰ç»‘å®š å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæ™®é€šå¼•ç”¨ä¸èƒ½ä¸å¸¸é‡ç»‘å®š const int a = 20; // int\u0026 ref = a; // å°†int \u0026 ç±»å‹çš„å¼•ç”¨ç»‘å®šåˆ°const intç±»å‹çš„åˆå§‹å€¼è®¾å®šé¡¹æ—¶ï¼Œé™å®šç¬¦è¢«ä¸¢å¼ƒ const int\u0026 ref = a; ğŸ’¡å¸¸å¼•ç”¨çš„ä½œç”¨ ç”¨è¿™ç§æ–¹å¼å£°æ˜çš„å¼•ç”¨ï¼Œä¸èƒ½é€šè¿‡å¼•ç”¨å¯¹ç›®æ ‡å˜é‡çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°äº†å¼•ç”¨çš„å®‰å…¨æ€§ã€‚ ä¸€æ—¦å®Œæˆå£°æ˜ï¼Œè¯¥å¼•ç”¨çš„å€¼å°±ä¸å†æ”¹å˜ï¼Œå³ä½¿è¢«å¼•ç”¨çš„å˜é‡å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚** ç”¨é€”ï¼šå®‰å…¨åœ°è¿›è¡Œå‡½æ•°ä¼ å‚ #include \u003ciostream\u003eusing namespace std; int main() { const int a = 20; // å°†int\u0026 ç±»å‹çš„å¼•ç”¨ç»‘å®šåˆ°const intç±»å‹çš„åˆå§‹å€¼è®¾å®šé¡¹æ—¶ //é™å®šç¬¦è¢«ä¸¢å¼ƒ // int\u0026 ref = a; const int\u0026 ref1 = a; int x = 5, y = 4; const int\u0026 ref2 = (x+y); cout \u003c\u003c ref2 \u003c\u003c endl; y++; cout \u003c\u003c ref2 \u003c\u003c endl; // ref2++; // è¡¨ç¤ºå¼å¿…é¡»æ˜¯å¯è¢«ä¿®æ”¹çš„å·¦å€¼ã€‚ return 0; } // 9 // 9 // 10 // 9 ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:7","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.8 å‡½æ•°ä¸å¼•ç”¨ C++æŠŠå˜é‡çš„å¼•ç”¨ä½œä¸ºå‡½æ•°å½¢å‚ï¼Œå³ä¼ é€å˜é‡çš„åˆ«åï¼Œå…·ä½“ç•¥ å‡½æ•°çš„è¿”å›å€¼ä¸ºæŸä¸€å˜é‡çš„å¼•ç”¨ï¼Œå› æ­¤å¯å¯¹å…¶è¿”å›å€¼è¿›è¡Œèµ‹å€¼æ“ä½œ ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°ä¸èƒ½ä½œä¸ºå·¦å€¼ï¼Œä½†å¦‚æœå°†å‡½æ•°è¿”å›å¼•ç”¨ç±»å‹åˆ™å¯å¯¹å…¶è¿›è¡Œèµ‹å€¼ è‹¥è¦è¿”å›æŸä¸ªå˜é‡çš„å¼•ç”¨ï¼Œè¯¥å˜é‡å¿…é¡»å­˜å‚¨åœ¨é™æ€åŒºï¼Œå¦‚å…¨å±€å˜é‡æˆ–é™æ€å±€éƒ¨å˜é‡ æ³¨æ„ï¼šå…ˆè°ƒç”¨ï¼Œå†èµ‹å€¼ #include \u003ciostream\u003eusing namespace std; int x = 20; int\u0026 add() { cout \u003c\u003c \"in add before inc x: \" \u003c\u003c x \u003c\u003c endl; x++; cout \u003c\u003c \"in add after inc x: \" \u003c\u003c x \u003c\u003c endl; return x; } int main() { cout \u003c\u003c add() \u003c\u003c endl; add() = -20; cout \u003c\u003c add() \u003c\u003c endl; return 0; } // in add before inc x: 20 // in add after inc x: 21 // 21 // in add before inc x: 21 // in add after inc x: 22 // in add before inc x: -20 // in add after inc x: -19 // -19 ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:8","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.9 å†…è”å‡½æ•° ç¼–è¯‘æ—¶ï¼Œå°†è°ƒç”¨å‡½æ•°ä»£ç åµŒå…¥åˆ°ä¸»å‡½æ•°ä¸­ï¼Œä»¥ç©ºé—´æ•ˆç‡æ¢å–æ—¶é—´æ•ˆç‡ å®šä¹‰æ ¼å¼ï¼š inline \u003cå‡½æ•°å€¼ç±»å‹\u003e \u003cå‡½æ•°å\u003e(å‚æ•°è¡¨){ } inline å…³é”®å­—å¿…é¡»ä¸å‡½æ•°å®šä¹‰ä½“æ”¾åœ¨ä¸€èµ· å†…è”å‡½æ•°å¿…é¡»å……åˆ†ç®€å•ï¼Œä¸å«å¾ªç¯é€’å½’ ä¸€ä¸ªå¥½çš„ç¼–è¯‘å™¨ï¼Œä¼šæ ¹æ®å‡½æ•°çš„å‡½æ•°ä½“ï¼Œè‡ªåŠ¨å–æ¶ˆä¸å€¼å¾—çš„å†…è” ç±»å†…å®šä¹‰çš„æˆå‘˜å‡½æ•°ä¼šè‡ªåŠ¨è§†ä¸ºå†…è”å‡½æ•° ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:9","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.10 å­—ç¬¦ä¸²å˜é‡ å­—ç¬¦ä¸²å¸¸é‡ä»¥**\\0**ç»“æŸï¼Œä½†å°†å­—ç¬¦ä¸²å¸¸é‡å­˜æ”¾åˆ°å­—ç¬¦ä¸²å˜é‡ä¸­æ—¶ï¼Œåªå­˜æ”¾å­—ç¬¦ä¸²æœ¬èº«è€Œä¸åŒ…æ‹¬'\\0' #include \u003ciostream\u003e#include \u003cstring\u003e#include \u003ccstring\u003eusing namespace std; int main() { string str1, str2, str3; str1 = \"China\"; str2 = str1; str3 = str1 + str2; cout \u003c\u003c strlen(\"China\") \u003c\u003c endl; cout \u003c\u003c sizeof(\"China\") \u003c\u003c endl; cout \u003c\u003c str1.size() \u003c\u003c endl; } // 5 // 6 // 5 ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:10","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["C++"],"content":"1.11 new/delete newæ“ä½œä»å †ä¸­åˆ†é…ä¸€å—ä¸\u003cç±»å‹\u003eç›¸é€‚åº”çš„å­˜å‚¨ç©ºé—´ï¼Œè€Œç”¨int,floatä¹‹ç±»çš„ç”³è¯·çš„å†…å­˜åœ¨æ ˆä¸­ \u003cæŒ‡é’ˆå˜é‡å\u003e = new \u003cç±»å‹\u003e \u003cæŒ‡é’ˆå˜é‡å\u003e = new \u003cç±»å‹\u003e(\u003cåˆå€¼\u003e) \u003cæŒ‡é’ˆå˜é‡å\u003e = new \u003cç±»å‹\u003e[\u003cå…ƒç´ ä¸ªæ•°\u003e] delete \u003cæŒ‡é’ˆå˜é‡å\u003e delete[] \u003cæŒ‡é’ˆå˜é‡å\u003e #include \u003ciostream\u003eusing namespace std; int main() { int* p = new int; cout \u003c\u003c p \u003c\u003c \" \" \u003c\u003c *p \u003c\u003c endl; int* q = new int(0); cout \u003c\u003c q \u003c\u003c \" \" \u003c\u003c *q \u003c\u003c endl; int* num = new int[20]; num[0] = 1; num[1] = 20; cout \u003c\u003c num[0] \u003c\u003c \" \" \u003c\u003c num[1] \u003c\u003c endl; delete(p); delete(q); delete(num); return 0; } // 0x1071780 17242864 // 0x10717a0 0 // 1 20 ","date":"2022-07-10","objectID":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/:1:11","tags":null,"title":"ç¬¬ä¸€ç«  æ¦‚è¿°","uri":"/2022/07/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"},{"categories":["golang"],"content":"Golangä¼˜ç§€çš„GCæœºåˆ¶ï¼Œè™½ç„¶å¯ä»¥è®©å…¶ä¸éœ€è¦åƒC++ä¸­é‚£æ ·æ‰‹åŠ¨é‡Šæ”¾å¯¹è±¡ï¼Œä»è€Œé¿å…å†…å­˜æ³„æ¼ï¼Œä½†goroutineçš„ç”Ÿå‘½å‘¨æœŸéœ€è¦å¼€å‘è€…æ ¼å¤–æ³¨æ„ã€‚å¦‚æœä¸€ä¸ªgoroutineæ„å¤–é˜»å¡æ— æ³•é€€å‡ºï¼Œå°±ä¼šé€ æˆgoroutineæ³„æ¼çš„é—®é¢˜ã€‚éšç€å ç”¨çš„èµ„æºè¶Šæ¥è¶Šå¤šï¼Œåªèƒ½é‡å¯æœåŠ¡å™¨æš‚æ—¶ç¼“è§£ï¼Œè¿˜æ˜¯å¾—ä»æ ¹æºä¸Šè§£å†³é—®é¢˜ã€‚æœ¬æ–‡å¯¹goroutineçš„æ³„æ¼åœºæ™¯è¿›è¡Œäº†æ€»ç»“ï¼Œæ˜¯å¯¹ç…é±¼å¤§ä½¬åšæ–‡çš„æ¢³ç†ï¼Œå†…å®¹å¹¶éåŸåˆ›ï¼Œå‚è€ƒåŸæ–‡å·²è´´åœ¨æœ«å°¾ã€‚ ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:0:0","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"0 æ³„æ¼åŸå›  Goroutineå†…æ‰§è¡Œä¸channelæˆ–mutexæœ‰å…³çš„è¯»å†™æ“ä½œï¼Œç”±äºé•¿æ—¶é—´å¾—ä¸åˆ°å“åº”é˜»å¡ã€‚(2.1ï¼Œ2.2) Goroutine å†…çš„ä¸šåŠ¡é€»è¾‘è¿›å…¥é•¿æ—¶é—´ç­‰å¾…ï¼Œæœ‰ä¸æ–­æ–°å¢çš„ Goroutine è¿›å…¥ç­‰å¾…ã€‚(2.3) ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:1:0","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"1 æ’æŸ¥æ–¹æ³• è°ƒç”¨Â runtime.NumGoroutine()Â æ–¹æ³•æ¥è·å– Goroutine çš„è¿è¡Œæ•°é‡ ä½¿ç”¨PProfå·¥å…· åœ¨å®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨PProfå·¥å…·æ¥è¿›è¡Œåˆ†ææ˜¯å¦å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Œå…·ä½“è¯·å‚è€ƒå¦‚ä¸‹é“¾æ¥ã€‚ PProfå·¥å…·ä½¿ç”¨ ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:2:0","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"2 æ³„æ¼åœºæ™¯ ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:3:0","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"2.1 é€šé“ä½¿ç”¨ä¸å½“ 2.1.1 é€šé“ä¸ºnil package main import ( \"fmt\" \"runtime\" \"time\" ) func send(ch chan\u003c- int) { ch \u003c- 1 ch \u003c- 2 } func receive(ch \u003c-chan int) { \u003c-ch \u003c-ch } func main() { var ch chan int // åº”ä¿®æ”¹ä¸º ch := make(chan int) go send(ch) go receive(ch) time.Sleep(time.Second) fmt.Println(runtime.NumGoroutine()) } // 3 2.1.2 æ— äººæ¶ˆè´¹æ•°æ®å¯¼è‡´é€šé“é˜»å¡ package main import ( \"fmt\" \"runtime\" \"time\" ) func send(ch chan\u003c- int) { ch \u003c- 1 ch \u003c- 2 } func receive(ch \u003c-chan int) { \u003c-ch } func main() { ch := make(chan int) go send(ch) go receive(ch) time.Sleep(time.Second) fmt.Println(runtime.NumGoroutine()) } // 2 // sendå‘é€šé“ä¸­å‘é€äº†ä¸¤ä¸ªå€¼ï¼Œä½†åªè¢«æ¶ˆè´¹äº†ä¸€ä¸ª // æ‰€ä»¥go send(ch)å¯åŠ¨çš„åç¨‹è¢«é˜»å¡ï¼Œç»“æœä¼šè¾“å‡º2 ä¸‹é¢ï¼Œä½¿ç”¨pprofå·¥å…·è¿›è¡Œåˆ†æ package main import ( \"net/http\" _ \"net/http/pprof\" ) func send(ch chan\u003c- int) { ch \u003c- 1 ch \u003c- 2 } func receive(ch \u003c-chan int) { \u003c-ch } func pprofService() error { return http.ListenAndServe(\":6060\", nil) } func main() { done := make(chan error) ch := make(chan int) go func() { done \u003c- pprofService() }() for i := 0; i \u003c 100; i++ { go send(ch) } for i := 0; i \u003c 100; i++ { go receive(ch) } \u003c-done } // æŒ‰ä¸Šè¿°ç¨‹åºæ‰€ç¤ºï¼Œå¯åŠ¨100ä¸ªsendåç¨‹åï¼Œç”±äºæ²¡æ³•å®Œå…¨æ¶ˆè´¹æ•°æ®ï¼Œ // æ‰€ä»¥é€ æˆgoroutineçš„å¤§é‡æ³„æ¼ï¼Œå…¶ç«ç„°å›¾å¦‚ä¸‹æ‰€ç¤º PProf ç«ç„°å›¾\" PProf ç«ç„°å›¾ 2.1.3 é€šé“æ— æ³•è¯»å–æ•°æ®å¯¼è‡´é˜»å¡ package main import ( \"fmt\" \"runtime\" \"time\" ) func send(ch chan\u003c- int) { ch \u003c- 1 close(ch) } func receive(ch \u003c-chan int) { \u003c-ch \u003c-ch } func main() { ch := make(chan int) go send(ch) go receive(ch) time.Sleep(time.Second) fmt.Println(runtime.NumGoroutine()) } // 2 ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:3:1","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"2.2 äº’æ–¥é”æˆ–åŒæ­¥é”ä½¿ç”¨ä¸å½“ 2.2.1 äº’æ–¥é”ä½¿ç”¨ä¸å½“ package main import ( \"fmt\" \"runtime\" \"sync\" \"time\" ) var counter int var mutex sync.Mutex func main() { for i := 0; i \u003c 5; i++ { go func() { mutex.Lock() // defer mutex.Unlock() counter++ }() } time.Sleep(time.Second) fmt.Println(runtime.NumGoroutine()) } // 5 // ç¬¬ä¸€ä¸ªåç¨‹åŠ é”ä¹‹åæ²¡æœ‰è§£é”ï¼Œcounter++å®Œä¹‹åç›´æ¥é€€å‡º // ä½¿å¾—åé¢å››ä¸ªåç¨‹æ— æ³•å¯¹counteråŠ é”ï¼Œä»è€Œé€ æˆé˜»å¡ 2.2.2 åŒæ­¥é”ä½¿ç”¨ä¸å½“ package main import ( \"fmt\" \"sync\" ) func main() { var wg sync.WaitGroup for i := 0; i \u003c 5; i++ { wg.Add(6) go func(x int) { defer wg.Done() fmt.Println(\"goroutine: \", x) }(i) } wg.Wait() } // deadlock // ç”±äºwaitgroupä½¿ç”¨ä¸å½“ï¼Œç›´æ¥é€ æˆä¸»åç¨‹é˜»å¡ï¼ˆæ­»é”ï¼‰ ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:3:2","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"2.3 å¥‡æ€ªçš„æ…¢ç­‰å¾… func main() { for { go func() { _, err := http.Get(\"https://www.xxx.com/\") if err != nil { fmt.Printf(\"http.Get err: %v\\n\", err) } // do something... }() time.Sleep(time.Second * 1) fmt.Println(\"goroutines: \", runtime.NumGoroutine()) } } // http.Clienté»˜è®¤æ²¡æœ‰è®¾ç½®è¶…æ—¶æ—¶é—´ // å¦‚æœGetè¯·æ±‚ä¸€ç›´å¾—ä¸åˆ°æ»¡è¶³ï¼Œé‚£ä¹ˆè¯¥åç¨‹å°±ä¸€ç›´æ— æ³•é€€å‡ºï¼Œä»è€Œé€ æˆæ³„æ¼ ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:3:3","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["golang"],"content":"3 å‚è€ƒèµ„æ–™ https://segmentfault.com/a/1190000040161853?utm_source=sf-similar-article https://www.php.cn/be/go/490491.html ","date":"2022-07-06","objectID":"/2022/07/goroutine-leak/:4:0","tags":["goroutine"],"title":"Goroutine æ³„æ¼","uri":"/2022/07/goroutine-leak/"},{"categories":["git\u0026github"],"content":"ä½¿ç”¨Loveitä¸»é¢˜çš„æ‹“å±•short codesä¹‹åï¼Œç”±äºåœ¨markdownä¹‹ä¸­å¼•å…¥äº†{{}}è¯­æ³•ï¼Œä½¿å¾—Liquidåœ¨è§£æmarkdownä¸­çš„ä»£ç å—æ—¶å‡ºé”™ï¼Œé‡‡ç”¨çš„è§£å†³æ–¹æ³•æ˜¯ç¦ç”¨Jekyllï¼Œå› ä¸ºhugoå·²ç»ç”Ÿæˆäº†é™æ€ç«™ç‚¹æ‰€éœ€çš„æ–‡ä»¶ï¼Œä¸éœ€è¦å†ä½¿ç”¨Jekyllã€‚åœ¨è§£å†³æ­¤é—®é¢˜çš„åŒæ—¶ï¼Œå­¦ä¹ äºäº†è§£äº†Githubä¸Šçš„ActionåŠŸèƒ½ï¼Œå¹¶ä½¿ç”¨Github Actionå®Œæˆäº†ç«™ç‚¹çš„è‡ªåŠ¨éƒ¨ç½²ã€‚ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:0:0","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"0 å‰è¨€ åœ¨æœªå¼•å…¥Github Actionæ—¶ï¼Œæˆ‘éƒ¨ç½²åœ¨Githubä¸Šçš„é™æ€ç½‘ç«™ç›´æ¥å°†Hugoç”Ÿæˆçš„publicç›®å½•ç›´æ¥ä¸Šä¼ è‡³zchaoyu1126.github.ioä»“åº“ä¸­ï¼Œç„¶åè‡ªåŠ¨è§¦å‘pages build and deployment Actionã€‚ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œå°±èƒ½é€šè¿‡è®¿é—®zchaoyu1126.github.ioæŸ¥çœ‹æ•ˆæœã€‚ ä½†æ˜¯ï¼Œæˆ‘åœ¨ä½¿ç”¨Loveitä¸»é¢˜çš„æ‹“å±•short codesä¹‹åï¼Œç”±äºåœ¨markdownä¹‹ä¸­å¼•å…¥äº†{{}}è¯­æ³•ï¼Œä½¿å¾—Liquidåœ¨è§£æmarkdownä¸­çš„ä»£ç å—æ—¶å‡ºé”™ã€‚ å…·ä½“çš„åŸå› ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šå¹¶æ²¡æœ‰æ·±ç©¶ã€‚ Build with Jekyll å¤±è´¥\" Build with Jekyll å¤±è´¥ Liquid syntax error\" Liquid syntax error ä¸ºäº†è§£å†³æœ¬é—®é¢˜æˆ‘åšäº†ä¸€äº›æ¢ç´¢ï¼Œç™¾èˆ¬æ›²æŠ˜è¿‡åï¼Œè¿˜æ˜¯åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°äº†è§£å†³åŠæ³•ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­çš„è¯´æ˜\" å®˜æ–¹æ–‡æ¡£ä¸­çš„è¯´æ˜ ç¦ç”¨Jekyllæœ‰æ•ˆçš„åŸå› ï¼šhugoå·²ç»ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†é™æ€ç«™ç‚¹æ‰€éœ€çš„æ–‡ä»¶ï¼Œä¸éœ€è¦å†ä½¿ç”¨Jekyllã€‚ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:1:0","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"1 Hugoçš„ä½¿ç”¨ Hugoçš„åŸºç¡€ä½¿ç”¨ï¼šhttps://www.gohugo.org/ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:2:0","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2 ä½¿ç”¨Github Actionéƒ¨ç½²Hugo å…³äºGithub Actionï¼Œè¯·å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„åšå®¢ ä»¥ä¸‹å†…å®¹å‚è€ƒï¼šhttps://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:0","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.1 å»ºç«‹ä»“åº“ é¦–å…ˆåœ¨githubä¸Šå»ºç«‹ä¸¤ä¸ªä»“åº“ï¼Œ zchaoyu1126/zchaoyu1126.github.ioï¼špublicç›®å½•çš„è¿œç«¯ä»“åº“ï¼ˆé™æ€ç½‘é¡µéƒ¨ç½²ç«™ç‚¹ï¼‰ zchaoyu1126/blogï¼šhugoå·¥ä½œç›®å½•çš„è¿œç«¯ä»“åº“ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:1","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.2 .gitignoreæ–‡ä»¶ åœ¨hugoçš„å·¥ä½œç›®å½•ä¸­æ–°å»ºä¸€ä¸ª.gitignoreæ–‡ä»¶ï¼Œä»è€Œå°†publicæ–‡ä»¶å¤¹æ’é™¤åœ¨gitä»“åº“ç®¡ç†èŒƒå›´å¤–ã€‚.gitignoreå†…å®¹å¦‚ä¸‹ï¼Œ public/ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:2","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.3 æ·»åŠ å…¬é’¥å’Œç§é’¥ 2.3.1 æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ç»„å¯†é’¥ ssh-keygen -t ed25519 -b 4096 -C \"$(git config user.email)\" -f gh-pages -N \"\" pubåç¼€ä¸ºå…¬é’¥ï¼Œå¦ä¸€ä¸ªä¸ºç§é’¥ å…¬é’¥ä¸ç§é’¥\" å…¬é’¥ä¸ç§é’¥ 2.3.2 åœ¨zchaoyu1126/zchaoyu1126.github.ioä»“åº“ä¸­ï¼Œç‚¹å‡»Settingsï¼Œæ·»åŠ Depoly keys æ·»åŠ å…¬é’¥\" æ·»åŠ å…¬é’¥ 2.3.3 åœ¨zchaoyu1126/blogä»“åº“ä¸­ï¼Œç‚¹å‡»Settingsï¼Œæ·»åŠ Secrets æ·»åŠ ç§é’¥\" æ·»åŠ ç§é’¥ å…³äºå…¬é’¥å¯†é’¥çš„è§£é‡Š å½“æˆ‘ä»¬åœ¨æœ¬åœ°å†™å®Œmarkdownæ–‡ä»¶ä¹‹åå‘è¿œç¨‹ä»“åº“æäº¤ï¼Œä¹Ÿå°±æ˜¯zchaoyu1126/blogï¼Œè¿œç¨‹ä»“åº“ä¼šè‡ªåŠ¨è§¦å‘Github Actionï¼Œè¿™ä¸ªActionä¼šè‡ªåŠ¨å‘zchaoyu1126/zchaoyu1126.github.ioä»“åº“éƒ¨ç½²é™æ€ç½‘ç«™ã€‚è¿™äºŒè€…ä¹‹é—´çš„å®‰å…¨äº¤äº’ä¾¿æ˜¯é€šè¿‡è¿™ä¸€ç»„å¯†é’¥ã€‚ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:3","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.4 ç¦ç”¨Jekyll åœ¨zchaoyu1126/zchaoyu1126.github.ioä»“åº“ä¸­æ–°å»ºä¸€ä¸ª.nojekyllæ–‡ä»¶ã€‚å…¶å†…å®¹ä¸ºç©ºï¼Œè¡¨ç¤ºç¦ç”¨jekyllã€‚ ç¦ç”¨Jekyll\" ç¦ç”¨Jekyll è¡€æ³ªå² äº‹å®è¯æ˜ï¼Œè¿™ç§æ–¹æ³•ä¸å¯è¡Œï¼Œ2.5ä¸­çš„éƒ¨ç½²è¿‡ç¨‹ä¸­å‘githubå†™æ•°æ®æ—¶ï¼Œä¼šæŠŠåŸæœ‰çš„.nojekyllæ–‡ä»¶åˆ æ‰ã€‚ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:4","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.5 æ·»åŠ Github Action åœ¨zchaoyu1126/blogä¸­æ–°å»ºä¸€ä¸ªActionï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š # ACTIONS_DEPLOY_KEY æ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œå³2.3.3ä¸­è¾“å…¥çš„Name# EXTERNAL_REPOSITORY æ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹name:GitHub Pages Deploy#è‡ªåŠ¨åŒ–çš„åç§°on:push:# pushçš„æ—¶å€™è§¦å‘branches:# é‚£äº›åˆ†æ”¯éœ€è¦è§¦å‘- masterjobs:build:runs-on:ubuntu-latest# é•œåƒå¸‚åœºsteps:- name:checkout# æ­¥éª¤çš„åç§°uses:actions/checkout@master# è½¯ä»¶å¸‚åœºçš„åç§°with:# å‚æ•°submodules:true- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:'0.91.2'extended:true- name:Buildrun:hugo --minify- name:Forbid Jekyll # ç”±äº2.4èŠ‚çš„æ–¹æ³•å¤±æ•ˆï¼Œæ‰€ä»¥åœ¨è¿™é‡Œç”Ÿæˆ.nojekyllæ–‡ä»¶run:touch ./public/.nojekyll- name:Deployuses:peaceiris/actions-gh-pages@v2.5.1env:ACTIONS_DEPLOY_KEY:${{ secrets.ACTIONS_DEPLOY_KEY }}EXTERNAL_REPOSITORY:zchaoyu1126/zchaoyu1126.github.ioPUBLISH_BRANCH:masterPUBLISH_DIR:./public ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:5","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"2.6 Git Push åˆ›å»ºå®ŒActionä¹‹åï¼Œä¼šæ‰§è¡Œä¸€æ¬¡pushå¹¶è§¦å‘actionã€‚ å°†æœ¬åœ°çš„hugoç›®å½•åŒæ­¥è‡³è¿œç¨‹ä»“åº“(zchaoyu1126/blog)åï¼Œè®¿é—®zchaoyu1126.github.ioå³å¯çœ‹åˆ°æ•ˆæœã€‚ ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:3:6","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["git\u0026github"],"content":"3 å‚è€ƒèµ„æ–™ https://www.gohugo.org/ https://hugoloveit.com/zh-cn/theme-documentation-extended-shortcodes/ https://tianhui.xin/blog/2019/11/17/hugousegithubactionstopages/ https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html https://docs.github.com/cn/pages/getting-started-with-github-pages/about-github-pages#static-site-generators ","date":"2022-06-29","objectID":"/2022/06/github-action-deploy-hugo/:4:0","tags":["github action","hugo","loveit"],"title":"ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²Hugo","uri":"/2022/06/github-action-deploy-hugo/"},{"categories":["golang"],"content":"ä¿¡æ¯ ä»¥ä¸‹1-5ä¸ºå­—èŠ‚é’è®­è¥ç™½å«–æ‹¿åˆ°çš„å­¦ä¹ è·¯çº¿å›¾ ","date":"2022-06-28","objectID":"/2022/06/means/:0:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"1 å…¥é—¨ å®˜æ–¹è¯¾ç¨‹Goè¯­è¨€åœ£ç»(ä¸­æ–‡ç‰ˆ) Go by Exampleä¸­æ–‡ Effective Goä¸­æ–‡ç‰ˆæœ¬ æ ‡å‡†åº“ï¼š Goè¯­è¨€æ ‡å‡†åº“ä¹¦ç± å®˜æ–¹æ–‡æ¡£ å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ å…¶ä»–ï¼š Goå­¦ä¹ ç¬”è®° The way to go Goè¯­è¨€101 Goè¯­è¨€å…¥é—¨æ•™ç¨‹ Goå‘½ä»¤æ•™ç¨‹ Goå¹¶å‘ç¼–ç¨‹å®æˆ˜ Golang-100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ ","date":"2022-06-28","objectID":"/2022/06/means/:1:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"2 è¿›é˜¶ 7å¤©ç”¨Goä»é›¶å®ç°ç³»åˆ— Web RPCç”Ÿæ€ Go Webç¼–ç¨‹ Go RPC å¼€å‘æŒ‡å— Go Web Examples DB/ORM: https://gorm.io/docs/ https://pkg.go.dev/gorm.io/gorm# é«˜æ€§èƒ½ç¼–ç¨‹ åŸç†ã€è®¾è®¡å®ç°ï¼š Goè¯­è¨€è®¾è®¡ä¸å®ç° Goè¯­è¨€åŸæœ¬ Goè¯­è¨€é«˜çº§ç¼–ç¨‹ Goä¸“å®¶ç¼–ç¨‹ æ·±å…¥è§£æGo Go Assembly ç¤ºä¾‹ ","date":"2022-06-28","objectID":"/2022/06/means/:2:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"3 ç¤¾åŒº Golangä¸­å›½ StudyGolang ","date":"2022-06-28","objectID":"/2022/06/means/:3:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"4 èµ„æ–™ç´¢å¼• Go-ITæŠ€æœ¯çŸ¥è¯†å¼€æºå›¾è°± Goè¯­è¨€å­¦ä¹ èµ„æ–™ä¸ç¤¾åŒºç´¢å¼• GoçŸ¥è¯†å›¾è°±ï¼ˆå¿«é€Ÿäº†è§£å„é¢†åŸŸä¸»æµå¼€å‘æ¡†æ¶ï¼‰ go-awesome awesome-go Goè¿›é˜¶è®­ç»ƒè¥ è¯¾ç¨‹å¤§çº² ","date":"2022-06-28","objectID":"/2022/06/means/:4:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"5 å­¦ä¹ å»ºè®® é€‰æ‹©ä¸€æœ¬å…¥é—¨ä¹¦ç±ï¼Œç³»ç»Ÿäº†è§£è¯­æ³• å¿«é€Ÿè¿‡ä¸€éæ ‡å‡†åº“ï¼Œç›´åˆ°å¸¸è§æ ‡å‡†åº“çš„ç”¨æ³• è¿‡ä¸€éå„ç§èµ„æ–™ç´¢å¼•ï¼Œawesome listï¼Œäº†è§£Goè¯­è¨€å„ç§é¢†åŸŸç”Ÿæ€ è·Ÿç€ä¸€äº›å®è·µè¯¾ç¨‹ï¼ŒåŸºäºä¸»æµæ¡†æ¶è¯•ç€åšä¸€äº›å°å‹é¡¹ç›® ","date":"2022-06-28","objectID":"/2022/06/means/:5:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["golang"],"content":"6 è¡¥å…… èµ„æ–™ç´¢å¼•ï¼šhttps://learnku.com/go/docs ææ–‡å‘¨çš„åšå®¢ï¼šhttps://www.liwenzhou.com/posts/Go/golang-menu/ å…¬ä¼—å·ï¼šè„‘å­è¿›ç…é±¼äº†ï¼Œç½‘ç®¡å¨biå¨ï¼ŒKratoså¼€æºç¤¾åŒº é¡¹ç›®ï¼šhttps://juejin.cn/post/7038967716459315208 ç…é±¼ (eddycjy.com) Goä¿®å…»ä¹‹è·¯ï¼šhttps://www.yuque.com/aceld/golang ","date":"2022-06-28","objectID":"/2022/06/means/:6:0","tags":null,"title":"Goè¯­è¨€å­¦ä¹ èµ„æ–™","uri":"/2022/06/means/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"1 IPv4 åœ°å€ IPv4åœ°å€æ˜¯ä¸€ä¸ª32bitåœ°å€ï¼Œå”¯ä¸€åœ°ä¸é€šç”¨åœ°å®šä¹‰äº†ä¸€ä¸ªè¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„è®¾å¤‡ã€‚IPåœ°å€é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è®°æ³•ï¼Œé¦–å…ˆæ¯8ä¸ªBitæ’å…¥ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå°†æ¯8bitçš„äºŒè¿›åˆ¶æ•°è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ã€‚ è­¦å‘Š ä¸èƒ½æœ‰å…ˆå¯¼0ï¼Œæ•°å€¼å‡å°äºç­‰äº255ä¸”å¤§äºç­‰äº0 IPåœ°å€ç°ç”±ICANNï¼ˆInternet Corporation for Assigned Names and Numbersï¼‰è¿›è¡Œåˆ†é…ã€‚ IPåœ°å€ç®¡ç†æœºæ„åœ¨åˆ†é…IPåœ°å€æ—¶ï¼Œåªåˆ†é…ç½‘ç»œå·ï¼Œè€Œå‰©ä¸‹çš„ä¸»æœºå·åˆ™ç”±å¾—åˆ°è¯¥ç½‘ç»œå·çš„å•ä½è‡ªè¡Œåˆ†é…ã€‚ è·¯ç”±å™¨ä»…æ ¹æ®ç›®çš„ä¸»æœºæ‰€è¿æ¥çš„ç½‘ç»œå·æ¥è½¬å‘åˆ†ç»„ï¼ˆè€Œä¸è€ƒè™‘å…¶ä¸»æœºå·ï¼‰ï¼Œè¿™æ ·å¯ä»¥ä½¿è·¯ç”±è¡¨ä¸­çš„é¡¹ç›®æ•°å¤§å¹…åº¦å‡å°‘ï¼Œä»è€Œå‡å°äº†è·¯ç”±è¡¨æ‰€å çš„å­˜å‚¨ç©ºé—´ã€‚ IPåœ°å€çš„ç¼–å€æ–¹æ³•æ€»å…±ç»å†äº†ä¸‰ä¸ªé˜¶æ®µ åˆ†ç±»çš„IPåœ°å€ï¼šè¿™æ˜¯æœ€åŸºæœ¬çš„ç¼–å€æ–¹æ³•ï¼Œåœ¨1981å¹´å°±é€šè¿‡äº†ç›¸åº”çš„æ ‡å‡†åè®®ã€‚ å­ç½‘çš„åˆ’åˆ†ï¼šè¿™æ˜¯æœ€åŸºæœ¬ç¼–å€æ–¹æ³•çš„æ”¹è¿›ï¼Œå…¶æ ‡å‡†RFC 950åœ¨1985å¹´é€šè¿‡ã€‚ æ„æˆè¶…ç½‘ï¼šè¿™æ˜¯æ¯”è¾ƒæ–°çš„æ— åˆ†ç±»ç¼–å€æ–¹æ³•ã€‚åœ¨1993å¹´æå‡ºåå¾ˆå¿«å¾—åˆ°æ¨å¹¿åº”ç”¨ã€‚ ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:1:0","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"1.1 åˆ†ç±»çš„IPåœ°å€ 1.1.1 IPåœ°å€åˆ†ç±» é€šè¿‡net-idå’Œhost-idå°†IPåœ°å€ç©ºé—´è¢«åˆ’åˆ†ä¸ºABCDEäº”ç±»ï¼Œå…¶ä¸­Dç±»ä¸ºå¤šæ’­åœ°å€ï¼ŒEç±»ä¸ºä¿ç•™åœ°å€ã€‚ IPåœ°å€çš„åˆ†ç±»\" IPåœ°å€çš„åˆ†ç±» ä¿¡æ¯ ä¸ºä»€ä¹ˆè¦åˆ†ç¦»ç½‘ç»œå·å’Œä¸»æœºå·ï¼Ÿ å› ä¸ºä¸¤å°è®¡ç®—æœºè¦é€šè®¯ï¼Œé¦–å…ˆè¦åˆ¤æ–­æ˜¯å¦åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸå†…ï¼Œå³ç½‘ç»œåœ°å€æ˜¯å¦ç›¸åŒã€‚å¦‚æœç½‘ç»œåœ°å€ç›¸åŒï¼Œè¡¨ç¤ºæ¥å—å‘åœ¨æœ¬ç½‘ç»œä¸Šï¼Œé‚£ä¹ˆå¯ä»¥æŠŠæ•°æ®æŠ¥ç›´æ¥å‘é€åˆ°ç›®æ ‡ä¸»æœºã€‚è·¯ç”±å™¨å¯»å€å·¥ä½œä¸­ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡è¿™æ ·çš„æ–¹å¼æ¥æ‰¾åˆ°å¯¹åº”çš„ç½‘ç»œå·çš„ï¼Œè¿›è€ŒæŠŠæ•°æ®åŒ…è½¬å‘ç»™å¯¹åº”çš„ç½‘ç»œå†…ã€‚ 1.1.2 ç‰¹æ®ŠIPåœ°å€ åœ¨IPåœ°å€ä¸­æœ‰ä¸€äº›å¹¶ä¸æ˜¯æ¥æ ‡æ³¨ä¸»æœºçš„ï¼Œè¿™äº›åœ°å€å…·æœ‰ç‰¹æ®Šçš„æ„ä¹‰ã€‚ è¿™äº›åœ°å€åŒ…æ‹¬ç½‘ç»œåœ°å€ã€ç›´æ¥å¹¿æ’­åœ°å€ã€å—é™å¹¿æ’­åœ°å€ã€æœ¬ç½‘ç»œåœ°å€ã€ç¯å›åœ°å€ç­‰ã€‚ â‘ ç½‘ç»œåœ°å€ {\u003cnet-id\u003eï¼Œ0 }ï¼šç”¨äºæ ‡è¯†ç½‘ç»œ å› ç‰¹ç½‘ä¸Šçš„æ¯ä¸ªç½‘ç»œéƒ½æœ‰ä¸€ä¸ªIPåœ°å€ï¼Œå…¶ä¸»æœºå·éƒ¨åˆ†ä¸º0ã€‚ Aç±»ç½‘ç»œçš„ç½‘ç»œåœ°å€ä¸ºï¼šNetwork-number.0.0.0ã€‚ä¾‹å¦‚ï¼Œ120.0.0.0ï¼› Bç±»ç½‘ç»œçš„ç½‘ç»œåœ°å€ä¸ºï¼šNetwork-number.0.0ã€‚ä¾‹å¦‚ï¼Œ139.22.0.0ï¼› Cç±»ç½‘ç»œçš„ç½‘ç»œåœ°å€ä¸ºï¼šNetwork-number.0ã€‚ä¾‹å¦‚ï¼Œ203.120.16.0ã€‚ ä¿¡æ¯ ç”¨äºæ ‡è¯†ç½‘ç»œï¼Œä¸èƒ½åˆ†é…ç»™ä¸»æœºï¼Œæ•…ä¸èƒ½ä½œä¸ºæ•°æ®çš„æºåœ°å€å’Œç›®çš„åœ°å€ã€‚ â‘¡ç›´æ¥å¹¿æ’­åœ°å€ {\u003cnet-id\u003eï¼Œ-1}ï¼šå‘æŸä¸ªç½‘ç»œä¸Šæ‰€æœ‰çš„ä¸»æœºå‘é€æŠ¥æ–‡ã€‚ TCP/IPè§„å®šï¼Œä¸»æœºå·å„ä½å…¨éƒ¨ä¸ºâ€œ1â€çš„IPåœ°å€ç”¨äºå¹¿æ’­ï¼Œå«ä½œå¹¿æ’­åœ°å€ã€‚è·¯ç”±å™¨åœ¨ç›®æ ‡ç½‘ç»œå¤„å°†ç›´æ¥å¹¿æ’­åœ°å€æ˜ å°„ä¸ºç‰©ç†ç½‘ç»œçš„å¹¿æ’­åœ°å€ï¼Œä¾‹å¦‚å°†å…¶æ˜ å°„ä¸º6ä¸ªå­—èŠ‚å…¨ä¸º1çš„ä»¥å¤ªç½‘å¹¿æ’­åœ°å€ã€‚ Aç±»ç½‘ç»œçš„ç›´æ¥å¹¿æ’­åœ°å€ä¸ºï¼šNetwork-number.255.255.255ã€‚ä¾‹å¦‚ï¼Œ120.255.255.255ï¼› Bç±»ç½‘ç»œçš„ç›´æ¥å¹¿æ’­åœ°å€ä¸ºï¼šNetwork-number.255.255ã€‚ä¾‹å¦‚ï¼Œ139.22.255.255ï¼› Cç±»ç½‘ç»œçš„ç›´æ¥å¹¿æ’­åœ°å€ä¸ºï¼šNetwork-number.255ã€‚ä¾‹å¦‚ï¼Œ203.120.16.255ã€‚ ä¿¡æ¯ ç›´æ¥å¹¿æ’­åœ°å€åªèƒ½ä½œä¸ºç›®çš„åœ°å€ â‘¢å—é™å¹¿æ’­åœ°å€{-1ï¼Œ-1}ï¼šåœ¨æœ¬ç½‘ç»œå†…éƒ¨è¿›è¡Œå¹¿æ’­ã€‚ å—é™å¹¿æ’­åœ°å€æ˜¯åœ¨æœ¬ç½‘ç»œå†…éƒ¨è¿›è¡Œå¹¿æ’­çš„ä¸€ç§å¹¿æ’­åœ°å€ï¼ŒTCP/IPè§„å®šï¼Œ32ä½æ¯”ç‰¹å…¨ä¸ºâ€œ1â€çš„IPåœ°å€ç”¨äºæœ¬ç½‘ç»œå†…çš„å¹¿æ’­ã€‚ ç›´æ¥å¹¿æ’­è¦æ±‚å‘é€æ–¹å¿…é¡»çŸ¥é“ç›®æ ‡ç½‘ç»œçš„ç½‘ç»œå·ï¼Œä½†æœ‰äº›ä¸»æœºåœ¨å¯åŠ¨æ—¶å¾€å¾€å¹¶ä¸çŸ¥é“æœ¬ç½‘ç»œçš„ç½‘ç»œå·ï¼Œè¿™æ—¶å€™å¦‚æœæƒ³è¦å‘æœ¬ç½‘ç»œå¹¿æ’­ï¼Œåªèƒ½é‡‡ç”¨å—é™å¹¿æ’­åœ°å€ï¼ˆLimited Broadcast Addressï¼‰ã€‚ ä¿¡æ¯ å—é™å¹¿æ’­åœ°å€åªèƒ½ä½œä¸ºç›®çš„åœ°å€ã€‚ è·¯ç”±å™¨éš”ç¦»å—é™å¹¿æ’­ï¼Œä¸å¯¹å—é™å¹¿æ’­åˆ†ç»„è¿›è¡Œè½¬å‘ã€‚ä¹Ÿå°±æ˜¯è¯´å› ç‰¹ç½‘ä¸æ”¯æŒå…¨ç½‘ç»œèŒƒå›´çš„å¹¿æ’­ã€‚ TCP/IPåè®®è§„å®šï¼Œç½‘ç»œå·å„ä½å…¨éƒ¨ä¸ºâ€œ0â€æ—¶è¡¨ç¤ºçš„æ˜¯æœ¬ç½‘ç»œã€‚æœ¬ç½‘ç»œåœ°å€åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šæœ¬ç½‘ç»œç‰¹å®šä¸»æœºåœ°å€å’Œæœ¬ç½‘ç»œæœ¬ä¸»æœºåœ°å€ã€‚ â‘£æœ¬ç½‘ç»œç‰¹å®šä¸»æœºåœ°å€{0ï¼Œ\u003chost-id\u003e} ä¿¡æ¯ æœ¬ç½‘ç»œç‰¹å®šä¸»æœºåœ°å€åªèƒ½ä½œä¸ºæºåœ°å€ã€‚ â‘¤æœ¬ç½‘ç»œæœ¬ä¸»æœºåœ°å€{0ï¼Œ0} æ— ç›˜å·¥ä½œç«™å¯åŠ¨æ—¶æ²¡æœ‰IPåœ°å€ï¼Œæ­¤æ—¶é‡‡ç”¨ç½‘ç»œå·å’Œä¸»æœºå·éƒ½ä¸ºâ€œ0â€çš„æœ¬ç½‘ç»œæœ¬ä¸»æœºåœ°å€ä½œä¸ºæºåœ°å€ã€‚ ä¿¡æ¯ æœ¬ç½‘ç»œæœ¬ä¸»æœºåœ°å€åªèƒ½ä½œä¸ºæºåœ°å€ã€‚ â‘¥ç¯å›åœ°å€{127, \u003cany\u003e}ï¼šç”¨äºç½‘ç»œè½¯ä»¶æµ‹è¯•ä»¥åŠæœ¬æœºè¿›ç¨‹ä¹‹é—´é€šä¿¡çš„ç‰¹æ®Šåœ°å€ ä¹ æƒ¯ä¸Šé‡‡ç”¨127.0.0.1ä½œä¸ºç¯å›åœ°å€ï¼Œå‘½åä¸ºlocalhostã€‚å½“ä½¿ç”¨ç¯å›åœ°å€ä½œä¸ºç›®æ ‡åœ°å€å‘é€æ•°æ®æ—¶ï¼Œæ•°æ®å°†ä¸ä¼šè¢«å‘é€åˆ°ç½‘ç»œä¸Šï¼Œè€Œæ˜¯åœ¨æ•°æ®ç¦»å¼€ç½‘ç»œå±‚æ—¶å°†å…¶å›é€ç»™æœ¬æœºçš„æœ‰å…³è¿›ç¨‹ã€‚ ç¯å›æ¥å£å¯¹IPæ•°æ®æŠ¥çš„å¤„ç†è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç¯å›åœ°å€\" ç¯å›åœ°å€ åœ¨å‘é€IPæ•°æ®æ—¶ï¼Œé¦–å…ˆè¦åˆ¤åˆ«è¯¥æ•°æ®æŠ¥çš„ç›®çš„IPåœ°å€æ˜¯å¦ä¸ºç¯å›åœ°å€ï¼Œå¦‚æœæ˜¯ç¯å›åœ°å€ï¼Œåˆ™ç›´æ¥å°†IPæ•°æ®æŠ¥æ”¾å…¥IPè¾“å…¥é˜Ÿåˆ—å®ç°ç¯å›ã€‚å¯¹äºç›´æ¥ä»¥æœ¬æœºåœ°å€ä½œä¸ºç›®çš„åœ°å€çš„IPæ•°æ®åŒ…ä¹Ÿè¦ä¼šé€ç»™æœ¬æœºã€‚å¯¹äºå¹¿æ’­æˆ–ç»„æ’­æ•°æ®æŠ¥ï¼Œåˆ™åœ¨ä¼šé€ç»™æœ¬æœºçš„åŒæ—¶è¿˜è¦å‘ç½‘ç»œå‘é€ã€‚ åœ¨é™¤å»ç‰¹æ®ŠIPåœ°å€ä¹‹åï¼Œå¯ä½¿ç”¨çš„IPåœ°å€å¦‚ä¸‹ï¼Œ IPåœ°å€å¯ä½¿ç”¨èŒƒå›´\" IPåœ°å€å¯ä½¿ç”¨èŒƒå›´ 1.1.3 ç§æœ‰ç½‘ç»œ åœ¨IPåœ°å€ç©ºé—´ä¸­ï¼Œä¿ç•™äº†å‡ ä¸ªç”¨äºç§æœ‰ç½‘ç»œçš„åœ°å€ï¼Œç§æœ‰ç½‘ç»œåœ°å€é€šå¸¸åº”ç”¨äºå…¬å¸ã€ç»„ç»‡å’Œä¸ªäººç½‘ç»œï¼Œå®ƒä»¬æ²¡æœ‰ç½®äºå› ç‰¹ç½‘ã€‚ Aç±»ï¼š10.0.0.0~10.255.255.255 Bç±»ï¼š172.16.0.0~172.31.255.255 Cç±»ï¼š192.168.0.0~192.168.255.255 ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:1:1","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"1.2 åˆ’åˆ†å­ç½‘ é—®é¢˜ å¯¹äºæŸäº›ä¸­ç­‰è§„æ¨¡çš„ç½‘ç»œï¼Œä¸€ä¸ªCç±»çš„IPåœ°å€ä¸å¤Ÿç”¨ï¼Œè€Œä½¿ç”¨Bç±»çš„IPåœ°å€åˆ™è¿‡äºæµªè´¹ã€‚å¦‚æœä½¿ç”¨å¤šä¸ªCç±»åœ°å€åˆ™ä¼šé€ æˆä¸€ä¸ªç»„ç»‡æœ‰å¤šä¸ªç½‘ç»œåŸŸï¼Œè¿™ä¼šå¯¼è‡´è·¯ç”±å™¨çš„è·¯ç”±è¡¨æ‰©å¤§ã€‚ åœ¨ARPANETæ—©æœŸï¼ŒIPåœ°å€çš„è®¾è®¡ä¸å¤Ÿåˆç†ï¼Œä½¿å¾—IPåœ°å€ç©ºé—´çš„åˆ©ç”¨ç‡å¾ˆä½ï¼Œè€Œä¸”ç»™æ¯ä¸ªç‰©ç†ç½‘ç»œåˆ†é…ä¸€ä¸ªç½‘ç»œå·ä¼šä½¿è·¯ç”±è¡¨å˜å¾—å¤ªå¤§å› è€Œä½¿ç½‘ç»œæ€§èƒ½å˜åã€‚ä»1985å¹´èµ·ï¼Œåœ¨IPåœ°å€ä¸­åˆå¢åŠ äº†ä¸€ä¸ªå­ç½‘å·å­—æ®µï¼Œä½¿ä¸¤çº§çš„IPåœ°å€å˜æˆäº†ä¸‰çº§çš„IPåœ°å€ã€‚è¿™ç§åšæ³•å«åšåˆ’åˆ†å­ç½‘ï¼Œåˆ’åˆ†å­ç½‘å·²ç»ç§°ä¸ºå› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†åè®®ã€‚ 1.2.1 å­ç½‘çš„åˆ’åˆ† åˆ’åˆ†å­ç½‘å±äºä¸€ä¸ªå•ä½ï¼ˆnet-idï¼‰å†…éƒ¨çš„äº‹æƒ…ï¼Œè¯¥å•ä½ï¼ˆnet-idï¼‰å¯¹å¤–ä»ç„¶è¡¨ç°ä¸ºæ²¡æœ‰åˆ’åˆ†å­ç½‘çš„ç½‘ç»œã€‚ åˆ’åˆ†å­ç½‘çš„æ–¹å¼ï¼šä»ä¸»æœºå·ä¸­å€Ÿç”¨è‹¥å¹²ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·subnet-idï¼Œç”±æ­¤ipåœ°å€å˜ä¸º {\u003cnet-id\u003eï¼Œ\u003csubnet-id\u003eï¼Œ\u003chost-id\u003e}è¿™æ ·çš„ä¸‰çº§å½¢å¼ã€‚ 1.2.2 å˜é•¿ç½‘ç»œæ©ç  ä¸ºäº†åœ¨ä¸€ä¸ªåˆ’åˆ†å­ç½‘çš„ç½‘ç»œä¸­å¯ä»¥åŒæ—¶ä½¿ç”¨å‡ ä¸ªä¸åŒçš„å­ç½‘æ©ç ï¼Œæå‡ºäº†å˜é•¿å­ç½‘æ©ç ï¼ˆVariable Length Subnet Maskï¼ŒVLSMï¼‰è¿›ä¸€æ­¥æé«˜IPåœ°å€èµ„æºçš„åˆ©ç”¨ç‡ã€‚ VLSM\" VLSM å‡è®¾æœ‰ä¸€ä¸ªç»„ç»‡çš„ç½‘ç»œè§„æ¨¡å¯ä»¥ä½¿ç”¨ä¸€ä¸ªCç±»åœ°å€èŒƒå›´ï¼Œä¸”éœ€è¦åˆ†ä¸º4ä¸ªå­ç½‘ï¼Œé‚£ä¹ˆä½¿ç”¨å®šé•¿çš„æ©ç ï¼Œåˆ™è‡³å°‘éœ€è¦å°†å­ç½‘æ©ç è®¾ç½®ä¸º255.255.255.192ï¼Œè¿™æ ·è¿™ä¸ªç»„ç»‡çš„Cç±»åœ°å€å°±è¢«åˆ†æˆäº†4ä¸ªç­‰å¤§å°çš„å­ç½‘ï¼Œæ¯ä¸ªå­ç½‘æœ‰62ä¸ªå¯ç”¨åœ°å€ã€‚ä½†äº‹å®ä¸Šå­ç½‘Aæœ‰100å°ä¸»æœºå’Œè®¾å¤‡ï¼Œå­ç½‘Bæœ‰50å°ï¼Œå­ç½‘Cã€Då„æœ‰20å¤šå°ï¼Œæ­¤æ—¶å°±æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚ è‹¥ä½¿ç”¨VLSMæŠ€æœ¯ï¼Œåˆ™å¯ä»¥è®¾è®¡192.168.1.0/25ï¼ˆ126ï¼‰ï¼Œ192.168.1.0/26ï¼ˆ62ï¼‰ï¼Œ192.168.1.0/27ï¼ˆ30ï¼‰ï¼Œ192.168.1.0/27ï¼ˆ30ï¼‰çš„å­ç½‘æ©ç ã€‚ ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:1:2","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"1.3 æ„æˆè¶…ç½‘ é—®é¢˜ è™½ç„¶ä½¿ç”¨å­ç½‘æŠ€æœ¯å¯ä»¥æ˜¯IPåœ°å€éƒ½å¾—åˆ°æœ‰æ•ˆçš„åº”ç”¨ï¼Œä½†è¿˜æ˜¯å¾ˆéš¾é˜²æ­¢IPåœ°å€èµ„æºè€—å°½ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªè§„æ¨¡è¶…è¿‡256çš„ç½‘ç»œéƒ½éœ€è¦ä½¿ç”¨Bç±»åœ°å€ï¼Œæ‰€ä»¥Bç±»åœ°å€æ¶ˆè€—çš„é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œè€ŒCç±»åœ°å€ç¼ºå¾—ä¸åˆ°åº”ç”¨ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯æ¶ˆé™¤IPåœ°å€ä¸­ç±»åˆ«çš„æ¦‚å¿µã€‚ åœ¨VLSMçš„åŸºç¡€ä¸Šï¼Œåˆè¿›ä¸€æ­¥ç ”ç©¶å‡ºæ— åˆ†ç±»ç¼–å€æ–¹æ³•ï¼Œå®ƒçš„æ­£å¼åå­—ä½¿æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDRï¼ˆClassless Inter-Domain Routing)ã€‚ CIDRæŠ€æœ¯å°†å­ç½‘æ ‡è¯†çš„ä¸¤ä¸ªéƒ¨åˆ†ç›´æ¥åˆå¹¶åˆ°ä¸€èµ·ï¼Œä½¿ä¸‰çº§çš„IPåœ°å€åˆå˜å›äº†ä¸¤çº§{\u003cnet-prefix\u003eï¼Œ\u003chost-id\u003e}ï¼Œnet-prefixä¸ºç½‘ç»œå‰ç¼€ã€‚ CIDRä»ä½¿ç”¨æ–œçº¿è®°æ³•ï¼Œä¾‹å¦‚128.14.32.0/20ï¼Œè¡¨ç¤ºè¯¥ç½‘ç»œä¸€å…±èƒ½å®¹çº³$2^{12}-2$ä¸ªä¸»æœºæˆ–è®¾å¤‡ã€‚ åŸæœ‰çš„IPåœ°å€åˆ†ç±»æ–¹æ³•ï¼Œä½¿å¾—ä¸€ä¸ªCç±»åœ°å€çš„ç½‘ç»œï¼Œæœ€å¤šæ‹¥æœ‰256ä¸ªIPåœ°å€ï¼Œè€Œä½¿ç”¨CIDRä¹‹åè‡´åŠ›äºæ¶ˆé™¤åˆ†ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿åŸå…ˆå¤šä¸ªCç±»åœ°å€åˆæˆä¸ºä¸€ä¸ªè§„æ¨¡æ›´å¤§çš„åœ°å€èŒƒå›´ï¼Œä»è€Œæé«˜IPåœ°å€çš„åˆ©ç”¨ç‡ã€‚ å…·ä½“åœ°ï¼Œå¯è§å¦‚ä¸‹ä¾‹å­ï¼Œ CIDR\" CIDR ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:1:3","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"1.4 å¯»å€ IPåœ°å€çš„ç½‘ç»œåœ°å€ï¼ˆ\u003cnet-id\u003eï¼Œ0ï¼‰ç”¨äºè·¯ç”±æ§åˆ¶ä¸­ã€‚ åœ¨ä¸»æœºå’Œè·¯ç”±å™¨ä¸Šéƒ½ä¼šæœ‰å„è‡ªçš„è·¯ç”±è¡¨ï¼Œå¦‚æœæ˜¯windowsï¼Œå¯ä»¥ä½¿ç”¨route printå‘½ä»¤æŸ¥çœ‹ã€‚ åœ¨è·¯ç”±è¡¨ä¸­è®°å½•ç€ç½‘ç»œåœ°å€ä¸ä¸‹ä¸€æ­¥åº”è¯¥å‘é€è‡³è·¯ç”±å™¨çš„ä½ç½®ã€‚ åœ¨å‘é€IPæ•°æ®åŒ…æ—¶ï¼Œé¦–å…ˆä¼šç¡®å®šIPåŒ…é¦–éƒ¨ä¸­çš„ç›®æ ‡åœ°å€ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨åŒä¸€ç½‘ç»œä¸­ï¼Œè‹¥æ˜¯åˆ™ç›´æ¥è½¬å‘ã€‚å¦åˆ™å»è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾ä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•ï¼Œæ ¹æ®è¯¥è®°å½•å°†IPåŒ…è½¬å‘ç»™ç›¸åº”çš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚å¦‚æœè·¯ç”±è¡¨ä¸­å­˜åœ¨å¤šæ¡ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•ï¼Œå°±é€‰æ‹©ç›¸åŒä½æ•°æœ€å¤šçš„ç½‘ç»œåœ°å€ï¼Œä¹Ÿå°±æ˜¯æœ€é•¿åŒ¹é…ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡¡æ˜¯ä»å…¶ä»–ç½‘ç»œå‘é€åˆ°æœ¬å•ä½æŸä¸ªä¸»æœºçš„IPæ•°æ®ï¼Œä»ç„¶æ˜¯æ ¹æ®IPæ•°æ®æŠ¥çš„net-idå…ˆæ‰¾åˆ°è¿æ¥åœ¨æœ¬å•ä½ç½‘ç»œä¸Šçš„è·¯ç”±å™¨ã€‚ç„¶åæ­¤è·¯ç”±å™¨åœ¨æ”¶åˆ°IPæ•°æ®æŠ¥ä¹‹åï¼Œå†æŒ‰net-idå’Œsubnet-idæ‰¾åˆ°ç›®çš„å­ç½‘ï¼Œæœ€åå°†IPæ•°æ®æŠ¥äº¤ä»˜ç»™ç›®çš„ä¸»æœºã€‚ å­ç½‘çš„åˆ’åˆ†\" å­ç½‘çš„åˆ’åˆ† è·¯ç”±å™¨R1ä½¿ç”¨å­˜å‚¨çš„å­ç½‘æ©ç ä¸ç›®æ ‡IPåœ°å€ç›¸ä¸ï¼Œå¦‚æœå¾—åˆ°çš„ç»“æœä¸ç›®çš„ç½‘ç»œåœ°å€ç›¸åŒï¼Œé‚£ä¹ˆè¯´æ˜è¯¥å­ç½‘å°±æ˜¯ç›®æ ‡ç½‘ç»œã€‚ è·¯ç”±å™¨å¯»æ‰¾è·¯å¾„\" è·¯ç”±å™¨å¯»æ‰¾è·¯å¾„ ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:1:4","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"2 IPv6 æŒç»­æ›´æ–°ä¸­ ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:2:0","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"3 NATåœ°å€æ˜ å°„ æŒç»­æ›´æ–°ä¸­ NAT1\" NAT1 NAT2\" NAT2 NAT3\" NAT3 NAT4\" NAT4 ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:3:0","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"4 ISPæŠ€æœ¯ ISP\" ISP ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:4:0","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["è®¡ç®—æœºç½‘ç»œ"],"content":"5 å‚è€ƒèµ„æ–™ https://blog.csdn.net/qq_38410730/article/details/80980749 https://xiaolincoding.com/network/4_ip/ip_base.html è¥¿ç”µè®¡ç®—æœºç½‘ç»œè¯¾ç¨‹PPT æœ¬æ–‡ä»…IPçš„ç›¸å…³çŸ¥è¯†ç‚¹è¿›è¡Œæ‘˜å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡è‘—ä½œæƒå½’åŸä½œè€…æ‰€æœ‰ï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»åˆ é™¤ã€‚ ","date":"2022-05-30","objectID":"/2022/05/network-ch4/:5:0","tags":null,"title":"ch4 ç½‘ç»œå±‚-IPåŸºç¡€","uri":"/2022/05/network-ch4/"},{"categories":["golang"],"content":"ch23 åŒæ­¥ Goç¨‹åºå¯ä»¥ä½¿ç”¨é€šé“è¿›è¡Œå¤šä¸ªgoroutineä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œä½†è¿™ä»…ä»…æ˜¯æ•°æ®åŒæ­¥ä¸­çš„ä¸€ç§æ–¹æ³•ã€‚åœ¨ä¸€äº›è½»é‡çº§çš„åœºåˆå¯ä»¥ä½¿ç”¨atomicï¼Œsync.Mutexä»¥åŠç­‰å¾…ç»„sync.WaitGroupã€‚ ","date":"2022-03-16","objectID":"/2022/03/go-ch23/:0:0","tags":null,"title":"Ch23 åŒæ­¥","uri":"/2022/03/go-ch23/"},{"categories":["golang"],"content":"ç«æ€æ£€æµ‹ å½“å¤šçº¿ç¨‹å¹¶å‘è¿è¡Œçš„ç¨‹åºç«äº‰è®¿é—®å’Œä¿®æ”¹åŒä¸€å—èµ„æºæ—¶ï¼Œä¼šå‘ç”Ÿç«æ€é—®é¢˜ã€‚ package main import ( \"fmt\" \"sync/atomic\" ) var seq int64 func main() { for i := 0; i \u003c 10; i++ { go GenID() } fmt.Println(GenID()) } func GenID() int64 { atomic.AddInt64(\u0026seq, 1) return seq } ä½¿ç”¨åŸå­æ“ä½œå‡½æ•°atomic.AddInt64()å¯¹seqè¿›è¡ŒåŠ 1æ“ä½œï¼Œä½†æ˜¯åœ¨è¿™é‡Œæ•…æ„æ²¡æœ‰ä½¿ç”¨atomic.AddInt64()çš„è¿”å›å€¼ä½œä¸ºGenID()çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä¼šé€ æˆä¸€ä¸ªç«æ€é—®é¢˜ã€‚ ç¼–è¯‘è¿è¡Œæ—¶ï¼ŒåŠ å…¥-raceå‚æ•°ï¼Œå³go run -race main.go ä¼šå‘ç”Ÿå®•æœºé”™è¯¯ï¼Œæç¤ºä¿¡æ¯ä¸ºWarning: DATA RACE åº”ä¿®æ”¹ä¸º func GenID() int64 { return atomic.AddInt64(\u0026seq, 1) } ","date":"2022-03-16","objectID":"/2022/03/go-ch23/:1:0","tags":null,"title":"Ch23 åŒæ­¥","uri":"/2022/03/go-ch23/"},{"categories":["golang"],"content":"äº’æ–¥é” atomic: å¯¹å˜é‡è¿›è¡ŒåŸå­æ“ä½œ sync.Mutex: å¯¹ä¸€æ®µä»£ç åŠ ä¸Šäº’æ–¥é”ï¼Œå¯¹å…±äº«å†…å­˜è¿›è¡Œä¿æŠ¤ package main import ( \"fmt\" \"sync\" ) var count int var countGuard sync.Mutex func GetCount() int { countGuard.Lock() defer countGuard.Unlock() return count } func SetCount(x int) { countGuard.Lock() count = x countGuard.Unlock() } func main() { SetCount(1) fmt.Println(GetCount()) } ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®å°†äº’æ–¥é”çš„ç²’åº¦è®¾ç½®çš„è¶Šå°è¶Šå¥½ï¼Œä»è€Œé™ä½å› ä¸ºå…±äº«è®¿é—®æ—¶ç­‰å¾…çš„æ—¶é—´ã€‚ ä¸€æ—¦å‘ç”ŸåŠ é”ï¼Œå¦‚æœå¦å¤–ä¸€ä¸ªgoroutineå°è¯•ç»§ç»­åŠ é”åˆ™ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°è¿™ä¸ªcountGuardè¢«è§£é”ã€‚ package main import ( \"fmt\" \"sync\" \"time\" ) var count int var countGuard sync.Mutex func GetCount() int { countGuard.Lock() defer countGuard.Unlock() return count } func SetCount(x int) { countGuard.Lock() time.Sleep(time.Second * 5) count = x countGuard.Unlock() } func main() { go func() { SetCount(5) }() go func() { fmt.Println(\"waitting...\") fmt.Println(GetCount()) }() var quit int fmt.Scan(\u0026quit) } ","date":"2022-03-16","objectID":"/2022/03/go-ch23/:2:0","tags":null,"title":"Ch23 åŒæ­¥","uri":"/2022/03/go-ch23/"},{"categories":["golang"],"content":"è¯»å†™äº’æ–¥é” åœ¨è¯»å¤šå†™å°‘çš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä¼˜å…ˆä½¿ç”¨è¯»å†™äº’æ–¥é”ã€‚ GetCount(1)è¿™ä¸ªgorouineç¡çœ äº†5ç§’ï¼Œåœ¨è¿™5ç§’å†…å¹¶æ²¡æœ‰é‡Šæ”¾è¯»é”ï¼Œè€Œæ‰§è¡ŒGetCount(0)çš„goroutineå¹¶æ²¡æœ‰å—æ­¤å½±å“è€Œé˜»å¡ã€‚ package main import ( \"fmt\" \"sync\" \"time\" ) var count int var countGuard sync.RWMutex func GetCount(opt int) int { countGuard.RLock() if opt == 1 { time.Sleep(time.Second * 5) } defer countGuard.RUnlock() return count } func SetCount(x int) { countGuard.Lock() count = x countGuard.Unlock() } func main() { go func() { fmt.Println(1, GetCount(1)) }() go func() { fmt.Println(0, GetCount(0)) }() var quit int fmt.Scan(\u0026quit) } ","date":"2022-03-16","objectID":"/2022/03/go-ch23/:3:0","tags":null,"title":"Ch23 åŒæ­¥","uri":"/2022/03/go-ch23/"},{"categories":["golang"],"content":"ç­‰å¾…ç»„ (wg *WaitGroup) Add(delta int) ç­‰å¾…ç»„çš„è®¡æ•°å™¨+delta (wg *WaitGroup) Done() ç­‰å¾…ç»„çš„è®¡æ•°å™¨-1 (wg *WaitGroup) Wait() å½“ç­‰å¾…å™¨è®¡æ•°å™¨ä¸ç­‰äº0æ—¶é˜»å¡ç›´åˆ°å˜æˆ0 package main import ( \"fmt\" \"net/http\" \"sync\" ) func main() { var wg sync.WaitGroup urls := []string{ \"https://www.github.com/\", \"https://www.qiniu.com\", \"https://www.golangtc.gom\", } for _, url := range urls { wg.Add(1) go func(url string) { defer wg.Done() _, err := http.Get(url) fmt.Println(url, err) }(url) // è¿™æ ·æ˜¯ä¸å…è®¸çš„ï¼Œurlä¼šä¸€ç›´æ”¹å˜ï¼Œå¯¼è‡´è¯·æ±‚çš„ç½‘å€éƒ½æ˜¯åŒä¸€ä¸ª // go func() { // defer wg.Done() // _, err := http.Get(url) // fmt.Println(url, err) // }() } wg.Wait() fmt.Println(\"over\") } ","date":"2022-03-16","objectID":"/2022/03/go-ch23/:4:0","tags":null,"title":"Ch23 åŒæ­¥","uri":"/2022/03/go-ch23/"},{"categories":["golang"],"content":"ch21 åç¨‹ Goè¯­è¨€çš„å¹¶å‘é€šè¿‡goroutineç‰¹æ€§å®Œæˆã€‚goroutineç±»ä¼¼äºçº¿ç¨‹ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºå¤šä¸ªgoroutineå¹¶å‘å·¥ä½œã€‚ goroutineæ˜¯ç”±Goè¯­è¨€çš„è¿è¡Œæ—¶è°ƒåº¦å®Œæˆï¼Œè€Œçº¿ç¨‹åˆ™æ˜¯ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦å®Œæˆã€‚ Goè¯­è¨€æä¾›channelä»¥ä¾¿äºåœ¨å¤šä¸ªgoroutineé—´è¿›è¡Œé€šä¿¡ã€‚ goroutineå’Œchannelæ˜¯Goè¯­è¨€ç§‰æ‰¿çš„CSPï¼ˆCommunicating Sequential Process)å¹¶å‘æ¨¡å¼çš„é‡è¦å®ç°åŸºç¡€ã€‚ Goç¨‹åºä»mainåŒ…çš„mainå‡½æ•°å¼€å§‹ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒGoç¨‹åºå°±ä¼šä¸ºmain()å‡½æ•°åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„goroutineã€‚ ","date":"2022-03-10","objectID":"/2022/03/go-ch21/:0:0","tags":null,"title":"Ch21 åç¨‹","uri":"/2022/03/go-ch21/"},{"categories":["golang"],"content":"åˆ›å»ºgoroutine Goç¨‹åºä¸­ä½¿ç”¨goå…³é”®å­—ä¸ºä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªgoroutineï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥è¢«åˆ›å»ºå¤šä¸ªgoroutineï¼Œä¸€ä¸ªgoroutineå¿…å®šå¯¹åº”ä¸€ä¸ªå‡½æ•°ã€‚ go functionName(params type) æ³¨ï¼šè¿”å›å€¼ä¼šè¢«å¿½ç•¥ï¼Œå¦‚æœè¦é€šä¿¡ï¼Œä½¿ç”¨channel package main import ( \"fmt\" \"time\" ) func running() { var times int for { times++ fmt.Println(\"tick\", times) time.Sleep(time.Second) } } func main() { go running() var input string fmt.Scanln(\u0026input) } ä½¿ç”¨go running()ä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªåç¨‹ï¼Œæ¯ä¸ªä¸€ç§’è¾“å‡ºä¸€ä¸ªtickï¼Œåœ¨ç”¨æˆ·çš„è¾“å…¥è¯»å–å®Œæ¯•åï¼Œæ•´ä¸ªç¨‹åºç»“æŸï¼Œgoroutineè¢«ç»ˆæ­¢ã€‚ Goç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œruntimeä¼šé»˜è®¤ä¸ºmain()å‡½æ•°åˆ›å»ºä¸€ä¸ªgoroutineï¼Œmain()å‡½æ•°çš„goroutineä¸­æ‰§è¡Œåˆ°go running()è¯­å¥æ—¶ï¼Œå½’å±äºrunning()å‡½æ•°çš„goroutineè¢«åˆ›å»ºï¼Œrunning()å‡½æ•°å¼€å§‹åœ¨è‡ªå·±çš„goroutineä¸­æ‰§è¡Œï¼Œæ­¤æ—¶ï¼Œmain()å‡½æ•°ç»§ç»­æ‰§è¡Œï¼Œä¸¤ä¸ªgoroutineé€šè¿‡GOç¨‹åºçš„è°ƒåº¦æœºåˆ¶åŒæ—¶è¿è¡Œã€‚ ","date":"2022-03-10","objectID":"/2022/03/go-ch21/:1:0","tags":null,"title":"Ch21 åç¨‹","uri":"/2022/03/go-ch21/"},{"categories":["golang"],"content":"åŒ¿åå‡½æ•°åˆ›å»ºgoroutine package main import ( \"fmt\" \"time\" ) func main() { go func() { var times int for { times++ fmt.Println(\"ticks\", times) time.Sleep(time.Second) } }() var input string fmt.Scanln(\u0026input) } æ³¨æ„äº‹é¡¹ï¼š æ‰€æœ‰goroutineåœ¨main()å‡½æ•°ç»“æŸæ—¶ä¼šä¸€åŒç»“æŸ goroutineçš„è°ƒåº¦ä¾èµ–äºè°ƒåº¦å™¨çš„å®ç°å’Œè¿è¡Œç¯å¢ƒ golangæ— æ³•kill ä¸€ä¸ª goroutineï¼Œä½†å¯ä»¥é€šè¿‡ä¸€ä¸ªchanç»™å®ƒå‘é€æ¶ˆæ¯è®©å®ƒé€€å‡ºï¼Œæ›´å¤šçš„ä¿¡æ¯è§ ch25 å¹¶å‘ç¼–ç¨‹ ä½¿ç”¨é€šé“è®©goroutineé€€å‡ºçš„ç¤ºä¾‹å¦‚ä¸‹ package main import ( \"fmt\" \"time\" ) func main() { exist := make(chan int) go func(exist chan int) { for { select { case \u003c-time.After(time.Second): fmt.Println(\"hi\") case \u003c-exist: goto End } } End: fmt.Println(\"finished\") }(exist) time.Sleep(time.Second * 5) exist \u003c- 2 time.Sleep(time.Second * 2) } ","date":"2022-03-10","objectID":"/2022/03/go-ch21/:2:0","tags":null,"title":"Ch21 åç¨‹","uri":"/2022/03/go-ch21/"},{"categories":["golang"],"content":"è°ƒæ•´å¹¶å‘çš„è¿è¡Œæ€§èƒ½ Goç¨‹åºè¿è¡Œæ—¶(runtime)å®ç°äº†ä¸€ä¸ªå°å‹çš„ä»»åŠ¡è°ƒåº¦å™¨ï¼Œè¿™å¥—è°ƒåº¦å™¨çš„å·¥ä½œåŸç†ç±»ä¼¼äºæ“ä½œç³»ç»Ÿè°ƒåº¦çº¿ç¨‹ï¼ŒGoç¨‹åºè°ƒåº¦å™¨å¯ä»¥é«˜æ•ˆåœ°å°†CPUèµ„æºåˆ†é…ç»™æ¯ä¸€ä¸ªä»»åŠ¡ã€‚ ä¼ ç»Ÿé€»è¾‘ä¸­ï¼Œå¼€å‘è€…éœ€è¦ç»´æŠ¤çº¿ç¨‹æ± ä¸­çº¿ç¨‹ä¸CPUæ ¸å¿ƒæ•°é‡çš„å¯¹åº”å…³ç³»ã€‚åŒæ ·çš„ï¼ŒGoä¸­å¯ä»¥é€šè¿‡è®¾ç½®runtime.GOMAXPROCS()å‡½æ•°åšåˆ°ï¼Œruntime.GOMAXPROCS(runtime.NumCPU()) ch40 goroutineè°ƒåº¦æœºåˆ¶ ","date":"2022-03-10","objectID":"/2022/03/go-ch21/:3:0","tags":null,"title":"Ch21 åç¨‹","uri":"/2022/03/go-ch21/"},{"categories":["golang"],"content":"ch22 é€šé“ å•çº¯åœ°å°†å‡½æ•°å¹¶å‘æ‰§è¡Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå‡½æ•°ä¸å‡½æ•°é—´éœ€è¦äº¤æ¢æ•°æ®æ‰èƒ½ä½“ç°å¹¶å‘æ‰§è¡Œå‡½æ•°çš„æ„ä¹‰ã€‚ä½¿ç”¨å…±äº«å†…å­˜åœ¨ä¸åŒçš„goroutineä¸­å®¹æ˜“å‘ç”Ÿç«æ€é—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ•°æ®äº¤æ¢çš„æ­£ç¡®æ€§ï¼Œå¿…é¡»ä½¿ç”¨äº’æ–¥é‡å¯¹å†…å­˜è¿›è¡ŒåŠ é”ï¼Œè¿™ç§åšæ³•åŠ¿å¿…é€ æˆæ€§èƒ½é—®é¢˜ã€‚ Goæå€¡ä½¿ç”¨é€šä¿¡æ¥å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯ç”¨å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚ ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:0:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"é€šé“çš„ç‰¹æ€§ Goè¯­è¨€ä¸­çš„é€šé“æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œåœ¨ä»»ä½•æ—¶å€™ï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªgoroutineè®¿é—®é€šé“è¿›è¡Œå‘é€å’Œè·å–æ•°æ®ã€‚ æ€»æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™ï¼Œä¿è¯æ”¶å‘æ•°æ®çš„é¡ºåºã€‚ ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:1:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å£°æ˜ä¸åˆ›å»º é€šé“æ˜¯å¼•ç”¨ç±»å‹ï¼Œç©ºå€¼ä¸ºnilï¼Œéœ€è¦ç»“åˆmakeä½¿ç”¨ var é€šé“å˜é‡ chan é€šé“ç±»å‹ ch1 := make(chan int) ch2 := make(chan interface{}) ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:2:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å‘é€ä¸æ¥æ”¶æ•°æ® ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:3:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å‘é€æ•°æ® æŠŠæ•°æ®å¾€é€šé“ä¸­å‘é€æ—¶ï¼Œå¦‚æœå¯¹æ–¹ä¸€ç›´æ²¡æœ‰æ¥æ”¶ï¼Œé‚£ä¹ˆå‘é€æ“ä½œå°†æŒç»­é˜»å¡ã€‚ package main func main() { ch := make(chan int) ch \u003c- 0 } // fatal error: all goroutines are asleep - deadlock! ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:3:1","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"æ¥æ”¶æ•°æ® é€šé“æ¥æ”¶åŒæ ·ä½¿ç”¨\u003c- æ¯æ¬¡åªèƒ½æ¥æ”¶ä¸€ä¸ªå…ƒç´  é€šé“çš„æ”¶å‘æ“ä½œåœ¨ä¸¤ä¸ªä¸åŒçš„goroutineé—´è¿›è¡Œ ç”±äºé€šé“çš„æ•°æ®åœ¨æ²¡æœ‰æ¥æ”¶æ–¹å¤„ç†æ—¶ï¼Œæ•°æ®å‘é€æ–¹ä¼šæŒç»­é˜»å¡ï¼Œå› æ­¤é€šé“çš„æ¥æ”¶å¿…å®šæ˜¯åœ¨å¦å¤–ä¸€ä¸ªgoroutineä¸­è¿›è¡Œã€‚ æ¥æ”¶æ–¹å°†æŒç»­é˜»å¡ç›´åˆ°å‘é€æ–¹å‘é€æ•°æ® data := \u003c-ch package main import \"time\" import \"fmt\" func main() { ch := make(chan int) go func() { time.Sleep(time.Second*5) fmt.Println(\"å¼€å§‹å‘é€\") ch \u003c- 20 }() data := \u003c- ch fmt.Println(\"æ¥æ”¶å®Œæ¯•, æ•°æ®ä¸º\", data) } ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:3:2","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å¾ªç¯æ¥æ”¶æ•°æ® é€šé“çš„æ•°æ®æ¥æ”¶å¯ä»¥å€Ÿç”¨for rangeè¯­å¥è¿›è¡Œå¤šä¸ªå…ƒç´ çš„æ¥æ”¶æ“ä½œï¼Œæ ¼å¼å¦‚ä¸‹ï¼š for data := range ch { } ä½¿ç”¨rangeè¯»å–channelå€¼æ—¶ï¼Œè‹¥chanæ²¡æœ‰å…³é—­æˆ–è€…æ‰‹åŠ¨breakï¼Œåˆ™ä¼šä¸€ç›´ç­‰å¾…channelçš„å€¼ï¼Œå¹¶ä¸”é˜»å¡åé¢è¯­å¥çš„æ‰§è¡Œã€‚ä¸¤ä¸ªä¾‹å­å¦‚ä¸‹ ä¾‹1 package main import \"fmt\" func main() { ch := make(chan int) go func() { for i := 3; i \u003e= 0; i-- { ch \u003c- i } }() for data := range ch { fmt.Println(data) if data == 0 { break } } } ä¾‹2 package main import \"fmt\" import \"time\" func main() { ch := make(chan int) go func() { for v := range ch { fmt.Println(v) } fmt.Println(\"over\") } () fmt.Println(\"main start\") time.Sleep(time.Second*2) ch \u003c- 2 time.Sleep(time.Second*3) fmt.Println(\"main over\") } ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:3:3","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"é€šé“ç”¨äºå¹¶å‘åŒæ­¥ è¿™é‡Œçš„é€šé“ç›¸å½“äºä¿¡å·é‡çš„ä½œç”¨ï¼Œå½“goroutineç»“æŸä¹‹åï¼Œé€šçŸ¥mainå‡½æ•°çš„goroutineï¼Œç„¶åmainå‡½æ•°æ‰€ä»¥çš„goroutineè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œã€‚ package main import \"fmt\" func main() { ch := make(chan int) go func() { func.Println(\"start goroutine\") // do something fmt.Println(\"exit goroutine\") ch \u003c- 0 }() fmt.Println(\"wait goroutine\") \u003c- ch // do something fmt.Println(\"all done\") } quit := make(chan bool) go func() { for { select { case \u003c- quit: return default: // Do other stuff } } }() // Do stuff // Quit goroutine close(quit) ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:4:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å•å‘é€šé“ Goçš„é€šé“å¯ä»¥åœ¨å£°æ˜æ—¶çº¦æŸå…¶æ“ä½œæ–¹å‘ï¼Œå¦‚åªæ˜¯å‘é€æˆ–è€…åªæ˜¯æ¥æ”¶ã€‚è¿™ç§è¢«çº¦æŸæ–¹å‘çš„é€šé“è¢«ç§°ä½œå•å‘é€šé“ã€‚å•å‘é€šé“æœ‰åˆ©äºä»£ç æ¥å£çš„ä¸¥è°¨æ€§ã€‚ åªèƒ½å‘é€çš„é€šé“ç±»å‹ä¸ºchan\u003c-ï¼Œåªèƒ½æ¥æ”¶çš„é€šé“ç±»å‹ä¸º\u003c-chanï¼Œæ ¼å¼å¦‚ä¸‹ var é€šé“å®ä¾‹ chan\u003c- å…ƒç´ ç±»å‹ var é€šé“å®ä¾‹ \u003c-chan å…ƒç´ ç±»å‹ ch1 := make(chan int) var chSendOnly chan\u003c- int = ch1 var chRecvOnly \u003c-chan int = ch1 ch2 := make(\u003c-chan int) ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:5:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"å¸¦ç¼“å†²çš„é€šé“ åœ¨æ— ç¼“å†²é€šé“çš„åŸºç¡€ä¸Šï¼Œä¸ºé€šé“å¢åŠ ä¸€ä¸ªæœ‰é™å¤§å°çš„å­˜å‚¨ç©ºé—´å½¢æˆå¸¦ç¼“å†²é€šé“ã€‚ å¸¦ç¼“å†²é€šé“åœ¨å‘é€æ—¶æ— éœ€ç­‰å¾…æ¥æ”¶æ–¹æ¥æ”¶å³å¯å®Œæˆå‘é€è¿‡ç¨‹ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œåªæœ‰å½“å­˜å‚¨ç©ºé—´æ»¡æ˜¯æ‰ä¼šå‘ç”Ÿé˜»å¡ã€‚åŒæ—¶ï¼Œå¦‚æœç¼“å†²é€šé“ä¸­æœ‰æ•°æ®ï¼Œæ¥æ”¶æ—¶å°†ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°é€šé“ä¸­æ²¡æœ‰æ•°æ®å¯è¯»æ—¶ï¼Œé€šé“å°†ä¼šå†åº¦é˜»å¡ã€‚ æ— ç¼“å†²é€šé“å…¶å®å¯ä»¥çœ‹ä½œé•¿åº¦æ°¸è¿œä¸º0çš„å¸¦ç¼“å†²é€šé“ã€‚ ch := make(chan int, 3) ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:6:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"é€šé“çš„å¤šè·¯å¤ç”¨ å¤šè·¯å¤ç”¨æ—¶é€šä¿¡å’Œç½‘ç»œä¸­çš„ä¸€ä¸ªä¸“ä¸šæœ¯è¯­ï¼Œå¤šè·¯å¤ç”¨é€šå¸¸è¡¨ç¤ºåœ¨ä¸€ä¸ªä¿¡é“ä¸Šä¼ è¾“å¤šè·¯ä¿¡å·æˆ–æ•°æ®æµçš„è¿‡ç¨‹å’ŒæŠ€æœ¯ã€‚æŠ¥è¯æœºåŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€è¾¹è¿›è¡Œæ”¶æˆ–è€…å‘çš„å•è¾¹é€šä¿¡ï¼Œè€Œç”µè¯å¯ä»¥åœ¨è¯´è¯çš„åŒæ—¶å¬åˆ°å¯¹æ–¹è¯´å®Œæ¯•ï¼Œç±»ä¼¼çš„è¿˜æœ‰ç½‘çº¿ã€å…‰çº¤ç­‰ã€‚ Goè¯­è¨€ä¸­æä¾›äº†selectå…³é”®å­—ï¼Œå¯ä»¥è®©ä½¿ç”¨é€šé“å®Œæˆå¤šè·¯å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œã€‚selectä¸­çš„æ¯ä¸ªcaseéƒ½å“åº”ä¸€ä¸ªé€šé“çš„æ”¶å‘è¿‡ç¨‹ã€‚å½“æ”¶å‘å®Œæˆæ—¶ï¼Œå°±ä¼šè§¦å‘caseä¸­å“åº”çš„è¯­å¥ã€‚å¤šä¸ªæ“ä½œåœ¨æ¯æ¬¡selectä¸­æŒ‘é€‰ä¸€ä¸ªè¿›è¡Œå“åº”ã€‚ select { case æ“ä½œ1ï¼š å“åº”æ“ä½œ1 case æ“ä½œ2: å“åº”æ“ä½œ2 ... default: æ“ä½œ } ç¤ºä¾‹1ï¼šæ¨¡æ‹Ÿè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ package main import ( \"errors\" \"fmt\" \"time\" ) func main() { ch := make(chan string) go RPCServer(ch) recv, err := RPCClient(ch, \"hi\") if err != nil { fmt.Println(err) } else { fmt.Println(recv) } } func RPCServer(ch chan string) { for { data := \u003c-ch fmt.Println(\"server received data:\", data) ch \u003c- \"roger\" } } func RPCClient(ch chan string, req string) (string, error) { ch \u003c- req select { case ack := \u003c-ch: return ack, nil case \u003c-time.After(time.Second): return \"\", errors.New(\"time out\") } } ç¤ºä¾‹2ï¼šè®¡æ—¶å™¨ä¸é€šé“çš„åº”ç”¨1 package main import ( \"fmt\" \"time\" ) func main() { ch1 := make(chan int) ch2 := make(chan int) go func(ch chan int) { time.Sleep(time.Second * 2) ch \u003c- 2 }(ch1) go func(ch chan int) { time.Sleep(time.Second * 3) ch \u003c- 3 }(ch2) select { case val := \u003c-ch1: fmt.Println(val) case val := \u003c-ch2: fmt.Println(val) case \u003c-time.After(time.Second): fmt.Println(\"Time out\") default: fmt.Println(\"none\") } } // none // æ²¡æœ‰defaultåˆ†æ”¯ï¼Œè¾“å‡ºTime out ç¤ºä¾‹3ï¼šè®¡æ—¶å™¨ä¸é€šé“çš„åº”ç”¨2 tickerï¼Œæ‰“ç‚¹è®¡æ—¶å™¨ timerï¼Œè®¡æ—¶å™¨ è®¡æ—¶ä»»åŠ¡çš„åŒæ­¥å®ç°æ–¹å¼ï¼Œå› ä¸ºselectå“åº”ä¸€æ¬¡ä¹‹åå°±ä¼šç»“æŸï¼Œæ‰€ä»¥å¾—ä½¿ç”¨forå¾ªç¯ï¼Œä½†æ˜¯ä½¿ç”¨breakæ— æ³•é€€å‡ºå¤–å±‚å¾ªç¯ï¼Œæ•…ä½¿ç”¨goto ä¸ labelã€‚ package main import ( \"fmt\" \"time\" ) func main() { ticker := time.NewTicker(time.Millisecond * 500) stopper := time.NewTimer(time.Second * 2) var i int for { select { case \u003c-ticker.C: i++ fmt.Println(\"tick\", i) case \u003c-stopper.C: goto StopHere } } StopHere: fmt.Println(\"done\") } ç¤ºä¾‹4ï¼šè®¡æ—¶å™¨ä¸é€šé“çš„åº”ç”¨3 è®¡æ—¶ä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œæ–¹å¼ï¼Œtime.AfterFunc()ä¸­æ³¨å†Œäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ä¸­é€šè¿‡é€šé“å‘é€å·²ç»å®Œæˆä»»åŠ¡çš„ä¿¡å· package main import ( \"time\" ) func main() { exit := make(chan int) time.AfterFunc(time.Second, func() { exit \u003c- 1 }) \u003c-exit } ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:7:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"é€šé“çš„å…³é—­ chanå…³é—­æ—¶æœºï¼šè°ƒç”¨close(ch)ä¸”å…¶ä¸­çš„æ•°æ®å…¨éƒ¨è¢«æ¶ˆè´¹ï¼Œæˆ–è€…ä¸»çº¿ç¨‹å…³é—­ã€‚ è¢«å…³é—­çš„é€šé“chï¼Œå¹¶ä¸ä¼šç«‹åˆ»è¢«GCå›æ”¶ï¼Œå¹¶ä¸”ä¸ä¼šè¢«ç½®ä¸ºnilï¼Œä½†æ— æ³•å‘å…¶å‘é€æ•°æ® package main import ( \"fmt\" ) func main() { ch := make(chan int, 3) ch \u003c- 1 ch \u003c- 2 close(ch) fmt.Println(cap(ch), len(ch)) ch \u003c- 3 } // 3 2 // panic: send on closed channel ä»å·²ç»å…³é—­çš„é€šé“æ¥æ”¶æ•°æ®ä¸ä¼šé˜»å¡ï¼Œå¦‚æœchæ²¡æœ‰closeï¼Œåˆ™for rangeä¼šé˜»å¡ package main import ( \"fmt\" ) func main() { ch := make(chan int, 3) ch \u003c- 1 ch \u003c- 2 close(ch) for i := range ch { fmt.Println(i) } val, ok := \u003c-ch fmt.Println(val, ok) // å‘å·²å…³é—­ï¼Œä¸”æ— æ•°æ®çš„é€šé“ç»§ç»­è¯»å–æ•°æ®ï¼Œä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œä½†è¿”å›å€¼ä¸ºé›¶å€¼å’Œfalse } // 1 // 2 // 0 false ","date":"2022-03-10","objectID":"/2022/03/go-ch22/:8:0","tags":null,"title":"Ch22 é€šé“","uri":"/2022/03/go-ch22/"},{"categories":["golang"],"content":"ch20 map ch38 mapåº•å±‚å®ç° å†™åœ¨å‰é¢ï¼Œmapå¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå¦‚æœéœ€è¦åœ¨goroutineä¸­ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨sync.mapï¼Œæ›´å¤šçš„ä¿¡æ¯è¯·å‚è€ƒ ch25 å¹¶å‘ç¼–ç¨‹ ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:0:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"å®šä¹‰ä¸åˆå§‹åŒ– å…ˆå®šä¹‰ååˆå§‹åŒ– // å®šä¹‰map // var mp map[KeyType]ValueType var mp map[string]int // åœ¨æœªåˆå§‹åŒ–æ—¶,mpæ— æ³•ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå®•æœº mp = make(map[string]int) // æˆ–è€…ç”¨å¦‚ä¸‹æ–¹å¼ mp = map[string]int{} å®šä¹‰å¹¶åˆå§‹åŒ– mp1 := make(map[string]int) mp2 := map[string]int{} mp3 := map[string]int{ \"apple\":2, \"banana\":3, } ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:1:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"æ ¹æ®keyæŸ¥è¯¢value å¦‚æœkeyä¸å­˜åœ¨æ—¶ï¼Œä¼šè¿”å›valueå¯¹åº”ç±»å‹çš„é»˜è®¤å€¼ï¼Œä½†ä¸èƒ½åŒºåˆ†è¿”å›çš„â€é›¶å€¼â€æ˜¯çœŸå®æ•°æ®è¿˜æ˜¯é»˜è®¤å€¼ï¼Œæ‰€ä»¥å¸¸éœ€è¦æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ func main() { scores := make(map[string][]int) name := \"Lily\" n := 5 if val, has := scores[name]; !has { // ä¸å­˜åœ¨Lilyçš„æˆç»©è®°å½•ï¼Œæ‰€ä»¥é¦–å…ˆåˆ›å»ºä¸€ä¸ª[]int scores[name] = make([]int, n) } // å¦‚æœç›´æ¥æ‰§è¡Œä¸‹é¢è¿™ä¸¤è¡Œä¼šå› ä¸ºscores[name]å¯¹åº”çš„æ˜¯ä¸€ä¸ªnilæŒ‡é’ˆï¼Œè€Œè§¦å‘å®•æœºé”™è¯¯ scores[name][0] = 90 scores[name][1] = 94 ... } ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:2:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"éå†map for k, v := range mp { fmt.Println(k, v) } for _, v := range mp { fmt.Println(v) } for k := range mp { fmt.Println(k) } package main import \"fmt\" func main() { mp := map[string]int{\"Lily\": 90, \"Tom\": 94} // æ³¨æ„for range valæ˜¯ä¸€ä¸ªæ‹·è´ for _, val := range mp { val = 20 fmt.Println(val) } for key, val := range mp { fmt.Println(key, val) } } æ³¨ï¼šéå†è¾“å‡ºçš„å…ƒç´ ä¸å¡«å……é¡ºåºæ— å…³ï¼Œä¸èƒ½æœŸæœ›mapåœ¨éå†æ—¶è¿”å›æŸç§æœŸæœ›é¡ºåºçš„ç»“æœã€‚ ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:3:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"åˆ é™¤é”®å€¼å¯¹ ä½¿ç”¨deleteå†…å»ºå‡½æ•°ä»mapä¸­åˆ é™¤ä¸€ç»„é”®å€¼å¯¹ï¼Œdelete()å‡½æ•°çš„æ ¼å¼ä¸ºdelete(mpï¼Œkey) package main import \"fmt\" func main() { scene := make(map[string]int) scene[\"route\"] = 66 scene[\"brazil\"] = 4 scene[\"china\"] = 960 delete(scene, \"brazil\") for k, v := range scene { fmt.Println(k, v) } } ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:4:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"æ¸…ç©ºmapä¸­çš„å…ƒç´  Goè¯­è¨€å¹¶æ²¡æœ‰ä¸ºmapæä¾›ä»»ä½•æ¸…ç©ºæ‰€æœ‰å…ƒç´ çš„å‡½æ•°ã€æ–¹æ³•ã€‚ æ¸…ç©ºmapçš„å”¯ä¸€åŠæ³•å°±æ˜¯é‡æ–°makeä¸€ä¸ªæ–°çš„mapã€‚åƒåœ¾å›æ”¶çš„æ•ˆç‡æ¯”å†™ä¸€ä¸ªæ¸…ç©ºå‡½æ•°çš„æ•ˆç‡é«˜ã€‚ ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:5:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"sync.Map Goä¸­çš„mapåœ¨å¹¶å‘æ—¶ï¼Œåªè¯»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒåŒæ—¶è¯»å†™çº¿ç¨‹ä¸å®‰å…¨ã€‚ package main func main() { m := make(map[int]int) go func() { for { m[1] = 1 } }() go func() { for { _ = m[1] } }() select {} } // è¿è¡Œæ—¶è¾“å‡º: fatal error: concurrent map read and map write Goåœ¨1.9ç‰ˆæœ¬ä¸­æä¾›äº†ä¸€ç§æ•ˆç‡è¾ƒé«˜çš„å¹¶å‘å®‰å…¨çš„sync.Map https://golangforall.com/en/post/sync-map.html æ— éœ€åˆå§‹åŒ–ï¼Œç›´æ¥å£°æ˜å³å¯ sync.Mapä¸èƒ½ä½¿ç”¨mapçš„æ–¹å¼è¿›è¡Œå–å€¼å’Œè®¾ç½®ç­‰æ“ä½œï¼Œè€Œæ˜¯ä½¿ç”¨sync.Mapçš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚Storeè¡¨ç¤ºå­˜å‚¨ï¼ŒLoadè¡¨ç¤ºè·å–ï¼ŒDeleteè¡¨ç¤ºåˆ é™¤ã€‚ ä½¿ç”¨Rangeé…åˆä¸€ä¸ªå›è°ƒå‡½æ•°è¿›è¡Œéå†æ“ä½œï¼Œé€šè¿‡å›è°ƒå‡½æ•°è¿”å›å†…éƒ¨éå†å‡ºæ¥çš„å€¼ã€‚Rangeå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°çš„è¿”å›å€¼åŠŸèƒ½æ˜¯ï¼šéœ€è¦ç»§ç»­è¿­ä»£éå†æ—¶ï¼Œè¿”å›trueï¼Œç»ˆæ­¢è¿­ä»£éå†æ—¶ï¼Œè¿”å›falseã€‚ package main import ( \"fmt\" \"sync\" ) func main() { var scene sync.Map scene.Store(\"greece\", 97) scene.Store(\"london\", 100) scene.Store(\"egypt\", 200) fmt.Println(scene.Load(\"london\")) scene.Delete(\"london\") scene.Range(func(key interface{}, value interface{}) bool { fmt.Println(\"iterate:\", key, value) return true }) } ","date":"2022-03-05","objectID":"/2022/03/go-ch20/:6:0","tags":null,"title":"Ch20 æ¥å£","uri":"/2022/03/go-ch20/"},{"categories":["golang"],"content":"ch19 æ¥å£ ä¼ ç»Ÿçš„æ´¾ç”Ÿå¼æ¥å£åŠç±»å…³ç³»æ„å»ºçš„æ¨¡å¼ï¼Œè®©ç±»å‹é—´æ‹¥æœ‰å¼ºè€¦åˆçš„çˆ¶å­å…³ç³»ã€‚è¿™ç§å…³ç³»ä¸€èˆ¬ä¼šä»¥â€œç±»æ´¾ç”Ÿå›¾â€çš„æ–¹å¼è¿›è¡Œã€‚ç»å¸¸å¯ä»¥çœ‹åˆ°å¤§å‹è½¯ä»¶æä¸ºå¤æ‚çš„æ´¾ç”Ÿæ ‘ã€‚éšç€ç³»ç»ŸåŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¿™æ£µâ€œæ´¾ç”Ÿæ ‘â€ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚ å¯¹äºGoè¯­è¨€æ¥è¯´ï¼Œéä¾µå…¥å¼è®¾è®¡è®©å®ç°è€…çš„æ‰€æœ‰ç±»å‹éƒ½æ˜¯å¹³è¡Œçš„ã€ç»„åˆçš„ã€‚å¦‚ä½•ç»„åˆåˆ™ç•™åˆ°ä½¿ç”¨è€…ç¼–è¯‘æ—¶å†ç¡®è®¤ï¼Œå› æ­¤ä½¿ç”¨Goè¯­è¨€æ—¶ï¼Œä¸éœ€è¦åŒæ—¶ä¹Ÿä¸å¯èƒ½æœ‰â€œç±»æ´¾ç”Ÿå›¾â€ï¼Œå¼€å‘è€…å”¯ä¸€éœ€è¦å…³æ³¨çš„å°±æ˜¯â€œæˆ‘éœ€è¦ä»€ä¹ˆâ€ï¼Œä»¥åŠâ€œæˆ‘èƒ½å®ç°ä»€ä¹ˆâ€œã€‚ æ¥å£çš„å®ç°åŸç†https://www.jianshu.com/p/70003e0f49d1 ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:0:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"å£°æ˜æ¥å£ æ¥å£æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çš„ç±»å‹ï¼Œä¸è§åˆ°çš„å…·ä½“çš„ç±»å‹å¦‚intã€mapã€sliceç­‰ä¸ä¸€æ ·ã€‚ å…·ä½“çš„ç±»å‹ï¼Œå¯ä»¥çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥çŸ¥é“å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆï¼›ä½†æ˜¯æ¥å£ä¸ä¸€æ ·ï¼Œæ¥å£æ˜¯æŠ½è±¡çš„ï¼Œå®ƒåªæœ‰ä¸€ç»„æ¥å£æ–¹æ³•ï¼Œå¹¶ä¸çŸ¥é“å®ƒçš„å†…éƒ¨å®ç°ï¼Œè™½ç„¶ä¸çŸ¥é“æ¥å£æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯çŸ¥é“å¯ä»¥åˆ©ç”¨å®ƒæä¾›çš„æ–¹æ³•åšä»€ä¹ˆã€‚ é€šè¿‡å¦‚ä¸‹æ ¼å¼å®šä¹‰æ¥å£ï¼Œå…¶ä¸­Namerå°±æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ type Namer interface { Method1(param_list) return_type Method2(param_list) return_type ... } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:1:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"å‘½åè§„èŒƒ æŒ‰ç…§çº¦å®šï¼Œæ¥å£çš„åå­—æœ‰æ–¹æ³•ååŠ [e]råç¼€ç»„æˆï¼Œä¾‹å¦‚Printerï¼ŒReaderã€Writerã€Loggerã€Converterç­‰ç­‰ã€‚è¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„æ–¹å¼ï¼ˆå½“åç¼€erä¸åˆé€‚æ—¶ï¼‰ï¼Œæ¯”å¦‚Recoverableï¼Œæ­¤æ—¶æ¥å£åä»¥ableç»“å°¾ï¼Œæˆ–è€…ä»¥Iå¼€å¤´ ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:2:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"æ¥å£ç±»å‹çš„å®ç° æ¥å£æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹ï¼Œç”¨æ¥å®šä¹‰è¡Œä¸ºçš„ç±»å‹ï¼Œä½†è¿™äº›å®šä¹‰çš„è¡Œä¸ºä¸æ˜¯ç”±æ¥å£ç›´æ¥å®ç°ï¼Œè€Œæ˜¯é€šè¿‡æ–¹æ³•ç”±ç”¨æˆ·å®šä¹‰çš„ç±»å‹å®ç°ã€‚å¦‚æœç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œå®ç°äº†æ¥å£ç±»å‹å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹å°±å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œç§°å®ç°äº†æŸä¸€æ¥å£çš„ç±»å‹ä¸ºå®ä½“ç±»å‹ï¼Œè¯¥å®ä½“ç±»å‹çš„å€¼å¯ä»¥èµ‹å€¼ç»™æ¥å£ç±»å‹çš„å€¼ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œå¦‚æœè¦å®ç°ä¸€ä¸ªæ¥å£å¿…é¡»å®ç°è¿™ä¸ªæ¥å£æä¾›çš„æ‰€æœ‰æ–¹æ³•ã€‚å…·ä½“å®ç°æ—¶ï¼Œå®ä½“ç±»å‹å¯ä»¥é‡‡ç”¨å€¼æ¥æ”¶è€…æˆ–æŒ‡é’ˆæ¥æ”¶è€…ä¸¤ç§æ–¹å¼å®ç°æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œä½†è¿™ä¸¤ç§æ–¹å¼æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå…·ä½“å¦‚ä¸‹ã€‚ å€¼æ¥æ”¶è€…å®ç° package main import \"fmt\" type animal interface{ printInfo() } type cat struct { name string age int } func main(){ c := cat { name : \"mimi\", age : 5, } var a animal = c invoke(a) } // ç±»å‹catä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³• func (c cat) printInfo(){ fmt.Printf(\"this cat's name is %s and it's age is %d\\n\", c.name, c.age) } func invoke(a animal) { a.printInfo() } invokeå‡½æ•°æ¥æ”¶ä¸€ä¸ªanimalæ¥å£ç±»å‹ï¼Œä¾‹å­ä¸­ä¼ é€’å‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä»¥ç±»å‹catçš„å€¼cä¼ é€’çš„ï¼Œè¿è¡Œç¨‹åºå¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚ç°åœ¨ç¨å¾®æ”¹é€ ä¸€ä¸‹ï¼Œå°†*catç±»å‹èµ‹å€¼ç»™animal aï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ func main(){ c := \u0026cat { name : \"mimi\", age : 5, } var a animal = c invoke(a) } è¿è¡Œç¨‹åºï¼Œå‘ç°ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œã€‚ å®ä½“ç±»å‹ä»¥å€¼æ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯å®ä½“ç±»å‹çš„å€¼ï¼Œè¿˜æ˜¯å®ä½“ç±»å‹å€¼çš„æŒ‡é’ˆï¼Œéƒ½è¢«è®¤ä¸ºå®ç°äº†è¯¥æ¥å£ã€‚ æŒ‡é’ˆæ¥æ”¶è€…å®ç° func main(){ c := cat { name : \"mimi\", age : 5, } var a animal = c invoke(a) } // ç±»å‹catä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…å®ç°æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³• func (c *cat) printInfo(){ fmt.Printf(\"this cat's name is %s and it's age is %d\\n\", c.name, c.age) // c.name == (*c).name, c.age == (*c.age) } æ­¤æ—¶ç¼–è¯‘å™¨å·²ç»æç¤ºcatæ²¡æœ‰å®ç°animalæ¥å£ï¼Œå› ä¸ºprintInfoæ–¹æ³•æ˜¯æŒ‡é’ˆæ¥æ”¶è€…ï¼Œæ‰€ä»¥å€¼cä¸èƒ½ä½œä¸ºæ¥å£ç±»å‹animalä¼ å‚ä½¿ç”¨ã€‚è‹¥ä¿®æ”¹ä¸ºvar a animal = \u0026cï¼Œåˆ™è¿è¡ŒæˆåŠŸã€‚ å®ä½“ç±»å‹ä»¥æŒ‡é’ˆæ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œåªæœ‰æŒ‡å‘è¿™ä¸ªç±»å‹çš„æŒ‡é’ˆæ‰è¢«è®¤ä¸ºå®ç°äº†è¿™ä¸ªæ¥å£ã€‚ Go è¯­è¨€è§„èŒƒå®šä¹‰äº†æ¥å£æ–¹æ³•é›†çš„è°ƒç”¨è§„åˆ™ï¼š ç±»å‹ T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º T çš„æ‰€æœ‰æ–¹æ³•ï¼Œä¸åŒ…å«æ¥å—è€…ä¸º* T çš„æ–¹æ³• ç±»å‹ *T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º *T æˆ– T çš„æ‰€æœ‰æ–¹æ³•é›† ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:3:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"å†…éƒ¨å®ç° Goè¯­è¨€ä¸­çš„æ¥å£å¯ä»¥æœ‰å€¼ï¼Œä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡æˆ–ä¸€ä¸ªæ¥å£å€¼ï¼Œä¾‹å¦‚var ai Namerï¼Œaiæ˜¯ä¸€ä¸ªå¤šå­—æ•°æ®ç»“æ„ï¼Œå®ƒçš„åˆå§‹å€¼æ˜¯nil å®ç°äº†Nameræ¥å£çš„ç±»å‹çš„å˜é‡å¯ä»¥èµ‹å€¼ç»™ai(å³receiverçš„å€¼)ï¼Œæ–¹æ³•è¡¨æŒ‡é’ˆï¼ˆmethod table ptr)å°±æŒ‡å‘äº†å½“å‰çš„æ–¹æ³•å®ç°ã€‚å½“å¦ä¸€ä¸ªå®ç°äº†Nameræ¥å£çš„ç±»å‹çš„å˜é‡è¢«èµ‹ç»™aiæ—¶ï¼Œreceiverçš„å€¼å’Œæ–¹æ³•è¡¨æŒ‡é’ˆä¹Ÿä¼šç›¸åº”æ”¹å˜ã€‚ func main(){ var b bytes.Buffer fmt.Fprint(\u0026b, \"hello world\") var w io.Writer w = \u0026b fmt.Println(w) } è¿™é‡Œä¾‹å­ä¸­ï¼Œå› ä¸ºbytes.Bufferå®ç°äº†æ¥å£io.Writerï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡w=\u0026bå¯¹wè¿›è¡Œèµ‹å€¼ã€‚è¿™ä¸ªèµ‹å€¼çš„æ“ä½œä¼šæŠŠå®šä¹‰ç±»å‹çš„å€¼å­˜å…¥æ¥å£ç±»å‹çš„å€¼ã€‚ æ¥å£çš„å€¼è¢«èµ‹å€¼åï¼Œæ¥å£å€¼å†…éƒ¨çš„å¸ƒå±€ã€‚æ¥å£çš„å€¼æ˜¯ä¸€ä¸ªä¸¤ä¸ªå­—é•¿åº¦çš„æ•°æ®ç»“æ„ï¼Œç¬¬ä¸€ä¸ªå­—åŒ…å«ä¸€ä¸ªæŒ‡å‘å†…éƒ¨è¡¨ç»“æ„çš„æŒ‡é’ˆï¼Œè¿™ä¸ªå†…éƒ¨è¡¨é‡Œå­˜å‚¨çš„æœ‰å®ä½“ç±»å‹çš„ä¿¡æ¯ä»¥åŠç›¸å…³è”çš„æ–¹æ³•é›†ï¼›ç¬¬äºŒä¸ªå­—åŒ…å«çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å­˜å‚¨çš„å®ä½“ç±»å‹å€¼çš„æŒ‡é’ˆã€‚ æ‰€ä»¥æ¥å£çš„å€¼ç»“æ„å…¶å®æ˜¯ä¸¤ä¸ªæŒ‡é’ˆï¼Œè¿™ä¹Ÿå¯ä»¥è¯´æ˜æ¥å£å…¶å®æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ã€‚ ch39 interfaceåº•å±‚å®ç° ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:4:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"ç‰¹æ€§ å¤šä¸ªç±»å‹å¯ä»¥å®ç°ä¸€ä¸ªæ¥å£ ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£ å®ç°æŸä¸ªæ¥å£çš„ç±»å‹é™¤äº†å®ç°æ¥å£æ–¹æ³•å¤–ï¼Œå¯ä»¥æœ‰å…¶ä»–çš„åŠæ³• å³ä½¿æ¥å£åœ¨ç±»å‹ä¹‹åæ‰å®šä¹‰ï¼ŒäºŒè€…å¤„äºä¸åŒçš„åŒ…ä¸­ï¼Œè¢«å•ç‹¬ç¼–è¯‘ï¼šåªè¦ç±»å‹å®ç°äº†æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå®ƒå°±å®ç°äº†æ­¤æ¥å£ã€‚ ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:5:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"æ¥å£åµŒå¥—ç»„åˆ ä¸€ä¸ªæ¥å£å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–çš„æ¥å£ï¼Œè¿™ç›¸å½“äºç›´æ¥å°†è¿™äº›å†…åµŒæ¥å£çš„æ–¹æ³•åˆ—ä¸¾åœ¨å¤–å±‚æ¥å£ä¸­ä¸€æ ·ã€‚ æ¯”å¦‚Fileä¸­åŒ…å«äº†ReadWriterå’ŒLockerçš„æ‰€æœ‰æ–¹æ³•ï¼Œè¿˜é¢å¤–æœ‰ä¸€ä¸ªClose()æ–¹æ³• type ReadWrite interface { Read(b Buffer) bool Write(b Buffer) bool } type Locker interface { Lock() UnLock() } type File interface { ReadWrite Locker Close() } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:6:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"ç±»å‹æ–­è¨€ ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡varIä¸­å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å€¼ï¼Œå¿…é¡»æœ‰ä¸€ç§æ–¹å¼æ¥æ£€æµ‹å®ƒçš„åŠ¨æ€ç±»å‹ï¼Œå³è¿è¡Œæ—¶åœ¨å˜é‡ä¸­å­˜å‚¨çš„å€¼çš„å®é™…ç±»å‹ã€‚ åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç±»å‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ¥æµ‹è¯•åœ¨æŸä¸ªæ—¶åˆ»varIæ˜¯å¦åŒ…å«ç±»å‹Tçš„å€¼ã€‚ varIå¿…é¡»æ˜¯ä¸€ä¸ªæ¥å£å˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ if v, ok := varI.(T); ok { Process(v) return } å¦‚æœè½¬æ¢åˆæ³•ï¼Œvæ˜¯varIè½¬æ¢åˆ°ç±»å‹Tçš„å€¼ï¼Œokä¼šæ˜¯trueï¼›å¦åˆ™væ˜¯ç±»å‹Tçš„é›¶å€¼ï¼Œokæ˜¯falseã€‚ package main import \"fmt\" type Shaper interface { Area() } type Circle struct { radius float32 } func main() { var area Shaper area = \u0026Circle{radius:3} if t, ok := area.(*Circle); ok { fmt.Printf(\"The type of areaIntf is: %T\\n\", t) } } func (c *Circle) Area(){ fmt.Println(\"circle's area\") } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:7:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"type-switchç»“æ„ æ¥å£å˜é‡çš„ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ç§ç‰¹æ®Šå½¢å¼çš„switchæ¥æ£€æµ‹ æ­¤å¤–ï¼Œåœ¨å¤„ç†æ¥è‡ªäºå¤–éƒ¨çš„ã€ç±»å‹æœªçŸ¥çš„æ•°æ®æ—¶ï¼Œæ¯”å¦‚è§£æè¯¸å¦‚JSNOæˆ–XMLç¼–ç çš„æ•°æ®æ—¶ï¼Œç±»å‹æµ‹è¯•å’Œè½¬æ¢ä¼šéå¸¸æœ‰ç”¨ switch x.(type) { case bool: // do something case int: // do something default: //do something } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:7:1","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"å¸¸è§æ¥å£ ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:8:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"Sortæ¥å£ type Interface interface { Len() int Less(i, j int) bool Swap(i, j int) } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:8:1","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"è¯»å†™æ¥å£ è¯»å’Œå†™æ˜¯è½¯ä»¶ä¸­å¾ˆæ™®éçš„è¡Œä¸ºï¼Œæèµ·å®ƒä»¬å°±ä¼šç«‹å³æƒ³åˆ°è¯»å†™æ–‡ä»¶ã€ç¼“å­˜ï¼ˆæ¯”å¦‚å­—èŠ‚æˆ–å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼‰ã€æ ‡å‡†è¾“å…¥è¾“å‡ºã€æ ‡å‡†é”™è¯¯ä»¥åŠç½‘ç»œè¿æ¥ã€ç®¡é“ç­‰ï¼Œæˆ–è€…è¯»å†™æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹ã€‚ä¸ºäº†è®©ä»£ç å°½å¯èƒ½é€šç”¨ï¼ŒGOé‡‡å–äº†ä¸€è‡´çš„æ–¹å¼æ¥è¯»å†™æ•°æ®ã€‚ ioåŒ…æä¾›äº†ç”¨äºè¯»å’Œå†™çš„æ¥å£io.Readerå’Œio.Writer type Reader interface { Read(p []byte) (n int, err error) } type Writer interface { Write(p []byte) (n int, err error) } åªè¦ç±»å‹å®ç°äº†è¯»å†™æ¥å£ï¼Œæä¾› Read() å’Œ Write æ–¹æ³•ï¼Œå°±å¯ä»¥ä»å®ƒè¯»å–æ•°æ®ï¼Œæˆ–å‘å®ƒå†™å…¥æ•°æ®ã€‚ä¸€ä¸ªå¯¹è±¡è¦æ˜¯å¯è¯»çš„ï¼Œå®ƒå¿…é¡»å®ç° io.Reader æ¥å£ï¼Œè¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªç­¾åæ˜¯ Read(p []byte) (n int, err error) çš„æ–¹æ³•ï¼Œå®ƒä»è°ƒç”¨å®ƒçš„å¯¹è±¡ä¸Šè¯»å–æ•°æ®ï¼Œå¹¶æŠŠè¯»åˆ°çš„æ•°æ®æ”¾å…¥å‚æ•°ä¸­çš„å­—èŠ‚åˆ‡ç‰‡ä¸­ï¼Œç„¶åè¿”å›è¯»å–çš„å­—èŠ‚æ•°å’Œä¸€ä¸ª error å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿè¿”å› nilï¼Œå¦‚æœå·²ç»åˆ°è¾¾è¾“å…¥çš„å°¾ç«¯ï¼Œä¼šè¿”å› io.EOF(\"EOF\")ï¼Œå¦‚æœè¯»å–çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œå°±ä¼šè¿”å›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚ç±»ä¼¼åœ°ï¼Œä¸€ä¸ªå¯¹è±¡è¦æ˜¯å¯å†™çš„ï¼Œå®ƒå¿…é¡»å®ç° io.Writer æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿåªæœ‰ä¸€ä¸ªç­¾åæ˜¯ Write(p []byte) (n int, err error) çš„æ–¹æ³•ï¼Œå®ƒå°†æŒ‡å®šå­—èŠ‚åˆ‡ç‰‡ä¸­çš„æ•°æ®å†™å…¥è°ƒç”¨å®ƒçš„å¯¹è±¡é‡Œï¼Œç„¶åè¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°å’Œä¸€ä¸ª error å¯¹è±¡ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿå°±æ˜¯ nilï¼‰ã€‚ io åŒ…é‡Œçš„ Readers å’Œ Writers éƒ½æ˜¯ä¸å¸¦ç¼“å†²çš„ï¼Œbufio åŒ…é‡Œæä¾›äº†å¯¹åº”çš„å¸¦ç¼“å†²çš„æ“ä½œï¼Œåœ¨è¯»å†™ UTF-8 ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æ—¶å®ƒä»¬å°¤å…¶æœ‰ç”¨ã€‚ ch28 è¿›é˜¶è¾“å…¥è¾“å‡º ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:8:2","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"ç©ºæ¥å£ ç©ºæ¥å£ä¸åŒ…å«ä»»ä½•åŠæ³•ï¼Œå®ƒå¯¹å®ç°ä¸åšä»»ä½•è¦æ±‚ type Any interface {} ä»»ä½•å…¶ä»–ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œanyæˆ–Anyæ˜¯ç©ºæ¥å£ä¸€ä¸ªå¾ˆå¥½çš„åˆ«åæˆ–ç¼©å†™ å¯ä»¥ç»™ç©ºæ¥å£ç±»å‹çš„å˜é‡var val interface {} èµ‹äºˆä»»ä½•ç±»å‹çš„å€¼ ç©ºæ¥å£æ˜¯ä¸€ç§æ¥å£ï¼Œå®ƒæ˜¯ä¸€ç§æŒ‡é’ˆç±»å‹çš„æ•°æ®ç±»å‹ï¼Œè™½ç„¶ä¸ä¸¥è°¨ï¼Œä½†å®ƒç¡®å®ä¿å­˜äº†ä¸¤ä¸ªæŒ‡é’ˆï¼Œ**ä¸€ä¸ªæ˜¯å¯¹è±¡çš„ç±»å‹(æˆ–iTable)ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡çš„å€¼ã€‚**æ‰€ä»¥èµ‹å€¼è¿‡ç¨‹æ˜¯è®©ç©ºæ¥å£anyä¿å­˜å„ä¸ªæ•°æ®å¯¹è±¡çš„ç±»å‹å’Œå¯¹è±¡çš„å€¼ã€‚ var test interface{} test = \"string\" ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:9:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"åˆ©ç”¨ç©ºæ¥å£æ„å»ºé€šç”¨ç±»å‹çš„æ•°ç»„ è®©æˆ‘ä»¬ç»™ç©ºæ¥å£å®šä¹‰ä¸€ä¸ªåˆ«åç±»å‹Element:type Element interface{} ç„¶åå®šä¹‰ä¸€ä¸ªå®¹å™¨ç±»å‹çš„ç»“æ„ä½“Vectorï¼Œå®ƒåŒ…å«ä¸€ä¸ªElementç±»å‹å…ƒç´ çš„åˆ‡ç‰‡ type Element interface{} type Vector struct { a []Element } func (p *Vector) At(i int) Element { return p.a[i] } func (p *Vector) Set(i int, e Element) { p.a[i] = e } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:9:1","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"å¤åˆ¶æ•°æ®åˆ‡ç‰‡è‡³ç©ºæ¥å£åˆ‡ç‰‡ å‡è®¾æœ‰ä¸€ä¸ªmyTypeç±»å‹çš„æ•°æ®åˆ‡ç‰‡ï¼Œè‹¥æƒ³å°†åˆ‡ç‰‡ä¸­çš„æ•°æ®èµ‹å€¼åˆ°ä¸€ä¸ªç©ºæ¥å£åˆ‡ç‰‡ä¸­ï¼Œç±»ä¼¼ var dataSlice []myType = FuncReturnSlice() var interfaceSlice []interface{} = dataSlice å¯æƒœä¸èƒ½è¿™ä¹ˆåšï¼Œç¼–è¯‘æ—¶ä¼šå‡ºé”™ï¼š cannot use dataSlice (type []myType) as type []interface { } in assignment åŸå› æ˜¯å®ƒä»¬ä¿©åœ¨å†…å­˜ä¸­çš„å¸ƒå±€æ˜¯ä¸ä¸€æ ·çš„ï¼ˆå‚è€ƒ Go wikiï¼‰ã€‚ å¿…é¡»ä½¿ç”¨for-rangeè¯­å¥æ¥ä¸€ä¸ªä¸€ä¸ªæ˜¾ç¤ºåœ°èµ‹å€¼ï¼š var dataSlice []myType = FuncReturnSlice() var interfaceSlice []interface{} = make([]interface{}, len(dataSlice)) for i, d := range dataSlice { interfaceSlice[i] = d } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:9:2","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"é€šç”¨ç±»å‹çš„èŠ‚ç‚¹æ•°æ®ç»“æ„ package main import \"fmt\" type Node struct { le *Node data interface{} ri *Node } func NewNode(left, right *Node) *Node { return \u0026Node{left, nil, right} } func (n *Node) SetDate(data interface{}) { n.data = data } func main() { root := NewNode(nil, nil) root.SetData(\"root node\") a := NewNode(nil, nil) a.SetData(\"left node\") b := NewNode(nil, nil) b.SetData(\"right node\") root.le = a root.ri = b fmt.Printf(\"%v\\n\", root) } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:9:3","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"Goçš„åŠ¨æ€ç±»å‹ Goè¯­è¨€æ²¡æœ‰ç±»ï¼šæ•°æ®ï¼ˆç»“æ„ä½“æˆ–æ›´ä¸€èˆ¬çš„ç±»å‹ï¼‰å’Œæ–¹æ³•æ˜¯ä¸€ç§æ¾è€¦åˆçš„æ­£äº¤å…³ç³» Goä¸­çš„æ¥å£è·ŸJavaã€C#ç±»ä¼¼ï¼šéƒ½æ˜¯å¿…é¡»æä¾›ä¸€ä¸ªæŒ‡å®šæ–¹æ³•é›†çš„å®ç°ã€‚ä½†æ˜¯æ›´åŠ çµæ´»é€šç”¨ï¼šä»»ä½•æä¾›äº†æ¥å£æ–¹æ³•å®ç°ä»£ç çš„ç±»å‹éƒ½éšå¼åœ°å®ç°äº†è¯¥æ¥å£ã€‚ å’Œå…¶ä»–è¯­è¨€ç›¸æ¯”ï¼ŒGoæ˜¯å”¯ä¸€ç»“åˆäº†æ¥å£å€¼ï¼Œé™æ€ç±»å‹æ£€æŸ¥ï¼ˆè¯¥ç±»å‹æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£ï¼‰ï¼Œè¿è¡Œæ—¶åŠ¨æ€è½¬æ¢çš„è¯­è¨€ï¼Œå¹¶ä¸”ä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜ç±»å‹æ˜¯å¦æ»¡è¶³æŸä¸ªæ¥å£ã€‚ è¯¥ç‰¹æ€§å…è®¸æˆ‘ä»¬åœ¨ä¸æ”¹å˜å·²æœ‰ä»£ç åœ°æƒ…å†µä¸‹å®šä¹‰å’Œä½¿ç”¨æ–°æ¥å£ã€‚ ç±»ä¼¼äºPythonå’ŒRubyè¿™ç±»åŠ¨æ€è¯­è¨€ä¸­çš„åŠ¨æ€ç±»å‹duck typing è¿™æ„å‘³è¿™å¯¹è±¡å¯ä»¥æ ¹æ®æä¾›çš„æ–¹æ³•è¢«å¤„ç†ï¼Œè€Œå¿½ç•¥å®ƒä»¬çš„å®é™…ç±»å‹ï¼šå®ƒä»¬èƒ½åšä»€ä¹ˆæ¯”å®ƒä»¬æ˜¯ä»€ä¹ˆæ›´é‡è¦ã€‚ ä¾‹1 package main import \"fmt\" type IDuck interface { Quack() Walk() } type Bird struct { // ... } func main() { b := new(Bird) DuckDance(b) } func (b *Bird) Quack() { fmt.Println(\"I am quacking!\") } func (b *Bird) Walk() { fmt.Println(\"I am walking!\") } func DuckDance(duck IDuck) { for i := 1; i \u003c= 3; i++ { duck.Quack() duck.Walk() } } å¦‚æœå¯¹ cat è°ƒç”¨å‡½æ•° DuckDance()ï¼ŒGo ä¼šæç¤ºç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯ Python å’Œ Ruby ä¼šä»¥è¿è¡Œæ—¶é”™è¯¯ç»“æŸã€‚ ä¾‹2 pakcage main import \"fmt\" var ai AbsInterface var si SqrInterface var empty interface{} func main() { pp := new(Point) // ä»»æ„å¯¹è±¡åŒ…æ‹¬ppéƒ½å®ç°äº†ç©ºæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥èµ‹å€¼ç»™ç©ºæ¥å£empty empty = pp fmt.Printf(\"%T\\n\", empty) ai = empty.(AbsInterface) // ai = empty fmt.Printf(\"%T\\n\", ai) si = empty.(SqrInterface) fmt.Printf(\"%T\\n\", si) si = ai.(SqrInterface) fmt.Printf(\"%T\\n\", si) } type Point int type AbsInterface interface { Abs() float32 } type SqrInterface interface { Sqr() float32 } func (p *Point) Abs() float32 { return 10.0 } func (p *Point) Sqr() float32 { return 10.0 } ä¾‹3 package main import \"fmt\" func main() { mi := MyInt(5) var x Adder = \u0026mi x.add() // x.print() // x.print undefined (type Adder has no field or method print) x.(Printer).print() } type Printer interface { print() } type Adder interface { add() } type MyInt int func (i *MyInt) add() { fmt.Printf(\"%d\\n\", *i+1) } func (i *MyInt) print() { fmt.Printf(\"%v\\n\", *i) } x è½¬æ¢ä¸º Printerç±»å‹æ˜¯å®Œå…¨åŠ¨æ€çš„ï¼šåªè¦ x çš„åº•å±‚ç±»å‹ï¼ˆåŠ¨æ€ç±»å‹ï¼‰å®šä¹‰äº† print æ–¹æ³•è¿™ä¸ªè°ƒç”¨å°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼ˆè¯‘æ³¨ï¼šè‹¥ x çš„åº•å±‚ç±»å‹æœªå®šä¹‰ print æ–¹æ³•ï¼Œæ­¤å¤„ç±»å‹æ–­è¨€ä¼šå¯¼è‡´ panicï¼Œæœ€ä½³å®è·µåº”è¯¥ä¸º if mpi, ok := x.(myPrintInterface); ok { mpi.print() }ï¼‰ã€‚ é’ˆå¯¹ä¸Šè¿°ä»£ç çš„ä¸ªäººç†è§£ï¼šè¿™é‡Œçš„è¯ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å®ç°äº†å¾ˆå¤šå¾ˆå¤šæ¥å£ï¼Œç„¶åå°†å®ƒèµ‹å€¼ç»™ä¸€ä¸ªæ¥å£å˜é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å®ç°çš„å…¶ä»–æ¥å£ä¼šæš‚æ—¶è¢«éšè—èµ·æ¥ã€‚ Go æä¾›äº†åŠ¨æ€è¯­è¨€çš„ä¼˜ç‚¹ï¼Œå´æ²¡æœ‰å…¶ä»–åŠ¨æ€è¯­è¨€åœ¨è¿è¡Œæ—¶å¯èƒ½å‘ç”Ÿé”™è¯¯çš„ç¼ºç‚¹ã€‚å¯¹äºåŠ¨æ€è¯­è¨€éå¸¸é‡è¦çš„å•å…ƒæµ‹è¯•æ¥è¯´ï¼Œè¿™æ ·æ—¢å¯ä»¥å‡å°‘å•å…ƒæµ‹è¯•çš„éƒ¨åˆ†éœ€æ±‚ï¼Œåˆå¯ä»¥å‘æŒ¥ç›¸å½“å¤§çš„ä½œç”¨ã€‚ ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:10:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"æ¥å£çš„æå– æå–æ¥å£æ˜¯éå¸¸æœ‰ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥å‡å°‘éœ€è¦çš„ç±»å‹å’Œæ–¹æ³•æ•°é‡ï¼Œè€Œä¸”ä¸éœ€è¦åƒä¼ ç»Ÿçš„åŸºäºç±»çš„é¢å‘å¯¹è±¡è¯­è¨€é‚£æ ·ç»´æŠ¤æ•´ä¸ªçš„ç±»å±‚æ¬¡ç»“æ„ã€‚ æœ‰ç”¨çš„æ¥å£å¯ä»¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è¢«å½’çº³å‡ºæ¥ã€‚æ·»åŠ æ–°æ¥å£éå¸¸å®¹æ˜“ï¼Œå› ä¸ºå·²æœ‰çš„ç±»å‹ä¸ç”¨å˜åŠ¨ï¼ˆä»…ä»…éœ€è¦å®ç°æ–°æ¥å£çš„æ–¹æ³•ï¼‰ã€‚å·²æœ‰çš„å‡½æ•°å¯ä»¥æ‰©å±•ä¸ºä½¿ç”¨æ¥å£ç±»å‹çš„çº¦æŸæ€§å‚æ•°ï¼šé€šå¸¸åªæœ‰å‡½æ•°ç­¾åéœ€è¦æ”¹å˜ã€‚å¯¹æ¯”åŸºäºç±»çš„ OO ç±»å‹çš„è¯­è¨€åœ¨è¿™ç§æƒ…å†µä¸‹åˆ™éœ€è¦é€‚åº”æ•´ä¸ªç±»å±‚æ¬¡ç»“æ„çš„å˜åŒ–ã€‚ å› æ­¤ï¼Œå¼€å‘è€…ä¸ç”¨æå‰è®¾è®¡å‡ºæ‰€æœ‰çš„æ¥å£ï¼›æ•´ä¸ªè®¾è®¡å¯ä»¥æŒç»­æ¼”è¿›ï¼Œè€Œä¸ç”¨åºŸå¼ƒä¹‹å‰çš„å†³å®šã€‚ç±»å‹è¦å®ç°æŸä¸ªæ¥å£ï¼Œå®ƒæœ¬èº«ä¸ç”¨æ”¹å˜ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªç±»å‹ä¸Šå®ç°æ–°çš„æ–¹æ³•ã€‚ ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:11:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"æ¥å£çš„ç»§æ‰¿ ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“ å½“ä¸€ä¸ªç±»å‹åŒ…å«ï¼ˆå†…åµŒï¼‰å¦ä¸€ä¸ªç±»å‹ï¼ˆå®ç°äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼‰çš„æŒ‡é’ˆæ—¶ï¼Œè¿™ä¸ªç±»å‹å°±å¯ä»¥ä½¿ç”¨ï¼ˆå¦ä¸€ä¸ªç±»å‹ï¼‰æ‰€æœ‰çš„æ¥å£æ–¹æ³•ã€‚ ä¾‹1 type Task struct { Command string *log.Logger } è¿™ä¸ªç±»å‹çš„å·¥å‚æ–¹æ³•åƒè¿™æ ·ï¼š func NewTask(command string, logger *log.Logger) *Task { return \u0026Task{command, logger} } å½“ log.Logger å®ç°äº† Log() æ–¹æ³•åï¼ŒTask çš„å®ä¾‹ task å°±å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•ï¼š task.Log() ç±»å‹å¯ä»¥é€šè¿‡ç»§æ‰¿å¤šä¸ªæ¥å£æ¥æä¾›åƒ å¤šé‡ç»§æ‰¿ ä¸€æ ·çš„ç‰¹æ€§ï¼š type ReaderWriter struct { *io.Reader *io.Writer } ä¾‹2 type intferface1 interface { read() } type intferface2 interface { write() } type myStruct1 struct { *myStruct2 } type myStruct2 struct { } func (t *myStruct1) read() { fmt.Println(\"reading\") } func (t *myStruct2) write() { fmt.Println((\"writing\")) } func main() { test := new(myStruct1) test.write() test.read() } ","date":"2022-03-04","objectID":"/2022/03/go-ch19/:12:0","tags":null,"title":"Ch19 æ¥å£","uri":"/2022/03/go-ch19/"},{"categories":["golang"],"content":"ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:0:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"è‡ªå®šä¹‰ç±»å‹ Goè¯­è¨€çš„å…³é”®å­—typeå¯ä»¥å°†å„ç§åŸºæœ¬ç±»å‹å®šä¹‰ä¸ºè‡ªå®šä¹‰ç±»å‹ï¼Œè€Œä¸”æ¯ç§è‡ªå®šä¹‰ç±»å‹å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚ ä¾‹å¦‚, package main import \"fmt\" type MyInt int32 func (m MyInt) Add(x MyInt) MyInt { return m + x } func main() { var x MyInt = 2 var y MyInt = 3 fmt.Println(x.Add(y)) } type ç±»å‹å struct{} å¯ä»¥ç†è§£ä¸ºï¼Œå°†struct{}ç»“æ„ä½“å®šä¹‰ä¸ºç±»å‹åçš„ç±»å‹ã€‚ç»“æ„ä½“æ˜¯ä¸€ç§å¤åˆçš„åŸºæœ¬ç±»å‹ï¼Œé€šè¿‡typeå®šä¹‰ä¸ºè‡ªå®šä¹‰ç±»å‹åï¼Œä½¿ç»“æ„ä½“æ›´ä¾¿äºä½¿ç”¨ã€‚ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:1:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“å®šä¹‰ type identifier struct { field1 type1 field2 type2 ... } ç»“æ„ä½“æ˜¯å¤åˆç±»å‹ã€å€¼ç±»å‹ type T struct { a, b int}ä¹Ÿåˆæ³• å¦‚æœå­—æ®µåœ¨ä»£ç ä¸­ä»æ¥ä¹Ÿä¸ä¼šç”¨åˆ°ï¼Œå¯ä»¥å‘½åä¸º_ ç»“æ„ä½“çš„å­—æ®µå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œç”šè‡³æ˜¯ç»“æ„ä½“æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°æˆ–æ¥å£ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:2:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"å®ä¾‹åŒ–ã€åˆå§‹åŒ– Pointç»“æ„ä½“å®šä¹‰ä¸º type Point struct { X, Y int } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:3:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"åŸºæœ¬å½¢å¼ å…ˆå£°æ˜ï¼Œååˆå§‹åŒ– var p Point p.X, p.Y = 10, 20 å®ä¾‹åŒ–æ—¶ï¼Œä½¿ç”¨ç»“æ„ä½“å­—é¢é‡è¿›è¡Œåˆå§‹åŒ– p1 := Point{X:20, Y:15} p2 := \u0026Point{X:10, Y:20} å…¶ä¸­ï¼Œ \u0026Point{10, 20}æ˜¯ä¸€ç§ç®€å†™ï¼Œåº•å±‚ä»ç„¶ä¼šè°ƒç”¨new() è‹¥ä¸æŒ‡å®šå˜é‡ï¼Œåˆ™å¿…é¡»ä¸å®šä¹‰é¡ºåºä¸€è‡´ type Interval struct { start int end int } intr := Interval{0, 3} (A) intr := Interval{end:5, start:1} (B) intr := Interval{end:5} (C) ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:3:1","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"newå‡½æ•° point := new(Point) point.X, point.Y = 10, 20 è¿™é‡Œï¼Œä½¿ç”¨newè·å¾—çš„å˜é‡å…¶å®æ˜¯*Pointç±»å‹ï¼Œä½†ç”±äºGoæä¾›çš„è¯­æ³•ç³–ï¼Œä½¿å¾—å¼€å‘è€…è®¿é—®ç»“æ„ä½“æŒ‡é’ˆçš„æˆå‘˜å˜é‡æ—¶æ›´åŠ æ–¹ä¾¿ã€‚è¯¥è¯­æ³•ç³–è‡ªåŠ¨åœ°å°†point.Xè½¬æ¢ä¸º(*point).X æ— è®ºæ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹è¿˜æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹æŒ‡é’ˆï¼Œéƒ½å¯ä»¥ä½¿ç”¨name.fieldNameæ¥å¼•ç”¨ç»“æ„ä½“å­—æ®µ type myStruct struct { i int } var v myStruct // væ˜¯ç»“æ„ä½“ç±»å‹å˜é‡ var p *myStruct // pæ˜¯æŒ‡å‘ä¸€ä¸ªç»“æ„ä½“ç±»å‹å˜é‡çš„æŒ‡é’ˆ v.i p.i ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:3:2","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“å†…å­˜å¸ƒå±€ Go è¯­è¨€ä¸­ï¼Œç»“æ„ä½“å’Œå®ƒæ‰€åŒ…å«çš„æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯ä»¥è¿ç»­å—çš„å½¢å¼å­˜åœ¨çš„ï¼Œå³ä½¿ç»“æ„ä½“ä¸­åµŒå¥—æœ‰å…¶ä»–çš„ç»“æ„ä½“ï¼Œè¿™åœ¨æ€§èƒ½ä¸Šå¸¦æ¥äº†å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚ä¸‹é¢çš„ä¾‹å­æ¸…æ™°åœ°è¯´æ˜äº†è¿™äº›æƒ…å†µï¼š type Rect1 struct {Min, Max Point} tyep Rect2 struct {Min, Max *Point} Goå†…å­˜åˆ†é… ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:4:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“å·¥å‚ Goè¯­è¨€ä¸æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„æ„é€ æ–¹æ³•ï¼Œä½†æ˜¯åœ¨Goä¸­å¯ä»¥ä¸ºç±»å‹å®šä¹‰ä¸€ä¸ªå·¥å‚ï¼ŒæŒ‰æƒ¯ä¾‹ï¼Œä»¥newæˆ–Newå¼€å¤´ï¼Œå‡è®¾å®šä¹‰äº†å¦‚ä¸‹Fileç»“æ„ä½“ç±»å‹ type Cat struct { Color string Name string } ä¸‹é¢æ˜¯è¯¥ç»“æ„ä½“ç±»å‹å¯¹åº”çš„å·¥å‚æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“å®ä¾‹çš„æŒ‡é’ˆ func NewCat(color, name string) *Cat { return \u0026Cat{color, name} } è°ƒç”¨æ–¹æ³• cat := NewCat(\"yellow\", \"mimi\") ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:5:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"æ–¹æ³• æ–¹æ³•çš„å£°æ˜å’Œå‡½æ•°ç±»ä¼¼ï¼Œæ–¹æ³•æ˜¯ä¸€ç§ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°ã€‚è¿™ç§ç‰¹å®šç±»å‹å˜é‡å«åšæ¥æ”¶å™¨ï¼ˆReceiver)ã€‚ æ¥æ”¶å™¨çš„æ¦‚å¿µç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„thisæˆ–self åœ¨Goè¯­è¨€ä¸­ï¼Œæ¥æ”¶å™¨çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥æ‹¥æœ‰æ–¹æ³•ã€‚ æ³¨ï¼šä¸èƒ½æ˜¯åŸºç¡€ç±»å‹ï¼Œä¹Ÿä¸èƒ½æ˜¯æ¥å£ã€‚åŸºç¡€ç±»å‹å¯ä»¥é€šè¿‡typeè‡ªå®šä¹‰ç±»å‹ä¹‹åä½¿ç”¨ã€‚ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:6:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"æ·»åŠ æ–¹æ³• æ ¼å¼å¦‚ä¸‹ï¼š func (æ¥æ”¶å™¨å˜é‡ æ¥æ”¶å™¨ç±»å‹) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°) { å‡½æ•°ä½“ } æ¥å—å™¨å˜é‡ï¼šå‘½åæ—¶ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨æ¥æ”¶å™¨ç±»å‹åçš„ç¬¬ä¸€ä¸ªå°å†™å­—æ¯ æ¥æ”¶å™¨ç±»å‹ï¼šå¯ä»¥æ˜¯æŒ‡é’ˆç±»å‹å’ŒéæŒ‡é’ˆç±»å‹ æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å‚æ•°ï¼šåŒå‡½æ•° type person struct { name string } func (p person) String() string { return \"the person name is\" + p.name } ç°åœ¨ï¼Œç±»å‹personæœ‰äº†ä¸€ä¸ªStringæ–¹æ³•ï¼Œå¯é€šè¿‡å¦‚ä¸‹æ–¹å¼è¿›è¡Œè°ƒç”¨ func main(){ p := person{name:\"å¼ ä¸‰\"} fmt.Println(p.String()) } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:6:1","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"æ¥æ”¶å™¨ æ¥æ”¶å™¨å¯ä»¥æ˜¯ï¼ˆå‡ ä¹ï¼‰ä»»ä½•ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ç±»å‹ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥æœ‰æ–¹æ³•ï¼Œç”šè‡³æ˜¯å‡½æ•°ç±»å‹ï¼Œå¯ä»¥æ˜¯intã€boolã€stringæˆ–æ•°ç»„çš„åˆ«åç±»å‹ï¼Œä½†ä¸èƒ½æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ åœ¨Goä¸­ï¼Œç±»å‹çš„ä»£ç å’Œç»‘å®šåœ¨å®ƒä¸Šé¢çš„æ–¹æ³•çš„ä»£ç å¯ä»¥ä¸æ”¾ç½®åœ¨ä¸€èµ·ï¼Œå¯ä»¥å­˜æ”¾åœ¨ä¸åŒçš„æºæ–‡ä»¶ä¸­ï¼Œä½†å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½å¤Ÿç»™åˆ«çš„åŒ…ä¸­å®šä¹‰çš„ç±»å‹è¿½åŠ æ–¹æ³•ï¼Œæ‰€ä»¥æ— æ³•ä¸ºintè¿½åŠ æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä¸ºinté‡æ–°å‘½ååï¼Œè¿½åŠ æ–¹æ³•ã€‚ åˆ«åç±»å‹æ²¡æœ‰åŸå§‹ç±»å‹ä¸Šå·²ç»å®šä¹‰çš„æ–¹æ³• package main import \"fmt\" type MyInt int func (m MyInt) IsZero() bool { return m == 0 } func (m MyInt) Add(other MyInt) MyInt { return other + m } func main() { var a MyInt = 3 fmt.Println(a.IsZero()) fmt.Println(a.Add(MyInt(2))) } ç±»å‹T(æˆ–*T)ä¸Šçš„æ‰€æœ‰æ–¹æ³•çš„é›†åˆå«å®ƒçš„æ–¹æ³•é›†(method set) æ–¹æ³•æ˜¯å‡½æ•°ï¼Œä¸å…è®¸æ–¹æ³•é‡è½½ã€‚ä½†å…·æœ‰åŒæ ·åå­—çš„æ–¹æ³•å¯ä»¥åœ¨2ä¸ªæˆ–ä»¥ä¸Šæ¥æ”¶è€…ç±»å‹ä¸Šå­˜åœ¨ã€‚ func (a *denseMatrix) Add(b Martix) Matrix func (a *denseMatrix) Add(b, c Matrix) Matrix //ä¸å…è®¸ func (a *sparseMatrix) Add(b Matrix) Matrix //å…è®¸ æŒ‡é’ˆç±»å‹ä¸éæŒ‡é’ˆç±»å‹æ¥æ”¶å™¨ åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å€¼ä¼ é€’ï¼Œåªä¸è¿‡ä¸€ä¸ªè¿™ä¸ªå€¼å‰¯æœ¬ï¼Œä¸€ä¸ªæ˜¯æŒ‡å‘è¿™ä¸ªå€¼æŒ‡é’ˆçš„å‰¯æœ¬ã€‚æŒ‡é’ˆå…·æœ‰æŒ‡å‘åŸæœ‰å€¼çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ä¿®æ”¹äº†æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼Œä¹Ÿå°±ä¿®æ”¹äº†åŸæœ‰çš„å€¼ã€‚ package main import \"fmt\" type person struct { name string } func main() { p := person{name:\"Tom\"} //p := person{name:\"Tom\"} p.modify() p.output() } func (p person) output() { fmt.Println(\"the person name is \" + p.name) } func (p *person) modify() { p.name = \"Tony\" } è‡ªåŠ¨å–æŒ‡é’ˆä¸è‡ªåŠ¨è§£å¼•ç”¨ åœ¨æœ¬èŠ‚æ›¾æåˆ°ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™é‡Œstu.nameå…¶å®åº”å†™ä¸º(*stu).nameï¼Œè®°ä¸ºè‡ªåŠ¨è§£å¼•ç”¨ï¼Œä¸‹é¢ä»‹ç»è‡ªåŠ¨å–æŒ‡é’ˆã€‚ package main type student { name string age int } func main() { stu := new(student) stu.name = \"Lily\" stu.age = 20 } åœ¨æŒ‡é’ˆç±»å‹ä¸éæŒ‡é’ˆç±»å‹æ¥æ”¶å™¨ä¸­çš„ä¾‹å­ä¸­ï¼Œåœ¨è°ƒç”¨æ¥æ”¶å™¨ä¸ºæŒ‡é’ˆç±»å‹çš„æ–¹æ³•æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œå…¶æ ‡å‡†å†™æ³•ä¸ºï¼Œ (\u0026p).modify() å¦‚æœæ²¡æœ‰å¼ºåˆ¶ä½¿ç”¨æŒ‡é’ˆè¿›è¡Œè°ƒç”¨ï¼ŒGoç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å–æŒ‡é’ˆï¼Œè¿™æ˜¯Goæ”¯æŒçš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚ åŒæ ·çš„ï¼Œå¦‚æœæ˜¯éæŒ‡é’ˆç±»å‹æ¥æ”¶å™¨ï¼Œä½¿ç”¨æŒ‡é’ˆç±»å‹è°ƒç”¨ï¼ŒGoç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è§£å¼•ç”¨ã€‚ (*p).String() åŒºåˆ« å½“éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ä¸­çš„å€¼æ—¶æˆ–æ¥æ”¶è€…æ‹·è´ä»£ä»·æ¯”è¾ƒå¤§æ—¶ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:6:2","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"æ–¹æ³•å’Œå‡½æ•°çš„ç»Ÿä¸€è°ƒç”¨ æ— è®ºæ—¶æ™®é€šå‡½æ•°è¿˜æ˜¯ç»“æ„ä½“çš„æ–¹æ³•ï¼Œåªè¦ç­¾åä¸€è‡´ï¼Œå°±éƒ½å¯ä»¥è¢«èµ‹å€¼äºåŒä¸€ç­¾åçš„å‡½æ•°å˜é‡ã€‚ package main import \"fmt\" type class struct{ } func (c *class) Do(v int) { fmt.Printf(\"call method do: %d\\n\", v) } func funcDo(v int) { fmt.Printf(\"call function do: %d\\n\", v) } func execute(v int, entry func(int)) { entry(v) } func main() { c := new(class) execute(100, c.Do) execute(100, funcDo) } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:6:3","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"æ–¹æ³•ä¸æœªå¯¼å‡ºå­—æ®µ firstNameå’ŒlastNameè¢«è®¾ç½®ä¸ºæœªå¯¼å‡ºå­—æ®µï¼Œåœ¨åŒ…å¤–æ— æ³•è®¿é—®ï¼Œå¯é€šè¿‡å¯¼å‡ºçš„æ–¹æ³•å¯¹å…¶è¿›è¡Œä¿®æ”¹ä¸è®¿é—®ã€‚ package person type Person struct { firstName string lastName string } func (p *Person) FirstName() string { return p.firstName } func (p *Person) SetFirstName(newName string) { p.firstName = newName } package main import ( \"./person\" \"fmt\" ) func main() { p := new(person.Person) // p.firstName undefined // (cannot refer to unexported field or method firstName) // p.firstName = \"Eric\" p.SetFirstName(\"Eric\") fmt.Println(p.FirstName()) // Output: Eric } å¯¹è±¡çš„å­—æ®µï¼ˆå±æ€§ï¼‰ä¸åº”è¯¥ç”±2ä¸ªæˆ–2ä¸ªä»¥ä¸Šçš„ä¸åŒçº¿ç¨‹åœ¨åŒä¸€æ—¶é—´å»æ”¹å˜ã€‚å¦‚æœåœ¨ç¨‹åºä¸­å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¸ºäº†å®‰å…¨å¹¶å‘è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨åŒ…syncæˆ–è€…ä½¿ç”¨goroutineså’Œchannels ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:6:4","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç±»å‹å†…åµŒå’Œç»“æ„ä½“å†…åµŒ ç»“æ„ä½“å…è®¸å…¶æˆå‘˜å­—æ®µåœ¨å£°æ˜æ—¶æ²¡æœ‰å­—æ®µåè€Œåªæœ‰ç±»å‹ï¼Œè¿™ç§å½¢å¼çš„å­—æ®µè¢«ç§°ä¸ºç±»å‹å†…åµŒæˆ–åŒ¿åå­—æ®µã€‚ æ²¡æœ‰å­—æ®µåçš„å˜é‡ï¼Œåœ¨åˆå§‹åŒ–å’Œè°ƒç”¨æ—¶ç›´æ¥ä½¿ç”¨ç±»å‹ï¼Œå› æ­¤åŒç§ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ªã€‚ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç±»å‹å†…åµŒ package main import \"fmt\" type student struct{ name string string int } func main(){ var stu1 student = student { name:\"haojie\", string:\"test\", int:6, } fmt.Println(stu1.string) } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:1","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“å†…åµŒ æ™®é€šçš„ç»“æ„ä½“åµŒå¥—å¦‚ä¸‹ï¼Œ type address struct{ province string city string } type student struct{ name string add address } func main(){ stu1 := student{ name:\"haojie\", add:address{ province:\"æ²³åŒ—\", city:\"xiongan\", } } } ä½†ï¼Œç»“æ„ä½“ä¸­çš„åŒ¿åå­—æ®µå¯ä»¥æ˜¯ç»“æ„ä½“ï¼Œæ­¤æ—¶å¯ä»¥ç›´æ¥è®¿é—®åŒ¿åç»“æ„ä½“ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼Œè¿™ç§æ–¹å¼è¢«æˆä¸ºç»“æ„ä½“å†…åµŒ package main import \"fmt\" type address struct { province string city string } type people struct { name string address } func main() { // å†…åµŒç»“æ„ä½“çš„åˆå§‹åŒ–æ–¹å¼ p1 := people{ name: \"chao\", address: address{ \"zhejiang\", \"jiaxing\", }, } // è¿™æ ·ä¸è¡Œ // p2 := people { // name : \"hui\", // province : \"henan\", // city : \"luohe\", // } fmt.Println(p1.province) //fmt.Println(p2.province) } åœ¨peopleä¸­æ²¡æœ‰æ‰¾åˆ°provinceå˜é‡ï¼Œä¾¿å»åŒ¿åç»“æ„ä½“ä¸­å¯»æ‰¾ï¼Œä½†å¦‚æœä¸¤ä¸ªåŒ¿åç»“æ„ä½“ä¸­éƒ½å«æœ‰ç›¸åŒå˜é‡ï¼Œåˆ™ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«ä¼šæŠ¥é”™ã€‚ æ— è®ºç»“æ„ä½“æœ‰å¤šå°‘å±‚åµŒå…¥ç»“æ„ä½“ï¼Œç»“æ„ä½“å®ä¾‹è®¿é—®ä»»æ„ä¸€çº§çš„åµŒå…¥ç»“æ„ä½“æˆå‘˜æ—¶éƒ½åªç”¨ç»™å‡ºå­—æ®µåã€‚ å†…åµŒç»“æ„ä½“å­—æ®µä»ç„¶å¯ä»¥ä½¿ç”¨è¯¦ç»†çš„å­—æ®µè¿›è¡Œä¸€å±‚å±‚è®¿é—®ï¼Œå†…åµŒç»“æ„ä½“çš„å­—æ®µåå°±æ˜¯å®ƒçš„ç±»å‹åã€‚ package main import \"fmt\" type contract struct { phone string wechat string qq string } type address struct { province string city string } type people struct { age int name string contract } type student struct { id int address people } func main() { stu := student { id : 1, address : address { province : \"zhejiang\", city : \"jiaxing\", }, people : people { age : 23, name : \"chao\", contract : contract { phone : \"159xxxx6132\", wechat : \"mcgt80611\", qq : \"864654710\", }, }, } fmt.Println(stu.qq) fmt.Println(stu.address.province) fmt.Println(stu.people.contract.phone) } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:2","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“å†…åµŒæ¨¡æ‹Ÿâ€œç»§æ‰¿â€ å½“ä¸€ä¸ªåŒ¿åç±»å‹è¢«å†…åµŒåœ¨ç»“æ„ä½“ä¸­æ—¶ï¼ŒåŒ¿åç±»å‹çš„å¯è§æ–¹æ³•ä¹ŸåŒæ ·è¢«å†…åµŒï¼Œè¿™åœ¨æ•ˆæœä¸Šç­‰åŒäºå¤–å±‚ç±»å‹ç»§æ‰¿äº†è¿™äº›æ–¹æ³•ã€‚ package main import \"fmt\" type animal struct { name string } func (a animal) move() { fmt.Printf(\"%s is moving\"\\n, a.name) } type dog struct { feetNum int animal } func (d dog) bark() { fmt.Printf(\"%s is barking\\n\", d.name) } func main() { d := dog{ feetNum: 4, animal: animal{ name: \"æ—ºè´¢\", }, } d.bark() d.move() } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:3","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"å¤šé‡ç»§æ‰¿ å¤šé‡ç»§æ‰¿æŒ‡çš„æ˜¯ç±»å‹è·å¾—å¤šä¸ªçˆ¶ç±»å‹è¡Œä¸ºçš„èƒ½åŠ›ï¼Œå®ƒåœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­é€šå¸¸æ˜¯ä¸è¢«å®ç°çš„ï¼ˆC++å’ŒPythonä¾‹å¤–ï¼‰ã€‚å› ä¸ºåœ¨ç±»ç»§æ‰¿å±‚æ¬¡ä¸­ï¼Œå¤šé‡ç»§æ‰¿ä¼šç»™ç¼–è¯‘å™¨å¼•å…¥é¢å¤–çš„å¤æ‚åº¦ã€‚ä½†æ˜¯åœ¨Goè¯­è¨€ä¸­ï¼Œé€šè¿‡åœ¨ç±»å‹ä¸­åµŒå…¥æ‰€æœ‰å¿…è¦çš„çˆ¶ç±»å‹ï¼Œå¯ä»¥å¾ˆç®€å•çš„å®ç°å¤šé‡ç»§æ‰¿ã€‚ ç»ƒä¹ ï¼šå‡è®¾æœ‰ä¸€ä¸ªç±»å‹CameraPhoneï¼Œé€šè¿‡å®ƒå¯ä»¥Call()ï¼Œä¹Ÿå¯ä»¥TakeAPicture()ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªæ–¹æ³•å±äºç±»å‹Phoneï¼Œç¬¬äºŒä¸ªæ–¹æ³•å±äºç±»å‹Cameraï¼Œè¯·ç¼–å†™ç›¸å…³ä»£ç ã€‚ package main import \"fmt\" type Phone struct { cpuKind string memorySize int } type Camera struct { foucs int depth float64 } type SmartPhone struct { prize float64 Phone Camera } func main() { sp := SmartPhone{3999.0, Phone{\"qilin\", 1024}, Camera{6, 123.7}} fmt.Println(sp) sp.Call() sp.TakeAPicture() } func (p *Phone) Call() { fmt.Println(\"calling\") } func (c *Camera) TakeAPicture() { fmt.Println(\"taking\") } å…³äºåˆ©ç”¨ç»“æ„ä½“ä¸é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ç›¸å…³é—®é¢˜ï¼Œå°†åœ¨åç»­å†ç³»ç»Ÿåœ°ä»‹ç»ã€‚ Goé¢å‘å¯¹è±¡ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:4","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"å‘½åå†²çª å½“ä¸¤ä¸ªå­—æ®µæ‹¥æœ‰ç›¸åŒçš„åå­—ï¼ˆå¯èƒ½æ˜¯ç»§æ‰¿æ¥çš„åå­—ï¼‰æ—¶è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ å¤–å±‚åå­—ä¼šè¦†ç›–å†…å±‚çš„åå­—ï¼Œä½†æ˜¯äºŒè€…çš„å†…å­˜ç©ºé—´éƒ½ä¿ç•™ï¼Œè¿™æä¾›äº†ä¸€ç§é‡è½½å­—æ®µæˆ–æ–¹æ³•çš„æ–¹å¼ å¦‚æœç›¸åŒçš„åå­—åœ¨åŒä¸€çº§åˆ«å‡ºç°äº†ä¸¤æ¬¡ï¼Œå¦‚æœè¿™ä¸ªåå­—è¢«ç¨‹åºä½¿ç”¨äº†ï¼Œå°†ä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚æ²¡æœ‰åŠæ³•æ¥è§£å†³è¿™ç§äºŒä¹‰æ€§ï¼Œå¿…é¡»ç”±ç¨‹åºå‘˜è‡ªå·±ä¿®æ­£ã€‚ è§„åˆ™ä¸€ type A struct { a int } type B struct { a float32 A } func testStruct() { var b B b.a = 5.4 fmt.Println(b) b.A.a = 12 fmt.Println(b) } //{5.4 {0}} //{5.4 {12}} è§„åˆ™äºŒ type A struct { a int } type B struct { a, b int } type C struct { s1 A s2 B } type D struct { A B } func testStruct() { var c C c.s1.a = 5 c.s2.a = 3 fmt.Println(c) var d D d.a = 4 fmt.Println(d) } //{{5} {3 0}} //.\\main.go:54:3: ambiguous selector d.a ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:7:5","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç»“æ„ä½“æ ‡ç­¾ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:8:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"JSONåºåˆ—åŒ–ä¸ååºåˆ—åŒ– json JSONæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼ŒJSONé”®å€¼å¯¹æ˜¯ç”¨æ¥ä¿å­˜JSå¯¹è±¡çš„ä¸€ç§æ–¹å¼ã€‚ // Student json type Student struct { ID int Gender string Name string } func main() { stu1 := Student{ ID: 1, Gender: \"male\", Name: \"chao\", } v, err := json.Marshal(stu1) if err != nil { fmt.Println(\"error\") } else { fmt.Println(v) fmt.Println(string(v)) fmt.Printf(\"%#v\\n\", string(v)) } str := \"{\\\"ID\\\":1,\\\"Gender\\\":\\\"male\\\",\\\"Name\\\":\\\"chao\\\"}\" stu2 := new(Student) json.Unmarshal([]byte(str), stu2) fmt.Println(stu2) } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:8:1","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"JSONæ ‡ç­¾ å¦‚ä½•æŠŠåºåˆ—åŒ–ç»“æœä¸­çš„IDæ”¹æˆå°å†™çš„ï¼Ÿå¦‚æœå°†ç»“æ„ä½“ä¸­çš„å˜é‡æ”¹æˆå°å†™ï¼ŒjsonåŒ…å°†æ— æ³•è®¿é—®è¿™äº›æ•°æ®ã€‚ è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ç»“æ„ä½“Tag ç»“æ„ä½“ä¸­çš„å­—æ®µé™¤äº†æœ‰åå­—å’Œç±»å‹å¤–ï¼Œè¿˜å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„æ ‡ç­¾ï¼ˆtagï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªé™„å±äºå­—æ®µçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯æ–‡æ¡£æˆ–å…¶ä»–çš„é‡è¦æ ‡è®°ã€‚ æ ‡ç­¾çš„å†…å®¹ä¸å¯ä»¥åœ¨ä¸€èˆ¬çš„ç¼–ç¨‹ä¸­ä½¿ç”¨ï¼Œåªæœ‰åŒ… reflect èƒ½è·å–å®ƒã€‚ å°†åœ¨åå°„ä¸­æ·±å…¥çš„æ¢è®¨ reflectåŒ…ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶è‡ªçœç±»å‹ã€å±æ€§å’Œæ–¹æ³•ï¼Œæ¯”å¦‚ï¼šåœ¨ä¸€ä¸ªå˜é‡ä¸Šè°ƒç”¨ reflect.TypeOf() å¯ä»¥è·å–å˜é‡çš„æ­£ç¡®ç±»å‹ï¼Œå¦‚æœå˜é‡æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼Œå°±å¯ä»¥é€šè¿‡ Field æ¥ç´¢å¼•ç»“æ„ä½“çš„å­—æ®µï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ Tag å±æ€§ã€‚ ch24 åå°„ // Student json type Student struct { ID int `json:\"id\"` Gender string `json:\"gender\"` Name string `json:\"name\"` } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:8:2","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"å¤šä¸ªç»“æ„ä½“æ ‡ç­¾çš„å†™æ³• å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨````å­—ç¬¦ä¸²å†…ï¼Œä½¿ç”¨ç©ºæ ¼ç¬¦åˆ†éš” type Student struct { ID int `json:\"id\" gorm:\"primary_key` Gender string `json:\"gender\"` Name string `json:\"name\"` } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:8:3","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ç±»å‹çš„String()æ–¹æ³• ä½¿ç”¨String()æ–¹æ³•æ¥å®šåˆ¶ç±»å‹çš„å­—ç¬¦ä¸²å½¢å¼çš„è¾“å‡ºï¼Œå³ä¸€ç§å¯é˜…è¯»æ€§å’Œæ‰“å°æ€§çš„è¾“å‡ºã€‚ å¦‚æœç±»å‹å®šä¹‰äº†String()æ–¹æ³•ï¼Œå®ƒä¼šè¢«ç”¨åœ¨fmt.Printf()ä¸­ç”Ÿæˆé»˜è®¤çš„è¾“å‡ºï¼Œç­‰åŒäºä½¿ç”¨æ ¼å¼åŒ–æè¿°ç¬¦%väº§ç”Ÿçš„è¾“å‡ºã€‚ åœ¨fmt.Print()å’Œfmt.Println()ä¸­ä¹Ÿä¼šè‡ªåŠ¨ä½¿ç”¨String()æ–¹æ³• package main import ( \"fmt\" \"strconv\" ) type TwoInts struct { a int b int } func main() { two1 := new(TwoInts) two1.a = 12 two1.b = 10 fmt.Printf(\"two1 is: %v\\n\", two1) fmt.Println(\"two1 is:\", two1) fmt.Printf(\"two1 is: %T\\n\", two1) fmt.Printf(\"two1 is: %#v\\n\", two1) } func (tn *TwoInts) String() string { return \"(\" + strconv.Itoa(tn.a) + \"/\" + strconv.Itoa(tn.b) + \")\" } //two1 is: (12/10) //two1 is: (12/10) //two1 is: *main.TwoInts //two1 is: \u0026main.TwoInts{a:12, b:10} å½“å¹¿æ³›ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹æ—¶ï¼Œæœ€å¥½ä¸ºå®ƒå®šä¹‰ String()æ–¹æ³•ã€‚ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæ ¼å¼åŒ–æè¿°ç¬¦ %T ä¼šç»™å‡ºç±»å‹çš„å®Œå…¨è§„æ ¼ï¼Œ%#v ä¼šç»™å‡ºå®ä¾‹çš„å®Œæ•´è¾“å‡ºï¼ŒåŒ…æ‹¬å®ƒçš„å­—æ®µï¼ˆåœ¨ç¨‹åºè‡ªåŠ¨ç”Ÿæˆ Go ä»£ç æ—¶ä¹Ÿå¾ˆæœ‰ç”¨ï¼‰ã€‚ ä¾‹å¦‚ï¼šå®ç°æ ˆï¼ˆstackï¼‰æ•°æ®ç»“æ„ package main import \"fmt\" import \"strconv\" const LIMIT = 20 type stackArr struct { arr [LIMIT]int top int } func newStackArr() *stackArr { return \u0026stackArr{arr: [LIMIT]int{}, top: -1} } type Stack struct { *stackArr } func NewStack() *Stack { return \u0026Stack{newStackArr()} } func (s *Stack) Pop() int { res := -1 if !s.Empty() { res = s.arr[s.top] s.arr[s.top] = 0 s.top-- } else { fmt.Println(\"error, the stack is empty\") } return res } func (s *Stack) Push(num int) { if !s.Full() { s.top++ s.arr[s.top] = num } else { fmt.Println(\"error, the stack is full\") } } func (s *Stack) Empty() bool { return s.top == -1 } func (s *Stack) Top() int { if !s.Empty() { return s.arr[s.top] } fmt.Println(\"error, the stack is empty, no top value\") return -1 } func (s *Stack) Full() bool { return s.top == LIMIT-1 } func (s *Stack) String() string { str := \"{\" for i, num := range s.arr { str += \"[\" + strconv.Itoa(i) + \":\" + strconv.Itoa(num) + \"]\" } str += \"}\" return str } func main() { s := NewStack() s.Push(5) s.Push(4) s.Push(68) fmt.Println(s) s.Pop() fmt.Println(s) s.Pop() s.Pop() s.Pop() s.Top() } ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:9:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"åƒåœ¾å›æ”¶å’ŒSetFinalizer Goå¼€å‘è€…ä¸éœ€è¦å†™ä»£ç æ¥é‡Šæ”¾ç¨‹åºä¸­ä¸å†ä½¿ç”¨çš„å˜é‡å’Œç»“æ„å ç”¨çš„å†…å­˜ï¼Œåœ¨Goè¿è¡Œæ—¶æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå³åƒåœ¾æ”¶é›†å™¨ï¼ˆGCï¼‰ä¼šå¤„ç†è¿™äº›äº‹æƒ…ã€‚ ch33 åƒåœ¾å›æ”¶ä¸å˜é‡é€ƒé€¸åˆ†æ å¯ä»¥é€šè¿‡runtimeåŒ…è®¿é—®GCè¿›ç¨‹ runtime é€šè¿‡è°ƒç”¨runtime.GC()å‡½æ•°å¯ä»¥æ˜¾å¼çš„è§¦å‘GCï¼Œä½†è¿™åªåœ¨æŸäº›ç½•è§çš„åœºæ™¯ä¸‹æ‰æœ‰ç”¨ï¼Œæ¯”å¦‚å½“å†…å­˜èµ„æºä¸è¶³æ—¶è°ƒç”¨runtime.GC()ï¼Œå®ƒä¼šåœ¨æ­¤å‡½æ•°æ‰§è¡Œçš„ç‚¹ä¸Šç«‹å³é‡Šæ”¾ä¸€å¤§ç‰‡å†…å­˜ï¼Œæ­¤æ—¶ç¨‹åºå¯èƒ½ä¼šæœ‰çŸ­æ—¶çš„æ€§èƒ½ä¸‹é™ï¼ˆå› ä¸ºGCè¿›ç¨‹åœ¨æ‰§è¡Œï¼‰ var m runtime.MemStats runtime.ReadMemStats(\u0026m) fmt.Printf(\"%d Kb\\n\", m.Alloc / 1024) ä¸Šè¿°ç¨‹åºä¼šç»™å‡ºå·²åˆ†é…å†…å­˜çš„æ€»é‡ï¼Œå•ä½æ˜¯Kb å¦‚æœéœ€è¦åœ¨ä¸€ä¸ªå¯¹è±¡objè¢«ä»å†…å­˜ç§»é™¤å‰æ‰§è¡Œä¸€äº›ç‰¹æ®Šæ“ä½œï¼Œæ¯”å¦‚å†™åˆ°æ—¥å¿—æ–‡ä»¶é‡Œï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è°ƒç”¨å‡½æ•°æ¥å®ç° runtime.SetFinalizer(obj, func(obj *typeObj)) func(obj *typeObj) éœ€è¦ä¸€ä¸ª typeObj ç±»å‹çš„æŒ‡é’ˆå‚æ•° objï¼Œç‰¹æ®Šæ“ä½œä¼šåœ¨å®ƒä¸Šé¢æ‰§è¡Œã€‚func ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ åœ¨å¯¹è±¡è¢« GC è¿›ç¨‹é€‰ä¸­å¹¶ä»å†…å­˜ä¸­ç§»é™¤ä»¥å‰ï¼ŒSetFinalizer éƒ½ä¸ä¼šæ‰§è¡Œï¼Œå³ä½¿ç¨‹åºæ­£å¸¸ç»“æŸæˆ–è€…å‘ç”Ÿé”™è¯¯ã€‚ https://studygolang.com/pkgdoc ç»ˆæ­¢å™¨ä¼šåœ¨objå˜ä¸ºä¸å¯æ¥è§¦ä¹‹åçš„ä»»æ„æ—¶é—´è¢«è°ƒåº¦æ‰§è¡Œã€‚ä¸ä¿è¯ç»ˆæ­¢å™¨ä¼šåœ¨ç¨‹åºé€€å‡ºå‰æ‰§è¡Œï¼Œå› æ­¤ä¸€èˆ¬ç»ˆæ­¢å™¨åªç”¨äºåœ¨é•¿æœŸè¿è¡Œçš„ç¨‹åºä¸­é‡Šæ”¾å…³è”åˆ°æŸå¯¹è±¡çš„éå†…å­˜èµ„æºã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªç¨‹åºä¸¢å¼ƒä¸€ä¸ªos.Fileå¯¹è±¡æ—¶æ²¡æœ‰è°ƒç”¨å…¶Closeæ–¹æ³•ï¼Œè¯¥os.Fileå¯¹è±¡å¯ä»¥ä½¿ç”¨ç»ˆæ­¢å™¨å»å…³é—­å¯¹åº”çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶æè¿°ç¬¦ã€‚ä½†ä¾é ç»ˆæ­¢å™¨å»åˆ·æ–°å†…å­˜ä¸­çš„I/Oç¼“å†²å¦‚bufio.Writeræ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºç¼“å†²ä¸ä¼šåœ¨ç¨‹åºé€€å‡ºæ—¶è¢«åˆ·æ–°ã€‚ ","date":"2022-02-20","objectID":"/2022/02/go-ch18/:10:0","tags":null,"title":"Ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“","uri":"/2022/02/go-ch18/"},{"categories":["golang"],"content":"ch17 error,panicä¸recover ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:0:0","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"è¿è¡Œæ—¶é”™è¯¯ Goè¯­è¨€çš„é”™è¯¯å¤„ç†æ€æƒ³åŠè®¾è®¡åŒ…å«ä»¥ä¸‹ç‰¹å¾ ä¸€ä¸ªå¯èƒ½é€ æˆé”™è¯¯çš„å‡½æ•°ï¼Œéœ€è¦è¿”å›å€¼ä¸­è¿”å›ä¸€ä¸ªé”™è¯¯æ¥å£ï¼ˆerrorï¼‰ã€‚å¦‚æœè°ƒç”¨æ˜¯æˆåŠŸçš„ï¼Œé”™è¯¯æ¥å£å°†è¿”å›nilï¼Œå¦åˆ™è¿”å›é”™è¯¯ã€‚ åœ¨å‡½æ•°è°ƒç”¨åéœ€è¦æ£€æŸ¥é”™è¯¯ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™è¿›è¡Œå¿…è¦çš„é”™è¯¯å¤„ç†ã€‚ Goæ²¡æœ‰ç±»ä¼¼Javaæˆ–.Netä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨deferã€recoverã€panicè¿›è¡Œæ¨¡æ‹Ÿï¼Œä½†å®˜æ–¹å¹¶ä¸æ¨èã€‚Goçš„è®¾è®¡è€…è®¤ä¸ºå…¶ä»–è¯­è¨€çš„å¼‚å¸¸æœºåˆ¶å·²è¢«è¿‡åº¦ä½¿ç”¨ï¼Œä¸Šå±‚é€»è¾‘éœ€è¦ä¸ºå‡½æ•°å‘ç”Ÿçš„é”™è¯¯ä»˜å‡ºå¤ªå¤šçš„èµ„æºã€‚Goè¯­è¨€å¸Œæœ›å¼€å‘è€…å°†é”™è¯¯å¤„ç†æ˜¯ä¸ºæ­£å¸¸å¼€å‘å¿…é¡»å®ç°çš„ç¯èŠ‚ï¼Œæ­£ç¡®åœ°å¤„ç†æ¯ä¸€ä¸ªå¯èƒ½å‘ç”Ÿé”™è¯¯çš„å‡½æ•°ï¼ŒåŒæ—¶Goè¯­è¨€ä½¿ç”¨è¿”å›å€¼è¿”å›é”™è¯¯çš„æœºåˆ¶ï¼Œä¹Ÿèƒ½å¤§å¹…é™ä½ç¼–è¯‘å™¨ã€è¿è¡Œæ—¶å¤„ç†é”™è¯¯çš„å¤æ‚åº¦ï¼Œè®©å¼€å‘è€…çœŸæ­£åœ°æŒæ¡é”™è¯¯çš„å¤„ç†ã€‚ ch34 é”™è¯¯å¤„ç†æœºåˆ¶ ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:1:0","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"erroræ¥å£ type error interface { Error() string } æ‰€æœ‰ç¬¦åˆError() stringæ ¼å¼çš„æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°é”™è¯¯æ¥å£ï¼Œè¯¥æ–¹æ³•è¿”å›é”™è¯¯çš„å…·ä½“æè¿°ã€‚ ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“ ch19 æ¥å£ ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:1:1","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"è‡ªå®šä¹‰é”™è¯¯ æ–¹æ³•ä¸€: ä½¿ç”¨errorsåŒ…è¿›è¡Œé”™è¯¯çš„å®šä¹‰ï¼Œæ ¼å¼å¦‚ä¸‹ var err = errors.New(\"this is an error\") é”™è¯¯å­—ç¬¦ä¸²ç”±äºç›¸å¯¹å›ºå®šï¼Œæ•…ä¸€èˆ¬åœ¨åŒ…ä½œç”¨åŸŸå£°æ˜ï¼Œåº”å°½é‡å‡å°‘åœ¨ä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨errors.New()è¿”å› package main import ( \"errors\" \"fmt\" ) var errDivisionByZero = errors.New(\"division by zero\") func Div(dividend, divisor float64) (float64, error) { if divisor == 0 { return math.NaN(), errDivisionByZero } return dividend/divisor, nil } func main() { res, nil := test.Div(20, 0) fmt.Println(res, nil) } æ‹“å±• errors.New()çš„åº•å±‚ä»£ç  func New(text string) error { return \u0026errorString(text) } // errorStringå®ç°äº†erroræ¥å£ func (e *errorString) Error() string { return e.s } func errorString struct { s string } æ–¹æ³•äºŒ: è‡ªå®šä¹‰ç»“æ„ä½“ï¼Œè®°å½•ä¸€äº›æ–‡ä»¶åï¼Œè¡Œæ•°ç­‰ä¿¡æ¯ï¼Œä½¿å¾—errorä¿¡æ¯æ›´åŠ ä¸°å¯Œ package main import ( \"math\" \"fmt\" \"runtime\" ) type DivError struct{ FileName string Line int } func (d *DivError) Error() string { return fmt.Sprintf(\"%s:%d division by zero\", d.FileName, d.Line) } func newDivError(filename string, line int) error { return \u0026DivError{FileName:filename, Line:line} } func Div(dividend, divisor float64) (float64, error) { if divisor == 0 { _, filename, line, _ := runtime.Caller(1) return math.NaN(), newDivError(filename, line) } return dividend/divisor, nil } func main() { res, nil := Div(20, 0) fmt.Println(res, nil) } func Caller(skip int) (pc uintptr, file string, line int, ok bool) CalleræŠ¥å‘Šå½“å‰goåç¨‹è°ƒç”¨æ ˆæ‰€æ‰§è¡Œçš„å‡½æ•°çš„æ–‡ä»¶å’Œè¡Œå·ä¿¡æ¯ã€‚å®å‚skipä¸ºä¸Šæº¯çš„æ ˆå¸§æ•°ï¼Œ0è¡¨ç¤ºCallerçš„è°ƒç”¨è€…ï¼ˆCalleræ‰€åœ¨çš„è°ƒç”¨æ ˆï¼‰ã€‚ï¼ˆç”±äºå†å²åŸå› ï¼Œskipçš„æ„æ€åœ¨Callerå’ŒCallersä¸­å¹¶ä¸ç›¸åŒã€‚ï¼‰å‡½æ•°çš„è¿”å›å€¼ä¸ºè°ƒç”¨æ ˆæ ‡è¯†ç¬¦ã€æ–‡ä»¶åã€è¯¥è°ƒç”¨åœ¨æ–‡ä»¶ä¸­çš„è¡Œå·ã€‚å¦‚æœæ— æ³•è·å¾—ä¿¡æ¯ï¼Œokä¼šè¢«è®¾ä¸ºfalseã€‚ ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:1:2","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"errorä¸ç±»å‹æ–­è¨€ ç±»å‹æ–­è¨€å°†åœ¨æ¥å£ä¸­è¯¦ç»†è¯´æ˜ï¼Œåœ¨æ­¤åªéœ€è®°ä½ var.(type) å¯ä»¥è·å–å˜é‡çš„ç±»å‹ å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªerrorï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼Œå¯ç”¨ç±»å‹æ–­è¨€åˆ¤æ–­ç±»å‹ package main import ( \"math\" \"fmt\" \"runtime\" ) type InputError struct { FileName string Line int Num float64 } func (i *InputError) Error() string { return fmt.Sprintf(\"%s:%d %.2g input error\", i.FileName, i.Line, i.Num) } func newInputError(filename string, line int, num float64) *InputError { return \u0026InputError{FileName:filename, Line:line, Num:num} } type DivError struct{ FileName string Line int } func (d *DivError) Error() string { return fmt.Sprintf(\"%s:%d division by zero\", d.FileName, d.Line) } func newDivError(filename string, line int) error { return \u0026DivError{FileName:filename, Line:line} } func Div(dividend, divisor float64) (float64, error) { if dividend \u003c 0 { _, filename, line, _ := runtime.Caller(1) return math.NaN(), newInputError(filename, line, dividend) } else if divisor \u003c 0 { _, filename, line, _ := runtime.Caller(1) return math.NaN(), newInputError(filename, line, divisor) } if divisor == 0 { _, filename, line, _ := runtime.Caller(1) return math.NaN(), newDivError(filename, line) } return dividend/divisor, nil } func main() { res, err := Div(20, 0) switch detail := err.(type) { case *InputError: fmt.Printf(\"%s:%d %.2g, input doesn't fit\\n\", detail.FileName, detail.Line, detail.Num) case *DivError: fmt.Printf(\"%s:%d division is zero\\n\", detail.FileName, detail.Line) default: fmt.Println(\"other error\") } fmt.Println(res) } https://blog.csdn.net/shida_csdn/article/details/88057989 https://stackoverflow.com/questions/23172219/cannot-type-switch-on-non-interface-value ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:1:3","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"panic Goè¯­è¨€å¯ä»¥åœ¨ç¨‹åºä¸­æ‰‹åŠ¨è§¦å‘å®•æœºï¼Œè®©ç¨‹åºå´©æºƒï¼Œä»¥ä¾¿å¼€å‘è€…åŠæ—¶å‘ç°é”™è¯¯ã€‚ panicçš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œåæ–‡æåˆ°çš„recoverä¼šæ¥æ”¶ä»panicä¸­å‘å‡ºçš„å†…å®¹ã€‚ package main func main() { panic(\"crash\") } ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:2:0","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"ä¸»åŠ¨è§¦å‘panic regexpæ˜¯Goè¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼åŒ…ï¼Œæ­£åˆ™è¡¨è¾¾å¼éœ€è¦ç¼–è¯‘åæ‰èƒ½ä½¿ç”¨ï¼Œè€Œä¸”ç¼–è¯‘å¿…é¡»æ˜¯æˆåŠŸçš„ã€‚ 1. func Compile(exptr string) (*Regexp, error) 2. func MustCompile(str string) *Regexp ç¬¬ä¸€ä¸ªå‡½æ•°é€‚ç”¨äºåœ¨ç¼–è¯‘é”™è¯¯æ—¶è·å¾—ç¼–è¯‘é”™è¯¯å¹¶è¿›è¡Œå¤„ç†ï¼ŒåŒæ—¶ç»§ç»­åç»­æ‰§è¡Œçš„ç¯å¢ƒã€‚ ç¬¬äºŒä¸ªå‡½æ•°é€‚ç”¨äºæ— éœ€å¤„ç†æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯çš„æƒ…å†µï¼Œå…¶ä»£ç ä¸º func MustCompile(str string) *Regexp { regexp, error := Complie(str) if error != nil { panic(`regexp: Compile(` + quote(str) + `): ` + error.Error()) } return regexp } æ‰‹åŠ¨å®•æœºè¿›è¡ŒæŠ¥é”™çš„æ–¹å¼ä¸æ˜¯ä¸€ç§å·æ‡’çš„æ–¹å¼ï¼Œåè€Œèƒ½è¿…é€ŸæŠ¥é”™ï¼Œç»ˆæ­¢ç¨‹åºç»§ç»­è¿è¡Œï¼Œé˜²æ­¢æ›´å¤§çš„é”™è¯¯äº§ç”Ÿã€‚ ä¸è¿‡ï¼Œå¦‚æœä»»ä½•é”™è¯¯éƒ½ç”¨å®•æœºå¤„ç†ï¼Œä¹Ÿä¸æ˜¯è‰¯å¥½çš„è®¾è®¡ï¼Œå› æ­¤åº”æ ¹æ®éœ€è¦æ¥å†³å®šæ˜¯å¦ä½¿ç”¨å½“å³è¿›è¡ŒæŠ¥é”™ã€‚ ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:2:1","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"å»¶è¿Ÿè¯­å¥ å½“panicå‘ç”Ÿæ—¶ï¼Œpanicåé¢çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯åœ¨panicå‰çš„deferè¯­å¥ä¼šåœ¨å®•æœºå‰å‘ç”Ÿä½œç”¨ã€‚ åˆ©ç”¨è¯¥ç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥åœ¨å®•æœºå‘ç”Ÿå‰è¿›è¡Œä¸€äº›å¿…è¦çš„å¤„ç†ã€‚ package main import \"fmt\" func main() { defer fmt.Println(\"test1\") defer fmt.Println(\"test2\") panic(\"crash\") } test2 test1 panic: crash goroutine 1 [running]: main.main() E:/workspace_go/main.go:8 +0xe5 ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:2:2","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"recover æ— è®ºæ˜¯ç”±runtimeå±‚æŠ›å‡ºçš„panicï¼Œè¿˜æ˜¯åœ¨ä»£ç ä¸­ä¸»åŠ¨è§¦å‘çš„panicï¼Œéƒ½å¯ä»¥é…åˆdeferå’Œrecoverå®ç°é”™è¯¯çš„æ•æ‰å’Œæ¢å¤ï¼Œè®©ä»£ç åœ¨å‘ç”Ÿå´©æºƒåå…è®¸ç»§ç»­è¿è¡Œã€‚ package main import ( \"fmt\" ) func main() { fmt.Println(\"Start.....\") defer func() { err := recover() if err != nil { fmt.Println(\"recover\") } }() panic(\"crash\") // unreachable code fmt.Println(\"End.....\") } å½“panicè§¦å‘å´©æºƒæ—¶ï¼Œmainå‡½æ•°å°†ç»“æŸè¿è¡Œï¼Œæ­¤æ—¶deferåçš„é—­åŒ…å°†ä¼šå‘ç”Ÿè°ƒç”¨ï¼Œè°ƒç”¨ç»“æŸåï¼Œæ•´ä¸ªç¨‹åºç»“æŸã€‚ ä¸‹é¢çš„ä»£ç å®ç°äº†ä¸€ä¸ªProtectRun()å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°æˆ–é—­åŒ…åçš„æ‰§è¡Œå‡½æ•°ï¼Œå½“ä¼ å…¥å‡½æ•°ä»¥ä»»ä½•å½¢å¼å‘ç”ŸPanicå´©æºƒåï¼Œå¯ä»¥å°†å´©æºƒçš„é”™è¯¯æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶å…è®¸åé¢çš„ä»£ç ç»§ç»­è¿è¡Œï¼Œä¸ä¼šé€ æˆæ•´ä¸ªè¿›ç¨‹çš„å´©æºƒã€‚ package main import ( \"fmt\" \"runtime\" ) func ProtectRun(entry func()) { defer func() { err := recover() if err != nil { switch err.(type) { case runtime.Error: fmt.Println(\"runtime error: \", err) default: fmt.Println(\"error: \", err) } } }() entry() } func main() { fmt.Println(\"Start.....\") ProtectRun(func() { fmt.Println(\"before crash\") panic(\"crash\") fmt.Println(\"after crash\") }) ProtectRun(func() { fmt.Println(\"before crash\") // runtime error var a *int *a = 1 fmt.Println(\"after crash\") }) fmt.Println(\"End.....\") } Start..... before crash error: crash before crash runtime error: runtime error: invalid memory address or nil pointer dereference End..... ","date":"2022-02-15","objectID":"/2022/02/go-ch17/:3:0","tags":null,"title":"Ch17 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/02/go-ch17/"},{"categories":["golang"],"content":"ch16 defer ","date":"2022-01-28","objectID":"/2022/01/go-ch16/:0:0","tags":null,"title":"Ch16 defer","uri":"/2022/01/go-ch16/"},{"categories":["golang"],"content":"deferçš„æ¦‚å¿µ Goè¯­è¨€ä¸­deferè¯­å¥ä¼šå°†å…¶åé¢è·Ÿéšçš„è¯­å¥è¿›è¡Œå»¶è¿Ÿå¤„ç†ï¼Œå½“æ‰§è¡Œåˆ°è¯¥æ¡è¯­å¥æ—¶ï¼Œå‡½æ•°å’Œå‚æ•°è¡¨è¾¾å¼å¾—åˆ°è®¡ç®—ï¼Œä½†ç›´åˆ°åŒ…å«è¯¥deferè¯­å¥çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œ**deferåçš„å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œï¼Œ**ä¸è®ºåŒ…å«deferè¯­å¥çš„å‡½æ•°æ˜¯é€šè¿‡returnæ­£å¸¸ç»“æŸï¼Œè¿˜æ˜¯ç”±äºpanicå¯¼è‡´çš„å¼‚å¸¸ç»“æŸã€‚ å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡Œå¤šæ¡deferè¯­å¥ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸å£°æ˜é¡ºåºç›¸åã€‚ æ³¨æ„ä¸‹è¿°ä»£ç ä¸­è¾“å‡ºçš„numçš„å€¼ï¼Œç´§è·Ÿç€deferåçš„è¯­å¥è¾“å‡ºçš„numå€¼ä¸º10ï¼Œè€Œä¸æ˜¯30 package main import \"fmt\" func main(){ defer fmt.Println(\"1\") defer fmt.Println(\"2\") defer fmt.Println(\"3\") outputNum() } func outputNum() bool { num := 10 defer fmt.Printf(\"%d with defer\\n\", num) num += 20 fmt.Printf((\"%d without defer\\n\", num) return true } // 30 without defer // 10 with defer // 3 // 2 // 1 ","date":"2022-01-28","objectID":"/2022/01/go-ch16/:1:0","tags":null,"title":"Ch16 defer","uri":"/2022/01/go-ch16/"},{"categories":["golang"],"content":"deferçš„ç”¨é€” deferè¯­å¥ç»å¸¸è¢«ç”¨äºå¤„ç†æˆå¯¹çš„æ“ä½œï¼Œå¦‚æ‰“å¼€ã€å…³é—­ã€è¿æ¥ã€æ–­å¼€è¿æ¥ã€åŠ é”ã€é‡Šæ”¾é”ã€‚é€šè¿‡deferæœºåˆ¶ï¼Œä¸è®ºå‡½æ•°é€»è¾‘å¤šå¤æ‚ï¼Œéƒ½èƒ½ä¿è¯åœ¨ä»»ä½•æ‰§è¡Œè·¯å¾„ä¸‹ï¼Œèµ„æºè¢«é‡Šæ”¾ã€‚é‡Šæ”¾èµ„æºçš„deferåº”è¯¥ç›´æ¥è·Ÿåœ¨è¯·æ±‚èµ„æºçš„è¯­å¥åã€‚ package main import \"fmt\" func main() { doDBOperations() } func connectToDB() { fmt.Println(\"ok, connected to db\") } func disconnectFromDB() { fmt.Println(\"ok, disconnected from db\") } func doDBOperations() bool { connectToDB() fmt.Println(\"Defering the database disconnect.\") defer disconnectFromDB() //function called here with defer fmt.Println(\"Doing some DB operations ...\") fmt.Println(\"Oops! some crash or network error ...\") fmt.Println(\"Returning from function here!\") return false //terminate the program // deferred function executed here just before actually returning, even if // there is a return or abnormal termination before } ä½¿ç”¨deferå¹¶å‘è§£é” åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä¼šåœ¨å‡½æ•°ä¸­å¹¶å‘ä½¿ç”¨mapï¼Œä¸ºé˜²æ­¢ç«æ€é—®é¢˜ï¼Œä½¿ç”¨sync.Mutexè¿›è¡ŒåŠ é”ï¼Œå‚è§ä¸‹é¢çš„ä»£ç  var ( valueByKey = make(map[string]int) valueByKeyGuard sync.Mutex ) func readValue(key string) int { valueByKeyGuard.Lock() v := valueByKey[key] valueByKeyGuard.UnLock() return v } mapå¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œæ‰€ä»¥ä½¿ç”¨sync.Mutexäº’æ–¥é‡ä¿æŠ¤mapçš„è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨deferå¯¹ä¸Šè¿°è¯­å¥è¿›è¡Œç®€åŒ– mapå’Œsliceå¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå…·ä½“çš„å‚è€ƒ ch25 å¹¶å‘ç¼–ç¨‹ func readValue(key string) int { valueByKeyGuard.Lock() defer valueByKeyGuard.Unlock() return valueByKey[key] } ä½¿ç”¨deferé‡Šæ”¾æ–‡ä»¶å¥æŸ„ æ–‡ä»¶çš„æ“ä½œéœ€è¦ç»è¿‡æ‰“å¼€æ–‡ä»¶ã€è·å–å’Œæ“ä½œæ–‡ä»¶èµ„æºã€å…³é—­èµ„æºå‡ ä¸ªè¿‡ç¨‹ï¼Œå¦‚æœåœ¨æ“ä½œå®Œæ¯•åä¸å…³é—­æ–‡ä»¶èµ„æºï¼Œè¿›ç¨‹å°†ä¸€ç›´æ— æ³•é‡Šæ”¾æ–‡ä»¶èµ„æºã€‚ func fileSize(filename string) int64 { f, err := os.Open(filename) if err != nil { return 0 } info, err := f.Stat() if err != nil { f.Close() return 0 } size := info.Size() f.Close() return size } ä½¿ç”¨deferç®€åŒ–åï¼Œ func fileSize(filename string) int64 { f, err := os.Open(filename) if err != nil { return 0 } defer f.Close() if info, err := f.Stat(); err == nil { return info.Size() } return 0 } ","date":"2022-01-28","objectID":"/2022/01/go-ch16/:2:0","tags":null,"title":"Ch16 defer","uri":"/2022/01/go-ch16/"},{"categories":["golang"],"content":"Defer a function call (with return value) https://yourbasic.org/golang/defer/ func foo() (result string) { defer func() { result = \"Change World\" // change value at the very last moment }() return \"Hello World\" } package main import \"fmt\" func foo() (result int) { defer func() { result = 4 }() result = 2 * 3 return 1 } func main() { res := foo() fmt.Println(res) //4 } å¸¦å‘½åè¿”å›å€¼çš„å‡½æ•°ï¼Œä½¿ç”¨ return 1è¿™ç§æ–¹å¼è¿”å›æ—¶ï¼Œå…¶å®è¿›è¡Œäº†ä¸¤æ­¥æ“ä½œï¼Œå³return 1ç­‰ä»·äº res = 1 return res æ‰€ä»¥deferè¯­å¥ï¼Œåœ¨å‡½æ•°è¿”å›ä¹‹å‰ï¼Œåˆå¯¹resè¿›è¡Œäº†ä¿®æ”¹ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç»“æœæ˜¯4 ","date":"2022-01-28","objectID":"/2022/01/go-ch16/:3:0","tags":null,"title":"Ch16 defer","uri":"/2022/01/go-ch16/"},{"categories":["golang"],"content":"ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ… ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:0:0","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"ç¬¬ä¸€ç±»å€¼ åœ¨Goè¯­è¨€ä¸­ï¼Œå‡½æ•°è¢«çœ‹ä½œç¬¬ä¸€ç±»å€¼(first-class values)ï¼šâ‘ å‡½æ•°æ‹¥æœ‰ç±»å‹ï¼Œå¯ä»¥â‘¡è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œâ‘¢ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œâ‘£ä½œä¸ºå‚æ•°è¢«è¿”å›ã€‚ ç¬¬ä¸€ç±»å€¼ï¼ˆä¸€ç­‰å…¬æ°‘ï¼‰æ¦‚å¿µå‡ºè‡ªå‡½æ•°å¼ç¼–ç¨‹ï¼Œåœ¨æ­¤ä¸åšä»‹ç» // å‡½æ•°çš„ç±»å‹ package main import \"fmt\" func main() { fmt.Printf(\"%T\\n\", addInt) fmt.Printf(\"%T\\n\", addFloat64) } func addInt(x, y int) int { return x + y } func addFloat64(x, y float64) float64 { return x + y } // func(int, int) int // func(float64, float64) float64 package main import \"fmt\" func main() { // ä½œä¸ºè¿”å›å€¼ï¼Œèµ‹å€¼ç»™å…¶ä»–å˜é‡ op1 := selector('+') op2 := selector('-') // ä½œä¸ºå‚æ•° calculator(20, 30, op1) calculator(20, 30, op2) } func add(a, b int) int { return a + b } func sub(a, b int) int { return a - b } func selector(op byte) func(int, int) int { switch op { case '+': return add case '-': return sub default: return nil } } func calculator(x, y int, f func(int, int) int) { res := f(x, y) fmt.Println(res) } ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:1:0","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"åŒ¿åå‡½æ•° åŒ¿åå‡½æ•°ä¸ä¹‹å‰æåˆ°çš„å‡½æ•°åŒºåˆ«åœ¨äºæ²¡æœ‰å‡½æ•°åï¼Œåªæœ‰å‡½æ•°ä½“ã€‚ ä¾‹å¦‚ï¼Œ func (x, y int) int { return x + y } åŒ¿åå‡½æ•°ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹çš„ä½¿ç”¨æ–¹å¼ func main() { //1.åŠ ä¸Šæ‹¬å·ï¼Œç›´æ¥è°ƒç”¨ fun () { fmt.Println(\"hi\") }() //2.èµ‹å€¼ç»™å˜é‡ã€ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼ç­‰ //2.1å‡½æ•°å­—é¢é‡å¤åˆ¶ç»™å˜é‡ //:=ä¹‹åæ˜¯ä¸€ä¸ªå¯»æ‰¾`nums`æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äº`target`çš„å‡½æ•°å­—é¢é‡ //å°†å…¶èµ‹å€¼ç»™`binarySearchFirst`ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼`binarySearchFirst`çš„ç±»å‹ã€‚ binarySearchFirst := func(nums []int, target int) int { low, high := 0, len(nums)-1 for low \u003c= high { mid := (low + high) / 2 if nums[mid] \u003e= target { high = mid - 1 } else { low = mid + 1 } } return low } } ä¸€ä¸ªè¿”å›å€¼ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°å¯ä»¥è¢«ç§°ä¹‹ä¸ºå·¥å‚å‡½æ•°ï¼Œè¿™åœ¨éœ€è¦åˆ›å»ºä¸€ç³»åˆ—ç›¸ä¼¼çš„å‡½æ•°æ—¶éå¸¸æœ‰ç”¨ã€‚ä¹¦å†™ä¸€ä¸ªå·¥å‚å‡½æ•°è€Œä¸æ˜¯é’ˆå¯¹æ¯ç§æƒ…å†µéƒ½ä¹¦å†™ä¸€ä¸ªå‡½æ•°ã€‚ æ­¤ä»£ç æ¶‰åŠäº†é—­åŒ…çš„æ¦‚å¿µï¼Œè§ä¸‹ä¸€å°èŠ‚ //2.2ä½œä¸ºè¿”å›å€¼ func MakeAddSuffix(suffix string) func(string) string { return func(name string) string { if !strings.HasSuffix(name, suffix) { return name + suffix } return name } } func main() { addBmp := MakeAddSuffix(\".bmp\") addJpeg := MakeAddSuffix(\".jpeg\") addBmp(\"file\") //file.bmp addJpeg(\"file\") //file.jpeg } //2.3ä½œä¸ºå‚æ•° package main import \"fmt\" func main() { calculate(20, 30, func(a, b int) { fmt.Println(a + b) }) } func calculate(x, y int, f func(int, int)) { f(x, y) } è§‚å¯Ÿå¯å¾—ï¼ŒåŒ¿åå‡½æ•°ä¸å‡½æ•°çš„ç”¨é€”éå¸¸ç›¸ä¼¼ï¼Œå¦‚ä½•å°†äºŒè€…è”ç³»èµ·æ¥ï¼Ÿ åœ¨ch6å¸¸é‡ä¸å˜é‡ä¸­æ›¾æåŠæœ‰åå¸¸é‡å’Œæ— åå¸¸é‡ï¼Œæ— åå¸¸é‡ä¾‹å¦‚2ï¼Œæœ‰åå¸¸é‡å³é€šè¿‡const å®šä¹‰çš„æœ‰åå¸¸é‡const num int = 2ã€‚å› æ­¤ï¼Œä½¿ç”¨å¦‚ä¸‹å½¢å¼å£°æ˜å‡½æ•°æ—¶ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„åå­—ã€‚è¿™ä¸ªè¿‡ç¨‹å°±ç±»ä¼¼äºå£°æ˜ä¸€ä¸ªæœ‰åå¸¸é‡ï¼Œä¸ºæ— åå¸¸é‡2ç»‘å®šä¸€ä¸ªåç§°ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨åç§°æ¥ä»£æŒ‡2ã€‚ è¿™é‡Œçš„æè¿°ä¸ºä¸ªäººç†è§£ï¼Œå…·ä½“è¿˜æœ‰å¾…å•†æ¦·ï¼Œå¯¹ç»“æ„ä½“ä¸­çš„æ–¹æ³•æ˜¯å¦é€‚ç”¨ï¼Ÿè¦éªŒè¯å…¶æ­£ç¡®æ€§ï¼Œéœ€è¦å»äº†è§£å‡½æ•°ä¸ç»“æ„ä½“ä¸­çš„æ–¹æ³•åº•å±‚å®ç°çš„å·®åˆ«ã€‚æœªå®Œå¾…ç»­ å¸¸é‡æœ‰æ—¶ç§°ä¸ºå­—é¢é‡ï¼ˆliteralï¼‰ï¼ŒåŸºäºäºŒè€…çš„ç›¸ä¼¼æ€§ï¼ŒåŒ¿åå‡½æ•°ä¹Ÿå¯è¢«ç§°ä¸ºå‡½æ•°å­—é¢é‡ func functionName(param1 type1, param2 type2) (type3) { ... return res } ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:2:0","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"é—­åŒ… æ‹¥æœ‰å‡½æ•°åçš„å‡½æ•°åªèƒ½åœ¨åŒ…çº§å£°æ˜ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨å£°æ˜ï¼Œä½†å¯ä»¥å¼•å…¥å‡½æ•°å­—é¢é‡ï¼ˆåŒ¿åå‡½æ•°ï¼‰æ¥è§£å†³æ­¤éœ€æ±‚ã€‚ ä¾‹å¦‚ï¼Œåœ¨å‡½æ•°ä¸­æƒ³è¦å¯¹ä¸€æ£µæ ‘è¿›è¡Œéå†ï¼Œä½†åˆä¸æƒ³åœ¨å‡½æ•°å¤–å¦å¤–å†å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°çš„æ–¹å¼ï¼Œå°†åŒ¿åå‡½æ•°èµ‹å€¼ç»™traverseï¼Œä¹‹åä¾¿å¯ä»¥å‘æ­£å¸¸è°ƒç”¨å‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨traverseå‡½æ•°ã€‚ leetcode 563 æ±‚è§£ä¸€æ£µäºŒå‰æ ‘çš„å¡åº¦ ä¸€æ£µæ ‘çš„å¡åº¦å®šä¹‰ä¸ºï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„å¡åº¦ä¹‹å’Œã€‚ æ ‘ä¸­ä¸€ä¸ªèŠ‚ç‚¹Nodeçš„å¡åº¦å®šä¹‰ä¸ºï¼ŒSum(Node.Left)ä¸Sum(Node.Right)å·®çš„ç»å¯¹å€¼ã€‚ Sumå‡½æ•°æ˜¯ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œã€‚ åœ¨å‡½æ•°å†…éƒ¨å¼•å…¥äº†åŒ¿åå‡½æ•°è¾…åŠ©è§£å†³ä¸€äº›æ¨¡å—åŒ–çš„é—®é¢˜æ—¶ï¼Œå…ä¸äº†éœ€è¦è¿›è¡Œæ•°æ®çš„äº¤äº’ï¼Œä¾‹å¦‚åœ¨ä¸Šè¿°é—®é¢˜ä¸­éœ€è¦è€ƒè™‘å¦‚ä½•è®°å½•å„ä¸ªèŠ‚ç‚¹çš„å¡åº¦ä¹‹å’Œã€‚é—®é¢˜çš„éš¾ç‚¹åœ¨äºtraverseå‡½æ•°å¦‚ä½•åœ¨é€’å½’éå†çš„è¿‡ç¨‹ä¸­ï¼Œå°†è®¡ç®—å¾—åˆ°çš„å„èŠ‚ç‚¹å¡åº¦ä¿¡æ¯ä¼ é€’ç»™FindTiltå‡½æ•°ã€‚ ä½¿ç”¨C++è§£å†³çš„æ–¹æ³•å¯ä»¥æ˜¯ï¼Œâ‘ è®¾ç½®ä¸€ä¸ªæˆå‘˜å˜é‡ï¼ˆæˆ–è€…å…¨å±€å˜é‡ï¼‰ï¼Œä»¤dfså‡½æ•°åœ¨é€’å½’éå†çš„è¿‡ç¨‹ä¸­ä¿®æ”¹anså€¼ï¼Œâ‘¡ä¿®æ”¹dfså‡½æ•°çš„å®šä¹‰ï¼Œé¢å¤–ä¼ å…¥ä¸€ä¸ªintç±»å‹çš„å¼•ç”¨ï¼Œç”¨äºè®°å½•ç»“æœã€‚ C++è§£å†³åŠæ³• // æˆå‘˜å˜é‡ class Solution { public: int ans = 0; int findTilt(TreeNode* root) { dfs(root, ans); return ans; } int dfs(TreeNode* node, \u0026int ans) { if (node == nullptr) { return 0; } int sumLeft = dfs(node-\u003eleft); int sumRight = dfs(node-\u003eright); ans += abs(sumLeft - sumRight); return sumLeft + sumRight + node-\u003eval; } }; class Solution { public: int findTilt(TreeNode* root) { int ans = 0; dfs(root, ans); return ans; } int dfs(TreeNode* node, int\u0026 ans) { if (node == nullptr) { return 0; } int sumLeft = dfs(node-\u003eleft, ans); int sumRight = dfs(node-\u003eright, ans); ans += abs(sumLeft - sumRight); return sumLeft + sumRight + node-\u003eval; } }; Goé€šè¿‡å¢åŠ è¿”å›å€¼ï¼Œæˆ–è€…ä½¿ç”¨æŒ‡é’ˆ åœ¨leetcode563v1ä¸­ä»¤éå†å‡½æ•°traverseæ¯æ¬¡éƒ½è¿”å›ä¸¤ä¸ªå€¼ï¼Œsumå’ŒlValue+rValue+root.Valåˆ†åˆ«ç”¨äºè‡ªåº•å‘ä¸Šéå†æ ‘æ—¶ï¼Œå¯¹å¡åº¦ä¸èŠ‚ç‚¹å€¼ä¹‹å’Œè¿›è¡Œç´¯è®°ã€‚ // leetcode563v1 func FindTilt(root *utils.TreeNode) int { var traverse func(root *utils.TreeNode) (int, int) traverse = func(root *utils.TreeNode) (int, int) { sum := 0 if root == nil { return 0, 0 } sumL, lValue := traverse(root.Left) sumR, rValue := traverse(root.Right) sum = abs(rValue - lValue) + sumL + sumR return sum, lValue + rValue + root.Val } res, _ := traverse(root) return res } æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ å…¥intæŒ‡é’ˆçš„æ–¹å¼è§£å†³ã€‚ // leetcode563v2 func FindTilt(root *utils.TreeNode) int { var traverse func(root *utils.TreeNode, sum *int) int sum := 0 traverse = func(root *utils.TreeNode, sum *int) int { if root == nil { return 0 } lValue := traverse(root.Left, sum) rValue := traverse(root.Right, sum) (*sum) += abs_int(rValue - lValue) return lValue + rValue + root.Val } traverse(root, \u0026sum) return sum } Goè¯­è¨€æä¾›äº†ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ç‰¹æ€§ï¼ŒåŒ¿åå‡½æ•°å¯ä»¥æ•è·å¤–éƒ¨ç¯å¢ƒä¸­çš„è‡ªç”±å˜é‡ï¼Œå¹¶ä¸”å…·æœ‰è®°å¿†æ•ˆåº”ã€‚ ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸å¤–éƒ¨ç¯å¢ƒç›¸ç»„åˆï¼Œä¾¿å½¢æˆäº†é—­åŒ…ï¼ˆClosureï¼‰ã€‚ç®€å•åœ°ï¼Œé—­åŒ…å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¼•ç”¨äº†å¤–éƒ¨å˜é‡çš„åŒ¿åå‡½æ•°ã€‚ é—­åŒ…åº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æ¦‚å¿µï¼Œåœ¨æ­¤ä¸åšè¿‡å¤šè§£é‡Š ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:3:0","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"æ•è·å¤–éƒ¨å˜é‡ å¯ä»¥æ³¨æ„åˆ°Accumulatorå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªç±»å‹ä¸ºfunc() intçš„å‡½æ•°å€¼ï¼Œ æ‰€ä»¥ä½¿ç”¨returnè¿”å›ä¸€ä¸ªç±»å‹ç¬¦åˆçš„åŒ¿åå‡½æ•°ã€‚ä½†startValueå£°æ˜çš„ä½ç½®åœ¨åŒ¿åå‡½æ•°å¤–ï¼Œè€ŒåŒ¿åå‡½æ•°ä¸­çš„é€»è¾‘å´å°è¯•å¯¹startValueè¿›è¡Œäº†ä¿®æ”¹ï¼Œ å¹¶ä¸”èƒ½å¤ŸæˆåŠŸç¼–è¯‘è¿è¡Œã€‚ package main import \"fmt\" func Accumulator() func() int { startValue := 1 fmt.Printf(\"The address of startValue is %x\\n\", \u0026startValue) return func() int { fmt.Printf(\"In annoymous function, address is %x\\n\", \u0026startValue) startValue++ return startValue } } func main() { accumulator := Accumulator() fmt.Println(accumulator()) accumulator() accumulator() accumulator() fmt.Println(accumulator()) newAccumulator := Accumulator() fmt.Println(newAccumulator()) } è¯¥ä»£ç èƒ½å¤ŸæˆåŠŸè¿è¡Œçš„åŸå› åœ¨äºåŒ¿åå‡½æ•°å¯ä»¥æ•è·äº†å¤–éƒ¨ç¯å¢ƒä¸­å˜é‡çš„ç‰¹æ€§ã€‚æ•è·ä¹‹åï¼Œä¾¿å¯ä»¥å°†å…¶è§†ä¸ºä¸€èˆ¬çš„å˜é‡è¿›è¡Œæ“ä½œä¸ä¿®æ”¹ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ä¿®æ”¹æ“ä½œå‡ä¼šååº”åœ¨å¤–éƒ¨ç¯å¢ƒä¸­ã€‚ æ¯”å¦‚ï¼ŒåŒ¿åå‡½æ•°æ•è·äº†sumå˜é‡ï¼Œç„¶åå°†åŒ¿åå‡½æ•°æœ¬èº«çš„å‡½æ•°å€¼èµ‹å€¼ç»™traverseã€‚åœ¨é€’å½’éå†çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­å¯¹sumè¿›è¡Œä¿®æ”¹ï¼Œä½†åœ¨åŒ¿åå‡½æ•°å¤–è®¿é—®sumæ—¶ï¼Œå€¼ä¸å†æ˜¯åŸæ¥çš„0ã€‚ // leetcode563v3 func FindTilt(root *utils.TreeNode) int { var traverse func(root *utils.TreeNode) int sum := 0 traverse = func(root *utils.TreeNode) int { if root == nil { return 0 } lValue := traverse(root.Left) rValue := traverse(root.Right) sum += abs(rValue - lValue) return lValue + rValue + root.Val } traverse(root) return sum } ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:3:1","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"è®°å¿†æ•ˆåº” è¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å’ŒåŒ¿åå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†è‡ªç”±å˜é‡çš„ç¯å¢ƒä¹Ÿä¸ä¼šè¢«é‡Šæ”¾æˆ–è€…åˆ é™¤ï¼Œåœ¨é—­åŒ…ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨è¿™ä¸ªè‡ªç”±å˜é‡ã€‚ è¢«æ•è·åˆ°é—­åŒ…ä¸­çš„å˜é‡è®©é—­åŒ…æœ¬èº«æ‹¥æœ‰äº†è®°å¿†æ•ˆåº”ï¼Œé—­åŒ…ä¸­çš„é€»è¾‘å¯ä»¥ä¿®æ”¹é—­åŒ…æ•è·çš„å˜é‡ï¼Œå˜é‡ä¼šè·Ÿéšé—­åŒ…ç”Ÿå‘½å‘¨æœŸä¸€ç›´å­˜åœ¨ï¼Œé—­åŒ…æœ¬èº«å°±å¦‚åŒå˜é‡ä¸€æ ·æ‹¥æœ‰äº†è®°å¿†æ•ˆåº”ã€‚ package main import \"fmt\" func generator() func() int { value := 0 return func() int { value++ fmt.Println(value) return value } } func main() { f := generator() f() f() f() f = generator() f() } //1 //2 //3 //1 è¿™é‡Œgeneratorå‡½æ•°è¿”å›çš„æ˜¯å‡½æ•°fæ•è·äº†valueå˜é‡ï¼Œå¹¶ä¸”fåœ¨mainå‡½æ•°ä¸­æ‰§è¡Œï¼Œå·²ç»ç¦»å¼€äº†åŸæ¥çš„ç¯å¢ƒï¼Œä½†æ˜¯è¿˜èƒ½æ­£å¸¸è¿è¡Œï¼Œä¸”éšç€fçš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´å­˜åœ¨ã€‚ ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:3:2","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"è®°å¿†æ•ˆåº”çš„ åº•å±‚åŸç† å˜é‡é€ƒé€¸åˆ†æ https://blog.csdn.net/weixin_42117918/article/details/90409744 ç®€è€Œè¨€ä¹‹ï¼ŒGoç¼–è¯‘å™¨æ£€æµ‹åˆ°å±€éƒ¨å˜é‡ä»æœ‰æŒ‡é’ˆæŒ‡å‘è®¿é—®ï¼ŒåŸæœ¬åº”è¯¥åˆ†é…åœ¨æ ˆå†…çš„å±€éƒ¨å˜é‡æ”¾åœ¨å †ä¸­ï¼Œè¿™ç§æƒ…å†µç§°ä¹‹ä¸ºå˜é‡é€ƒé€¸ã€‚ ch33 åƒåœ¾å›æ”¶ä¸å˜é‡é€ƒé€¸åˆ†æ go run -gcflags \"-m -l\" main.go ä½¿ç”¨ go run è¿è¡Œç¨‹åºæ—¶ï¼Œ-gcflags å‚æ•°æ˜¯ç¼–è¯‘å‚æ•°ã€‚å…¶ä¸­ -m è¡¨ç¤ºè¿›è¡Œå†…å­˜åˆ†é…åˆ†æï¼Œ-lè¡¨ç¤ºé¿å…ç¨‹åºå†…è”ï¼Œä¹Ÿå°±æ˜¯é¿å…è¿›è¡Œç¨‹åºä¼˜åŒ–ã€‚ package main import \"fmt\" func Accumulator() func() int { startValue := 1 fmt.Printf(\"The address of startValue is %x\\n\", \u0026startValue) return func() int { fmt.Printf(\"In annoymous function, address is %x\\n\", \u0026startValue) startValue++ return startValue } } func main() { accumulator := Accumulator() fmt.Println(accumulator()) accumulator() accumulator() accumulator() fmt.Println(accumulator()) newAccumulator := Accumulator() fmt.Println(newAccumulator()) } go run -gcflags \"-m -l\" main.go # command-line-arguments .\\main.go:6:2: moved to heap: startValue .\\main.go:7:12: ... argument does not escape .\\main.go:8:9: func literal escapes to heap .\\main.go:9:13: ... argument does not escape .\\main.go:17:13: ... argument does not escape .\\main.go:17:25: accumulator() escapes to heap .\\main.go:21:13: ... argument does not escape .\\main.go:21:25: accumulator() escapes to heap .\\main.go:24:13: ... argument does not escape .\\main.go:24:28: newAccumulator() escapes to heap The address of startValue is c0000aa058 In annoymous function, address is c0000aa058 2 In annoymous function, address is c0000aa058 In annoymous function, address is c0000aa058 In annoymous function, address is c0000aa058 In annoymous function, address is c0000aa058 6 The address of startValue is c0000aa088 In annoymous function, address is c0000aa088 2 ","date":"2022-01-24","objectID":"/2022/01/go-ch15/:3:3","tags":null,"title":"Ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ…","uri":"/2022/01/go-ch15/"},{"categories":["golang"],"content":"ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:0:0","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"ä½œç”¨åŸŸ åœ¨æ­£å¼å¼•å…¥åŒ¿åå‡½æ•°ä¸é—­åŒ…ä¹‹å‰ï¼Œéœ€è¦äº†è§£å˜é‡çš„ä½œç”¨åŸŸä¸ç”Ÿå‘½å‘¨æœŸä¸¤ä¸ªæ¦‚å¿µã€‚ è¿™æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µï¼Œ ä½œç”¨åŸŸï¼šæºä»£ç ä¸­å¯ä»¥æœ‰æ•ˆä½¿ç”¨è¿™ä¸ªåå­—çš„èŒƒå›´ï¼Œæ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶çš„å±æ€§ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šç¨‹åºè¿è¡Œæ—¶å˜é‡å­˜åœ¨çš„æœ‰æ•ˆæ—¶é—´æ®µï¼Œåœ¨æ­¤æ—¶é—´åŒºåŸŸå†…å®ƒå¯ä»¥è¢«ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å¼•ç”¨ï¼Œæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶çš„æ¦‚å¿µã€‚ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:1:0","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"ä½œç”¨åŸŸçº§åˆ« è¯­å¥å—å†…éƒ¨å£°æ˜çš„å˜é‡åœ¨å¤–éƒ¨æ˜¯æ— æ³•è¢«è®¿é—®çš„ï¼Œæ­¤è¯­å¥å—å³å†…éƒ¨æ‰€å£°æ˜å˜é‡çš„ä½œç”¨åŸŸã€‚ è¯­å¥å—ï¼šç”±èŠ±æ‹¬å¼§æ‰€åŒ…å«çš„ä¸€ç³»åˆ—è¯­å¥ï¼Œä¾‹å¦‚å‡½æ•°ä½“æˆ–å¾ªç¯ä½“åŒ…è£¹çš„ä¸€ç³»åˆ—è¯­å¥ã€‚ å˜é‡çš„ä½œç”¨åŸŸå¯åˆ†ä¸ºä»¥ä¸‹å››ä¸ªçº§åˆ« å…ƒä½œç”¨åŸŸï¼šåœ¨å‡½æ•°å†…éƒ¨ç”±switchã€ifã€forç­‰å¼•å…¥çš„ä½œç”¨åŸŸ åœ¨switchã€forã€ifåçš„åˆå§‹åŒ–æ¡ä»¶ä¸­å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸèŒƒå›´ä¸ºæ•´ä¸ªswitchã€ifã€forè¯­å¥å— å¯¹äºforå’Œifï¼Œæ¯ä¸ªè¯­å¥å—ï¼Œå³èŠ±æ‹¬å·åŒ…è£¹çš„éƒ¨åˆ†ï¼Œä»£è¡¨ä¸€ä¸ªæ›´å°çš„ä½œç”¨åŸŸï¼›å¯¹äºswitchï¼Œæ¯ä¸ªåˆ†æ”¯ä»£è¡¨ä¸€ä¸ªæ›´å°çš„ä½œç”¨åŸŸã€‚ å‡½æ•°ä½œç”¨åŸŸï¼šåœ¨å‡½æ•°ï¼Œå¦‚mainå‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºæ•´ä¸ªå‡½æ•°ä½“ åŒ…ä½œç”¨åŸŸï¼šä»»ä½•åœ¨å‡½æ•°å¤–å£°æ˜çš„å˜é‡å¯åœ¨åŒä¸€ä¸ªåŒ…çš„ä»»ä½•æºæ–‡ä»¶ä¸­è¿›è¡Œè®¿é—®ï¼Œå…¶ä½œç”¨åŸŸä¸ºæ•´ä¸ªåŒ…ã€‚ å…¨ä½œç”¨åŸŸï¼šç‰¹åˆ«åœ°ï¼Œå½“åœ¨å‡½æ•°å¤–å£°æ˜çš„å˜é‡é¦–å­—æ¯å¤§å†™æ—¶ï¼Œè¯¥å˜é‡å¯é€šè¿‡packageName.VarNameçš„æ–¹å¼åœ¨åŒ…å¤–è¿›è¡Œè®¿é—®ã€‚ å˜é‡æˆ–è€…å‡½æ•°ä»¥å¤§å†™å­—æ¯å¼€å¤´æ—¶ï¼Œæ­¤æ—¶ç§°è¯¥å˜é‡æˆ–å‡½æ•°æ˜¯åœ¨åŒ…å¤–å¯è§çš„æˆ–å¯å¯¼å‡ºçš„ï¼Œå³å®ƒä»¬å¯åœ¨åŒ…å¤–è¢«è®¿é—®ï¼Œå…·ä½“å†…å®¹å‚è€ƒä¸‹æ–‡ä¸­çš„åŒ…ã€‚ ä¸€ä¸ªç¨‹åºå¯èƒ½åŒ…å«å¤šä¸ªåŒåå˜é‡ï¼Œä½†åªè¦å±äºä¸åŒçš„ä½œç”¨åŸŸå°±ä¸ä¼šäº§ç”Ÿå†²çªï¼Œä¾‹å¦‚ å¾ªç¯å†…å£°æ˜ä¸€ä¸ªçš„å±€éƒ¨å˜é‡ï¼ˆå…ƒä½œç”¨åŸŸï¼‰å¯ä»¥å’ŒåŒ…çº§çš„å˜é‡ï¼ˆåŒ…ä½œç”¨åŸŸï¼‰åŒå åœ¨ä¸¤ä¸ªä¸åŒçš„å¾ªç¯å†…ï¼Œå„å£°æ˜ä¸€ä¸ªåä¸ºxçš„å˜é‡ï¼Œæ­¤æ—¶ä¹Ÿä¸ä¼šäº§ç”Ÿå†²çªï¼Œx(å¾ªç¯Aä¸­)ä¸x'(å¾ªç¯Bä¸­)åœ¨å„è‡ªçš„å…ƒä½œç”¨åŸŸå†…æœ‰æ•ˆ å¯¹äºå…¨ä½œç”¨åŸŸï¼Œå¦‚æœåœ¨åŒ…pkg1å’Œpkg2ä¸­å„æœ‰ä¸€ä¸ªåä¸ºStuNumçš„å¯å¯¼å‡ºå˜é‡ï¼ˆå…·ä½“å†…å®¹å‚è€ƒåŒ…ï¼‰ï¼Œæ­¤æ—¶ä¹Ÿä¸ä¼šå‘ç”Ÿå†²çªï¼Œå› ä¸ºåœ¨ä½¿ç”¨æ—¶å¿…é¡»åŠ ä¸ŠåŒ…åï¼Œå³pkg1.StuNumï¼Œpkg2.StuNum ç¼–è¯‘å™¨è§£æå˜é‡æ—¶ï¼Œä¼šæŸ¥æ‰¾è¯¥å˜é‡çš„å®šä¹‰ï¼Œä»å½“å‰æ‰€åœ¨çš„ä½œç”¨åŸŸå‡ºå‘ï¼Œæœ€å†…éƒ¨ä½œç”¨åŸŸä¸­çš„å£°æ˜ä¼šè¢«é¦–å…ˆæ‰¾åˆ°ï¼Œæ­¤æ—¶å°±å±è”½äº†å¤–éƒ¨ä½œç”¨åŸŸçš„åŒåå£°æ˜ã€‚ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:1:1","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"å…·ä½“å®ä¾‹ å«å¦‚æ­¤å¤šåŒåå˜é‡ï¼Œæ˜¯éå¸¸ç³Ÿç³•çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œåœ¨å¹³æ—¶åº”é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚ test1.go package test import \"fmt\" var Num int = 20 var x int = 30 func TestScope1() { fmt.Println(\"the x in main package is \", x) x := 10 fmt.Println(\"the x in function is \", x) // from now on, x refers to the x declared in the function for x := 0; x \u003c 5; x++ { // in this loop x refers to the variation declared last line fmt.Println(\"the x in loop is \", x) } fmt.Println(\"the x in function is still\", x) if x := 2*x; x \u003e 10 { // declare varation tmp just for testing wheather can input tmp in else block or not tmp := x; fmt.Println(\"the x in if block is\", x) fmt.Println(tmp, \" plus 5 is\", tmp+5) } else { fmt.Println(\"try to get the value of tmp\") // fmt.Println(tmp) // .\\main.go:26:15: undefined: tmp } } func print6X() { fmt.Println(\"use printX output x * 6 is\", x*6) } test2.go package test import \"fmt\" func TestScope2() { print6X() fmt.Println(\"output x in TestScope2, x is \", x) } main.go package main import ( \"fmt\" \"programs/test\" ) func main() { fmt.Println(\"Num in pkg test is \", test.Num) test.TestScope1() test.TestScope2() } Num in pkg test is 20 the x in main package is 30 the x in function is 10 the x in loop is 0 the x in loop is 1 the x in loop is 2 the x in loop is 3 the x in loop is 4 the x in function is still 10 the x in if block is 20 20 plus 5 is 25 use printX output x * 6 is 180 output x in TestScope2, x is 30 ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:1:2","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"åŒ…(package) Goè¯­è¨€ä¸­çš„åŒ…å’Œå…¶ä»–è¯­è¨€ä¸­çš„åº“ï¼ŒåŒ…ç­‰æ¦‚å¿µç±»ä¼¼ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†æ”¯æŒæ¨¡å—åŒ–ã€å°è£…ã€å•ç‹¬ç¼–è¯‘å’Œä»£ç é‡ç”¨ã€‚ ä¸€ä¸ªåŒ…ç”±ä½äºåŒåç›®å½•ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª.goæºä»£ç æ–‡ä»¶ç»„æˆã€‚ æ¯ä¸ªåŒ…éƒ½å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„åå­—ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œåœ¨imageåŒ…ä¸­çš„Decodeå‡½æ•°å’Œåœ¨unicode/utf16åŒ…ä¸­çš„ Decodeå‡½æ•°æ˜¯ä¸åŒçš„ã€‚è¦åœ¨å¤–éƒ¨å¼•ç”¨è¯¥å‡½æ•°ï¼Œå¿…é¡»æ˜¾å¼ä½¿ç”¨image.Decodeæˆ–utf16.Decodeå½¢å¼è®¿é—®ã€‚ åŒ…å¯ä»¥æ§åˆ¶å˜é‡æˆ–å‡½æ•°ç­‰åœ¨åŒ…å¤–æ˜¯å¦å¯è§æ¥éšè—å†…éƒ¨å®ç°ä¿¡æ¯ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:2:0","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"å¯è§æ€§ å˜é‡æˆ–è€…å‡½æ•°ä»¥å¤§å†™å­—æ¯å¼€å¤´æ—¶ï¼Œæ­¤æ—¶ç§°è¯¥å˜é‡æˆ–å‡½æ•°æ˜¯åœ¨åŒ…å¤–å¯è§çš„æˆ–å¯å¯¼å‡ºçš„ï¼Œå³å®ƒä»¬å¯åœ¨åŒ…å¤–è¢«è®¿é—®ã€‚ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:2:1","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"å¯¼å…¥åŒ… åœ¨Goè¯­è¨€ç¨‹åºä¸­ï¼Œæ¯ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å¯¼å…¥è·¯å¾„ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œå°†å¯¼å…¥è·¯å¾„çš„æœ€åä¸€ä¸ªå­—æ®µä½œä¸ºåŒ…å ä½¿ç”¨GOPATHæ¨¡å¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¾æ®$GOROOT/src/importpathä¾æ¬¡æ¥å¯»æ‰¾åŒ…ï¼Œæ­¤å¤–ï¼Œä¸å»ºè®®ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥åŒ…ã€‚ ä½¿ç”¨GoModuleæ—¶ï¼Œå‡è®¾åœ¨æ ¹ç›®å½•ä¸‹ä½¿ç”¨go mod init minidbè¿›è¡Œäº†åˆå§‹åŒ–ï¼Œåˆ™å¯¼å…¥æ­¤æ ¹ç›®å½•ä¸‹çš„åŒ…è·¯å¾„ä¸ºminidb/packageName å•è¡Œå¯¼å…¥ import \"path1/pkg1\" import \"path2/pkg2\" å¤šè¡Œå¯¼å…¥ import ( \"path1/pkg1\" \"path2/pkg2\" ) å¯¼å…¥åè‡ªå®šä¹‰å¼•ç”¨çš„åŒ…å import customName \"path/to/package\" æŒ‡å®šæ–°çš„åŒ…åï¼Œæ¥é¿å…å¯¼å…¥é‡ååŒ…ã€‚ import ( \"crypto/rand\" mrand \"math/rand\" // alternative name mrand avoids conflict ) åŒ¿åå¯¼å…¥åŒ… åªå¯¼å…¥åŒ…ï¼Œè®©å…¶æ‰§è¡Œinitå‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨ä»»ä½•åŒ…å†…çš„ç»“æ„å’Œç±»å‹ï¼Œä¹Ÿä¸è°ƒç”¨åŒ…å†…çš„ä»»ä½•å‡½æ•° import _ \"path/to/package\" ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:2:2","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"åŒ…çš„åˆå§‹åŒ– åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåœ¨è°ƒç”¨å·²ç»å°è£…å¥½çš„æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦äººä¸ºåœ°æ‰§è¡Œä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œä¾‹å¦‚åœ¨åˆå­¦æ•°æ®ç»“æ„æ—¶ï¼Œä¼šç»å¸¸é‡åˆ°StackInitï¼ŒQueueInitï¼ŒGraphInitç­‰å‡½æ•°ã€‚è¿™äº›å‡½æ•°éœ€è¦å¼€å‘è€…è‡ªå·±æ‰‹åŠ¨è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å¯èƒ½å‘ç”Ÿé—æ¼æˆ–è€…é”™è¯¯ã€‚ ç”±æ­¤ï¼Œè¿«åˆ‡åœ°å¸Œæœ›è¢«å¼•ç”¨çš„åŒ…ï¼Œèƒ½å¤Ÿè·å¾—å¯åŠ¨ä»£ç çš„é€šçŸ¥ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶åšä¸€äº›è‡ªè¡Œæ‰§è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚åŸºäºæ­¤ï¼ŒGoè¯­è¨€ä¸­è®¾ç½®äº†initå‡½æ•°æ¥å®Œæˆæ­¤é¡¹åŠŸèƒ½ã€‚ æ¯ä¸ª.goæ–‡ä»¶éƒ½å¯åŒ…å«ä¸€ä¸ªinitå‡½æ•° initå‡½æ•°ä¼šåœ¨ç¨‹åºæ‰§è¡Œå‰(mainå‡½æ•°æ‰§è¡Œå‰)è¢«è‡ªåŠ¨è°ƒç”¨ è°ƒç”¨é¡ºåºä¸åŒ…ä¸­å˜é‡çš„åˆå§‹åŒ–é¡ºåºå¦‚ä¸‹å›¾æ‰€ç¤º åŒä¸€ä¸ªåŒ…ä¸­çš„å¤šä¸ªinitå‡½æ•°è°ƒç”¨é¡ºåºä¸å¯é¢„æœŸ initå‡½æ•°ä¸èƒ½è¢«å…¶ä»–å‡½æ•°è°ƒç”¨ ","date":"2022-01-22","objectID":"/2022/01/go-ch14/:2:3","tags":null,"title":"Ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ","uri":"/2022/01/go-ch14/"},{"categories":["golang"],"content":"ch13 å‡½æ•° Goè¯­è¨€ä¸­çš„å‡½æ•°æ²¡æœ‰é»˜è®¤å‚æ•°ã€‚ Goä¸æ”¯æŒå‡½æ•°é‡è½½ç‰¹æ€§ï¼Œä¸»è¦åŸå› æ˜¯å‡½æ•°é‡è½½éœ€è¦è¿›è¡Œå¤šä½™çš„ç±»å‹åŒ¹é…å½±å“æ€§èƒ½ã€‚ Goä»1.18å¼€å§‹æ”¯æŒæ³›å‹ï¼Œå…·ä½“åœ°å‚è§ ch32 æ³›å‹ ä»å¹¿ä¹‰ä¸Šè¯´ï¼ŒGoè¯­è¨€ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯æ™®é€šçš„å¸¦æœ‰åå­—çš„å‡½æ•°ã€åŒ¿åå‡½æ•°æˆ–lambdaå‡½æ•°ã€ä¸ç»“æ„ä½“ç›¸å…³çš„æ–¹æ³•ã€‚ å¯ä»¥æŠŠæ–¹æ³•ç±»æ¯”ä¸ºC++ä¸­çš„æˆå‘˜å‡½æ•°ã€‚ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:0:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"å‘½åè§„èŒƒ è¿”å›æŸä¸ªå¯¹è±¡çš„å‡½æ•°æˆ–è€…æ–¹æ³•ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨åè¯ï¼Œä¸ç”¨Get...ã€‚å¦‚æœç”¨äºä¿®æ”¹æŸä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨SetNameã€‚ä¸€èˆ¬ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä¸ç”¨ä¸‹åˆ’çº¿åˆ†å‰²å¤šä¸ªåç§°ã€‚ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:1:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"å‡½æ•°å£°æ˜ // ä»£ç 1ã€éå‘½åè¿”å›å€¼ func functionName1(param type) type { ... return ret } // ä»£ç 2ã€å‘½åè¿”å›å€¼ func functionName2(param1, param2 type) (ret type) { ... return } // 3ã€å¤šå€¼è¿”å›ï¼Œå¯å˜å‚æ•° func functionName3(params ...type) (int, error) { ... return cnt, nil } ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:2:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"æ”¯æŒå¤šå€¼è¿”å› Goè¯­è¨€æ”¯æŒå‡½æ•°å¤šå€¼è¿”å›ï¼Œä¹Ÿå°±æ˜¯è¯´å®šä¹‰çš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œå¸¸è§çš„æœ‰è¿”å›errorç±»å‹ï¼Œä»¥ä¾›åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚ func main(){ file, err :=os.Open(\"/usr/tmp\") if err != nil{ log.Fatal(err) return } fmt.Println(file) } ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:2:1","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"å‘½åè¿”å›å€¼å’Œéå‘½åè¿”å›å€¼ åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œè‹¥æœªæ˜ç¡®è¿”å›å€¼åç§°ï¼Œåˆ™ç§°ä¹‹ä½ä¸ºæœªå‘½åè¿”å›å€¼ï¼Œå¦‚ä¸Šè¿°ä»£ç 1ï¼›ç›¸å¯¹åº”åœ°åœ¨å£°æ˜æ—¶ï¼Œæ˜ç¡®äº†è¿”å›å€¼åç§°ï¼Œåˆ™ç§°ä¹‹ä¸ºå‘½åè¿”å›å€¼ï¼Œå¦‚ä¸Šè¿°ä»£ç 2ã€‚ package main import ( \"fmt\" ) var num1 int = 10 var num2, num3 int func main() { num2, num3 = resultWithDefinedRet(num1) fmt.Println(num2, num3) num2, num3 = resultWithUndefinedRet(num1) fmt.Println(num2, num3) } func resultWithDefinedRet(num int) (x, y int) { x, y = num*2, num*3 return } func resultWithUndefinedRet(num int) (int, int) { return num*2, num*3 } å°½é‡ä½¿ç”¨å‘½åè¿”å›å€¼ï¼Œä¼šä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€çŸ­ï¼ŒåŒæ—¶æ›´åŠ å®¹æ˜“è¯»æ‡‚ ä¸¤ç§æ–¹å¼çœ‹ä¼¼ç®€å•æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å½“deferå’Œreturnç»“åˆæ—¶ï¼Œå°±ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œå…·ä½“å†…å®¹å°†åœ¨å¼•å…¥deferä»‹ç»ã€‚ ch16 defer ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:2:2","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"æ”¯æŒå¯å˜å‚æ•° å¯å˜å‚æ•°çš„å®šä¹‰ï¼Œåœ¨ç±»å‹å‰é¢åŠ ä¸Šçœç•¥å·...å³å¯ package main import ( \"fmt\" ) func main() { res1 := sum(1, 2, 3) res2 := sum(7, 9, 1) fmt.Println(res1, res2) } func sum(arr ...int) (ret int) { for _, num := range arr { ret += num } return } å›ºå®šå‚æ•°å’Œå¯å˜å‚æ•°åŒæ—¶å‡ºç°ï¼Œå¯å˜å‚æ•°æ”¾åœ¨æœ€å å¯å˜å‚æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥åƒä½¿ç”¨æ•°ç»„ä¸€æ ·ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ä¾‹å­ä¸­çš„for rangeå¾ªç¯ã€‚ å¯é€šè¿‡...å°†sliceä¸­çš„æ•°æ®è½¬å˜ä¸ºå‡½æ•°ä¸­éœ€è¦çš„å¯å˜å‚æ•° package main import ( \"fmt\" ) func main() { strs := []string{\"hi, \", \"Joe.\", \"hi, \", \"Anna.\"} output1(strs...) output2(strs) } func output1(strs ...string) { for _, str := range strs { fmt.Print(str) } fmt.Printf(\"\\noutput1:%T\\n\", strs) } func output2(strs []string) { for _, str := range strs { fmt.Print(str) } fmt.Printf(\"\\noutput2:%T\\n\", strs) } // hi, Joe.hi, Anna. // output1:[]string // hi, Joe.hi, Anna. // output2:[]string å¦‚æœå˜é•¿å‚æ•°çš„ç±»å‹æ²¡æœ‰æŒ‡å®šï¼Œå¯ä»¥ä½¿ç”¨ç©ºæ¥å£interface{},ç»“åˆåå°„ä¸switchç»“æ„ç¡®å®šå‚æ•°çš„ç±»å‹ ch19 æ¥å£ ch24 åå°„ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:2:3","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"ç‰¹æ®Šå‡½æ•° ä¸€ä¸ªä¿é‡é™¤äº†main()ã€init()å‡½æ•°å¤–ï¼Œå…¶ä»–æ‰€æœ‰ç±»å‹çš„å‡½æ•°éƒ½å¯ä»¥æœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚ init å‡½æ•°ï¼Œä¸€ä¸ªåŒ…çš„åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨å¼•å…¥ä¸€ä¸ªåŒ…åï¼Œæœ€å…ˆæ‰§è¡Œçš„å°±æ˜¯initå‡½æ•°ï¼Œè¢«ä¸åŒæºæ–‡ä»¶å¤šæ¬¡å¼•å…¥æ—¶ï¼Œä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ main å‡½æ•°æ˜¯æ¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ‰€å¿…é¡»åŒ…å«çš„ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯åœ¨å¯åŠ¨åç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°ï¼ˆå¦‚æœæœ‰ initå‡½æ•°åˆ™ä¼šå…ˆæ‰§è¡Œè¯¥å‡½æ•°ï¼‰ã€‚ main å‡½æ•°æ—¢æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›ç±»å‹ã€‚ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:3:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"å†…ç½®å‡½æ•° closeå‡½æ•°ï¼šä¸»è¦ç”¨æ¥å…³é—­channel lenå‡½æ•°ï¼šlenç”¨äºè¿”å›æŸä¸ªç±»å‹çš„é•¿åº¦æˆ–æ•°é‡ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ã€åˆ‡ç‰‡ã€mapå’Œç®¡é“ï¼‰ capå‡½æ•°ï¼šcapæ˜¯å®¹é‡çš„æ„æ€ï¼Œç”¨äºè¿”å›æŸä¸ªç±»å‹çš„æœ€å¤§å®¹é‡ï¼ˆåªèƒ½ç”¨äºåˆ‡ç‰‡å’Œmap) newï¼Œåˆ†é…å†…å­˜ï¼Œåˆ†é…å€¼ç±»å‹ï¼Œæ¯”å¦‚int, structï¼Œè¿”å›çš„æ˜¯æŒ‡é’ˆ makeï¼Œåˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚chan,map,slice pannicå’Œrecoverï¼Œç”¨æ¥åšé”™è¯¯å¤„ç† copyã€appendï¼šç”¨äºå¤åˆ¶å’Œè¿æ¥åˆ‡ç‰‡ printã€printlnï¼šåº•å±‚æ‰“å°å‡½æ•°ï¼Œåœ¨éƒ¨ç½²ç¯å¢ƒä¸­å»ºè®®ä½¿ç”¨fmtåŒ… complexã€realã€imagï¼šç”¨äºåˆ›å»ºå’Œæ“ä½œå¤æ•° ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:4:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"æ³¨æ„äº‹é¡¹ å‡½æ•°å€¼ä¹‹é—´ä¸èƒ½ç›¸äº’æ¯”è¾ƒï¼ˆnilä¾‹å¤–ï¼‰ å‡½æ•°ä¸èƒ½åœ¨å…¶å®ƒå‡½æ•°é‡Œé¢å£°æ˜ï¼ˆä¸èƒ½åµŒå¥—ï¼‰ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡ä½¿ç”¨åŒ¿åå‡½æ•°æ¥ç ´é™¤è¿™ä¸ªé™åˆ¶ å¯ä»¥è¿”å›å…¶ä»–å‡½æ•°çš„å‡½æ•°å’Œæ¥æ”¶å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°å‡è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œè¿™æ˜¯å‡½æ•°å¼è¯­è¨€çš„ç‰¹ç‚¹ã€‚æ˜¾ç„¶ï¼ŒGoè¯­è¨€å…·æœ‰ä¸€äº›å‡½æ•°å¼è¯­è¨€çš„ç‰¹æ€§ã€‚ ç›®å‰ Go æ²¡æœ‰æ³›å‹ï¼ˆgenericï¼‰çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸æ”¯æŒé‚£ç§æ”¯æŒå¤šç§ç±»å‹çš„å‡½æ•°ã€‚ä¸è¿‡åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥é€šè¿‡æ¥å£ï¼ˆinterfaceï¼‰ï¼Œç‰¹åˆ«æ˜¯ç©ºæ¥å£ä¸ç±»å‹é€‰æ‹©ä¸æˆ–è€…é€šè¿‡ä½¿ç”¨åå°„æ¥å®ç°ç›¸ä¼¼çš„åŠŸèƒ½ã€‚ä½¿ç”¨è¿™äº›æŠ€æœ¯å°†å¯¼è‡´ä»£ç æ›´ä¸ºå¤æ‚ã€æ€§èƒ½æ›´ä¸ºä½ä¸‹ï¼Œæ‰€ä»¥åœ¨éå¸¸æ³¨æ„æ€§èƒ½çš„çš„åœºåˆï¼Œæœ€å¥½æ˜¯ä¸ºæ¯ä¸€ä¸ªç±»å‹å•ç‹¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”ä»£ç å¯è¯»æ€§æ›´å¼ºã€‚ Goä»1.18å¼€å§‹æ”¯æŒæ³›å‹ï¼Œå…·ä½“å‚è§ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:5:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"åŒ¿åå‡½æ•° ch15 åŒ¿åå‡½æ•°ä¸é—­åŒ… ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:6:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"æ–¹æ³• ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“ ","date":"2022-01-20","objectID":"/2022/01/go-ch13/:7:0","tags":null,"title":"Ch13 å‡½æ•°","uri":"/2022/01/go-ch13/"},{"categories":["golang"],"content":"ch12 åˆ‡ç‰‡ åˆ‡ç‰‡æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå›´ç»•åŠ¨æ€æ•°ç»„çš„æ¦‚å¿µè®¾è®¡çš„ï¼Œå¯ä»¥æŒ‰éœ€è‡ªåŠ¨æ”¹å˜å¤§å°ï¼Œä½¿ç”¨è¿™ç§ç»“æ„ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†å’Œä½¿ç”¨æ•°æ®é›†åˆã€‚ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:0:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å†…éƒ¨å®ç° åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„ä¸€ä¸ªè¿ç»­ç‰‡æ®µçš„å¼•ç”¨ï¼Œè¯¥æ•°ç»„ç§°ä¹‹ä¸ºç›¸å…³æ•°ç»„ï¼Œé€šå¸¸éƒ½æ˜¯åŒ¿åçš„ï¼Œæ‰€ä»¥è¯´åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ã€‚ç”±äºåº•å±‚çš„å†…å­˜æ˜¯è¿ç»­åˆ†é…çš„ï¼Œæ‰€ä»¥æ•ˆç‡éå¸¸é«˜ã€‚æ­¤å¤–ï¼Œåˆ‡ç‰‡è¿˜æ‹¥æœ‰å¯ä»¥é€šè¿‡ç´¢å¼•è·å¾—æ•°æ®ï¼Œå¯ä»¥è¿­ä»£ä»¥åŠåƒåœ¾å›æ”¶çš„å¥½å¤„ã€‚ åˆ‡ç‰‡å¯¹è±¡éå¸¸å°ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰ä¸‰å­—æ®µçš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬æŒ‡é’ˆï¼Œåˆ‡ç‰‡é•¿åº¦ï¼Œåˆ‡ç‰‡å®¹é‡ã€‚ type slice struct { array unsafe.Pointer len int cap int } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:1:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å£°æ˜å’Œåˆå§‹åŒ– ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:2:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"ä½¿ç”¨makeå‡½æ•°åˆ›å»º ä½¿ç”¨å†…ç½®çš„makeå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®šåˆ‡ç‰‡é•¿åº¦ï¼Œç¬¬äºŒå‚æ•°ç”¨äºæŒ‡å®šåˆ‡ç‰‡å®¹é‡ã€‚å¦‚æœä¸æŒ‡å®šå®¹é‡ï¼Œé‚£ä¹ˆå®¹é‡é»˜è®¤ä¸é•¿åº¦ç›¸åŒã€‚ slice1 := make([]int, 5) slice2 ï¼š= make([]int, 5, 10) åœ¨slice2ä¸­åªèƒ½è®¿é—®5ä¸ªå…ƒç´ ï¼Œå› ä¸ºåˆ‡ç‰‡é•¿åº¦ä¸º5ï¼Œå‰©ä¸‹5ä¸ªå…ƒç´ ï¼Œéœ€è¦åˆ‡ç‰‡æ‰©å……åæ‰èƒ½è®¿é—®ã€‚ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:2:1","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"ä½¿ç”¨å­—é¢é‡åˆ›å»º slice3 := []int{1, 2, 3, 4, 5} slice4 := []int{4:1} ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:2:2","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åŸºäºåŸæ•°ç»„æˆ–åˆ‡ç‰‡åˆ›å»º slice5 := []int{1, 2, 3, 4, 5} slice6 := slice5[:] slice7 := slice5[0:] slice8 := slice5[:5] [i:j]æ˜¯ä»iå¼€å§‹ï¼Œä½†ä¸åŒ…æ‹¬j içœç•¥åˆ™é»˜è®¤0ï¼Œjçœç•¥åˆ™é»˜è®¤ä¸ºé•¿åº¦ï¼Œi,j éƒ½åº”è¯¥åœ¨èŒƒå›´å†…ï¼Œ i\u003e=0, j \u003c=size æ–°åˆ‡ç‰‡å’Œæ—§åˆ‡ç‰‡å…±äº«åŒä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸ func testSlice() { var originArr [5]int slice1 := originArr[:] slice2 := originArr[:2] originArr[2] = 4 fmt.Println(slice1) fmt.Println(slice2) slice2[1] = 5 fmt.Println(slice1) fmt.Println(slice2) slice3 := []int{1, 2, 3, 4, 5}[:] slice4 := []int{1, 2, 3, 4, 5}[:] slice4[3] = 9 fmt.Println(slice3) fmt.Println(slice4) //slice1,2å…±äº«åº•å±‚æ•°ç»„ï¼Œä½†slice3,4ä¸å…±äº«åº•å±‚æ•°ç»„ } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:2:3","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡é•¿åº¦ã€å®¹é‡ åˆ‡ç‰‡é•¿åº¦ï¼šlen(slice) åˆ‡ç‰‡å®¹é‡ï¼šcap(slice) å°†åˆ‡ç‰‡sçš„é•¿åº¦æ‹“å±•åˆ°å®¹é‡ä¸Šé™ï¼šs = s[:cap(s)] make([]int, length, capactiy), s[startğŸ”šcapacityend]å¯æ“ä½œä¿®æ”¹å®¹é‡ï¼Œå…·ä½“åœ°è§å¦‚ä¸‹ä»£ç  package main import ( \"fmt\" ) func main() { // capacityend needs to be less than or equal to the basical capacity slice1 := make([]int, 5, 10) slice2 := slice1[:6] slice3 := slice1[:6:8] // 8 \u003c= cap(slice1) slice4 := slice1[4:5:10] // 10 \u003c= cap(slice1) slice5 := slice2[1:] slice6 := slice3[2:] slice7 := slice3[2::6] // 6 \u003c= cap(slice3) fmt.Printf(\"capacity of slice1 is %d\\n\", cap(slice1)) //10 fmt.Printf(\"capacity of slice2 is %d\\n\", cap(slice2)) //10 fmt.Printf(\"capacity of slice3 is %d\\n\", cap(slice3)) //8 = 8-0 fmt.Printf(\"capacity of slice4 is %d\\n\", cap(slice4)) //6 = 10-4 fmt.Printf(\"capacity of slice5 is %d\\n\", cap(slice5)) //9 = cap(slice2) - 1 fmt.Printf(\"capacity of slice6 is %d\\n\", cap(slice6)) //6 = cap(slice3) - 2 fmt.Printf(\"capacity of slice7 is %d\\n\", cap(slice7)) //4 = 6- 2 } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:3:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"ç‰¹æ®Šåˆ‡ç‰‡ nilåˆ‡ç‰‡å’Œç©ºåˆ‡ç‰‡é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0ï¼Œä½†nilåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆæ˜¯nilï¼Œè€Œç©ºåˆ‡ç‰‡å¯¹åº”çš„æ˜¯ä¸€ä¸ªåœ°å€ã€‚ package main import ( \"fmt\" ) func main() { var nilSlice []int var empytSlice = []int{} fmt.Println(len(nilSlice), cap(nilSlice)) fmt.Println(len(empytSlice), cap(empytSlice)) } // 0 0 // 0 0 ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:4:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"æ‰©å……åˆ‡ç‰‡ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:5:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åœ¨å®¹é‡èŒƒå›´å†…ï¼Œä¿®æ”¹åˆ‡ç‰‡é•¿åº¦ åˆ‡ç‰‡åªèƒ½è®¿é—®åˆ°å…¶é•¿åº¦å†…çš„å…ƒç´ ï¼Œè®¿é—®è¶…è¿‡å…ƒç´ å¤–çš„å…ƒç´ ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ã€‚ package main import \"fmt\" func main() { slice1 := make([]int, 0, 10) fmt.Printf(\"slice1:%d %d\\n\", len(slice1), cap(slice1)) slice2 := slice1[5:7] fmt.Printf(\"slice2:%d %d\\n\", len(slice2), cap(slice2)) slice3 := slice2[:len(slice2)+1] fmt.Printf(\"slice3:%d %d\\n\", len(slice3), cap(slice3)) slice4 := slice2[:cap(slice2)] fmt.Printf(\"slice2:%d %d\\n\", len(slice4), cap(slice4)) } // slice1:0 10 // slice2:2 5 // slice3:3 5 // slice2:5 5 æ³¨æ„ï¼šä¸åŒå‘å‰ç§»åŠ¨ï¼Œåªèƒ½å‘ä¸‹æ ‡å¢å¤§çš„æ–¹å‘è·å–åº•å±‚æ•°ç»„å‰©ä¸‹çš„å…ƒç´  ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:5:1","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å¢åŠ åˆ‡ç‰‡çš„å®¹é‡ package main import ( \"fmt\" ) func main() { nums1 := make([]int, 5) fmt.Println(cap(nums1), len(nums1)) fmt.Printf(\"the address of nums in modify is %p\\n\", \u0026nums1) nums1 = append(nums1, 6) fmt.Println(cap(nums1), len(nums1)) fmt.Printf(\"the address of nums in modify is %p\\n\", \u0026nums1) nums2 := make([]int, 5, 10) for i := range nums2 { nums2[i] = i + 1 } fmt.Println(cap(nums2), len(nums2)) fmt.Printf(\"the address of nums in modify is %p\\n\", \u0026nums2) nums2 = append(nums2, 6) fmt.Println(cap(nums2), len(nums2)) fmt.Printf(\"the address of nums in modify is %p\\n\", \u0026nums2) } //5 5 //the address of nums in modify is 0xc000004078 //10 6 //the address of nums in modify is 0xc000004078 //10 5 //the address of nums in modify is 0xc000004090 //10 6 //the address of nums in modify is 0xc000004090 é¦–å…ˆçœ‹è¿™ä»½ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°nums1é•¿åº¦ä¸º5ï¼Œå®¹é‡ä¸º5ï¼Œæ²¡æœ‰ä½ç½®å»åŠ å…¥å…ƒç´ 6ï¼Œæ‰€ä»¥ä½¿ç”¨appendå‡½æ•°åï¼Œæ‰©å……äº†å®¹é‡ã€‚è€Œå¯¹äºnums2é•¿åº¦ä¸º5ï¼Œå®¹é‡ä¸º10ï¼Œåªéœ€å¢åŠ é•¿åº¦å³å¯ã€‚æ­¤å¤–ï¼Œnums1å’Œnums2çš„åœ°å€éƒ½æ²¡æœ‰å˜ï¼Œè¯´æ˜å®ƒä»¬è¿˜æ˜¯åŸæ¥é‚£ä¸ªåˆ‡ç‰‡ï¼Œä½†nums1æŒ‡å‘çš„åº•å±‚æ•°ç»„å·²ç»å‘ç”Ÿæ”¹å˜ï¼Œè€Œnums2æ²¡æœ‰ã€‚ appendå‡½æ•°ä¼šæ™ºèƒ½çš„å¢é•¿åº•å±‚æ•°ç»„çš„å®¹é‡ï¼Œç›®å‰çš„ç®—æ³•æ˜¯ï¼šå®¹é‡å°äº1000ä¸ªæ—¶ï¼Œæ€»æ˜¯æˆå€çš„å¢é•¿ï¼Œä¸€æ—¦å®¹é‡è¶…è¿‡1000ä¸ªï¼Œå¢é•¿å› å­è®¾ä¸º1.25ã€‚è‹¥åˆ‡ç‰‡åº•å±‚æ•°ç»„è¿˜æœ‰å®¹é‡ï¼Œåˆ™åœ¨åŸæ•°ç»„ä¸Šæ“ä½œï¼›è‹¥åˆ‡ç‰‡åº•å±‚æ•°ç»„æ²¡æœ‰è¶³å¤Ÿçš„å®¹é‡æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°åº•å±‚æ•°ç»„ï¼ŒæŠŠåŸæ¥æ•°ç»„çš„å€¼å¤åˆ¶åˆ°æ–°åº•å±‚æ•°ç»„é‡Œï¼Œå†è¿½åŠ æ–°å€¼ï¼Œè€Œä¸”è¿™æ ·ä¸ä¼šå½±å“åŸæ¥çš„åº•å±‚æ•°ç»„ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š package main import \"fmt\" func main() { slice1 := make([]int, 5) slice2 := slice1 slice1[0] = 1 fmt.Println(slice1, slice2) slice2 = append(slice2, 6) fmt.Println(slice1, slice2) slice1[2] = 3 fmt.Println(slice1, slice2) } // [1 0 0 0 0] [1 0 0 0 0] // [1 0 0 0 0] [1 0 0 0 0 6] // [1 0 3 0 0] [1 0 0 0 0 6] å› æ­¤ï¼Œä¸€èˆ¬åœ¨åˆ›å»ºæ–°åˆ‡ç‰‡çš„æ—¶å€™ï¼Œæœ€å¥½è¦è®©æ–°åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ä¸€æ ·ï¼Œè¿™æ ·åœ¨è¿½åŠ æ“ä½œçš„æ—¶å€™å°±ä¼šç”Ÿæˆæ–°çš„åº•å±‚æ•°ç»„ï¼Œå’ŒåŸæœ‰æ•°ç»„åˆ†ç¦»ï¼Œå°±ä¸ä¼šå› ä¸ºå…±ç”¨åº•å±‚æ•°ç»„è€Œå¼•èµ·å¥‡æ€ªé—®é¢˜ã€‚å› ä¸ºå…±ç”¨æ•°ç»„çš„æ—¶å€™ä¿®æ”¹å†…å®¹ï¼Œä¼šå½±å“å¤šä¸ªåˆ‡ç‰‡ã€‚ æˆ–è€…ç›´æ¥ä½¿ç”¨copyå‡½æ•°è¿›è¡Œæ·±æ‹·è´ï¼Œè¿™æ ·å°±ä¸ä¼šå…±äº«åŒä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:5:2","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"appendæ“ä½œ å†…ç½®çš„append ä¹Ÿæ˜¯ä¸€ä¸ªå¯å˜å‚æ•°çš„å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶è¿½åŠ å¥½å‡ ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡...æ“ä½œç¬¦ï¼ŒæŠŠä¸€ä¸ªåˆ‡ç‰‡è¿½åŠ åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡é‡Œé¢ã€‚ a = append(a, x, y, z) //æœ«å°¾æ·»åŠ å…ƒç´ x y z x, a = a[len(a)-1], a[:len(a)-1] //å»é™¤åˆ‡ç‰‡aæœ€æœ«å°¾çš„å…ƒç´ x a = append(a, b...) //å°†åˆ‡ç‰‡bä¸­çš„æ‰€æœ‰å…ƒç´ åŠ å…¥a a = append(a[:i], a[j:]...) //åˆ é™¤åˆ‡ç‰‡aä¸­i,i+1..j-1çš„å…ƒç´  a = append(a[:i], append(b, a[i:]...)...) //ç´¢å¼•içš„ä½ç½®æ’å…¥åˆ‡ç‰‡bçš„æ‰€æœ‰å…ƒç´  a = append(a, make([]T, j)...) //ä¸ºåˆ‡ç‰‡aæ‹“å±•jä¸ªå…ƒç´ é•¿åº¦ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:6:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡çš„ä½¿ç”¨ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:7:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡è¿­ä»£ package main import ( \"fmt\" ) func main() { cities := []string{\"shanghai\", \"beijing\", \"shaanxi\"} for _, city := range cities { fmt.Println(city) } for i := 0; i \u003c len(cities); i++ { fmt.Println(cities[i]) } } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:7:1","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡ä½œä¸ºå‡½æ•°å‚æ•° å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’ï¼šhttps://zhuanlan.zhihu.com/p/366908019 åˆ‡ç‰‡ä½œä¸ºå‚æ•°ï¼Œåœ¨å‡½æ•°é—´ä»¥ä¼ é€’çš„æ–¹å¼ä¼ é€’ï¼Œå ç”¨å†…å­˜éå¸¸å°ã€‚åœ¨ä¼ é€’èµ‹å€¼åˆ‡ç‰‡æ—¶ï¼Œåº•å±‚æ•°ç»„ä¸ä¼šè¢«èµ‹å€¼ï¼Œä¸å—å½±å“ã€‚ package main import ( \"fmt\" ) func main() { nums := []int{1, 2, 3, 4, 5} fmt.Printf(\"the address of nums in main is %p\\n\", \u0026nums) modify(nums) fmt.Println(nums) } func modify(nums []int) { fmt.Printf(\"the address of nums in modify is %p\\n\", \u0026nums) nums[0] = 10 } // the address of nums in main is 0xc000004078 // the address of nums in modify is 0xc000004090 // [10 2 3 4 5] å¯ä»¥å‘ç°è¿™ä¸¤ä¸ªåˆ‡ç‰‡åœ°å€ä¸ä¸€æ ·ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªnumä¿å­˜çš„æ˜¯åˆ‡ç‰‡çš„åœ°å€ï¼Œå¯¹numså–åœ°å€å¾—åˆ°çš„æ˜¯numsçš„åœ°å€ï¼Œè€Œä¸æ˜¯åº•å±‚æ•°ç»„ã€‚åœ¨ä¿®æ”¹ä¸€ä¸ªç´¢å¼•çš„å€¼åï¼ŒåŸåˆ‡ç‰‡çš„å€¼ä¹Ÿè¢«ä¿®æ”¹äº†ï¼Œè¯´æ˜å…¶å…±ç”¨ä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚ ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:7:2","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡æ‹·è´ æ­£å¦‚åœ¨åˆ‡ç‰‡ä½œä¸ºå‡½æ•°å‚æ•°ä¸­æ‰€è¯´ï¼Œåˆ‡ç‰‡ä½œä¸ºå‚æ•°æ—¶æ˜¯å€¼ä¼ é€’çš„ã€‚å°†åˆ‡ç‰‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å…±äº«åº•å±‚æ•°ç»„çš„ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š package main import \"fmt\" func main() { a := []int{1, 2, 3} b := a fmt.Println(a, b) b[0] = 22 fmt.Println(a, b) } // [1 2 3 ] [1 2 3] // [22 2 3] [22 2 3] å¦‚æœæƒ³è¦äº’ä¸å½±å“çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨copyå‡½æ•° func copy(dst, src []T) int ï¼šcopyæ–¹æ³•å°†ç±»å‹ä¸ºTçš„åˆ‡ç‰‡ä»æºåœ°å€srcæ‹·è´åˆ°ç›®æ ‡åœ°å€dstï¼Œè¦†ç›–dstçš„ç›¸å…³å…ƒç´ ï¼Œå¹¶ä¸”è¿”å›æ‹·è´çš„å…ƒç´ çš„ä¸ªæ•°ï¼Œå…¶ä¸­æ‹·è´ä¸ªæ•°æ˜¯srcå’Œdsté•¿åº¦çš„æœ€å°å€¼ã€‚ package main import \"fmt\" func main() { a := []int{1, 2, 3} b := make([]int, len(a)) copy(b, a) a[0] = -2 b[0] = 2 fmt.Println(a, b) } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:7:3","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åƒåœ¾å›æ”¶ åˆ‡ç‰‡çš„åº•å±‚æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œä½†è¯¥æ•°ç»„çš„å®é™…å®¹é‡å¯èƒ½è¦å¤§äºåˆ‡ç‰‡æ‰€å®šä¹‰çš„å®¹é‡ã€‚ åªæœ‰åœ¨æ²¡æœ‰ä»»ä½•åˆ‡ç‰‡æŒ‡å‘çš„æ—¶å€™ï¼Œåº•å±‚çš„æ•°ç»„å†…å­˜æ‰ä¼šè¢«é‡Šæ”¾ï¼Œè¿™ç§ç‰¹æ€§æœ‰æ—¶ä¼šå¯¼è‡´ç¨‹åºå ç”¨å¤šä½™çš„å†…å­˜ã€‚ ç¤ºä¾‹ï¼Œå‡½æ•°FindDigitså°†ä¸€ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åæœç´¢æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼ˆè¿™é‡Œæ˜¯æ•°å­—ï¼‰å¹¶è¿”å›ä¸€ä¸ªåˆ‡ç‰‡ã€‚ var digitRegexp = regexp.MustCompile(\"[0-9]+\") func FindDigits(filename string) []byte{ b, _ := ioutil.ReadFile(filename) return digitRegexp.Find(b) } è¿™æ®µä»£ç å¯ä»¥é¡ºåˆ©è¿è¡Œï¼Œä½†è¿”å›çš„[]byteæŒ‡å‘çš„åº•å±‚æ˜¯æ•´ä¸ªæ–‡ä»¶çš„æ•°æ®ã€‚åªè¦è¯¥åˆ‡ç‰‡ä¸è¢«é‡Šæ”¾ï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¸èƒ½é‡Šæ”¾æ•´ä¸ªæ–‡ä»¶æ‰€å ç”¨çš„å†…å­˜ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸€ç‚¹ç‚¹æœ‰ç”¨çš„æ•°æ®å´å ç”¨äº†æ•´ä¸ªæ–‡ä»¶çš„å†…å­˜ã€‚ ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š var digitRegexp = regexp.MustCompile(\"[0-9]+\") func FindDigits(filename string) []byte{ b, _ := ioutil.ReadFile(filename) b = digitRegexp.Find(b) c := make([]byte, len(b)) copy(c, b) return c } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:8:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"åˆ‡ç‰‡ç»ƒä¹  ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:9:0","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å¢åŠ åˆ‡ç‰‡å®¹é‡çš„å‡½æ•° func AppendByte(slice []byte, data ...byte) []byte { m := len(slice) n := m + len(data) if n \u003e cap(slice) { newSlice := make([]byte, (n + 1) * 2) copy(newSlice, slice) slice = newSlice } slice = slice[0:n] copy(slice[m:n], data) return slice } ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:9:1","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å†™ä¸€ä¸ªå‡½æ•°InsertStringSliceå°†åˆ‡ç‰‡æ’å…¥åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡çš„æŒ‡å®šä½ç½® func main() { s3 := make([]byte, 5, 15) s3[0], s3[1], s3[2], s3[3], s3[4] = 'h', 'e', 'l', 'l', 'o's4 := []byte(\"test\") ans, _ := insertStringSlice(s3, s4, 2) fmt.Println(string(ans)) s1 := []byte(\"helloworld\") s2 := []byte(\"testing\") ans2, _ := insertStringSlice(s1, s2, 2) fmt.Println(string(ans2)) } func insertStringSlice(dst, data []byte, pos int) ([]byte, bool) { if pos \u003c 0 || pos \u003e len(dst) { return nil, false } err := true n := len(dst) + len(data) if n \u003c= cap(dst) { dst = dst[:n] } else { newSlice := make([]byte, n) copy(newSlice, dst) dst = newSlice } copy(dst[pos+len(data):], dst[pos:]) copy(dst[pos:pos+len(data)], data) return dst, err } //hetestllo //heftestinglloworld ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:9:2","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":"å†™ä¸€ä¸ªå‡½æ•°RemoveStringSliceå°†ä»startåˆ°endç´¢å¼•çš„å…ƒç´ ä»åˆ‡ç‰‡ä¸­ç§»é™¤ func main() { nums := []int{1, 2, 3, 4, 5, 6, 7} fmt.Println(removeStringSlice(nums, 3, 6)) } func removeStringSlice(nums []int, start, end int) ([]int, bool) { if start \u003c 0 || end \u003e= len(nums) { return nil, false } copy(nums[start:], nums[end+1:]) n := len(nums) nums = nums[:n-(end-start+1)] return nums, true } // [1, 2, 3] true ","date":"2022-01-16","objectID":"/2022/01/go-ch12/:9:3","tags":null,"title":"Ch12 åˆ‡ç‰‡","uri":"/2022/01/go-ch12/"},{"categories":["golang"],"content":" æ•°ç»„æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹å…ƒç´ çš„é›†åˆ æ•°ç»„æ˜¯åˆ‡ç‰‡ã€Mapç­‰æ•°æ®ç»“æ„çš„åŸºç¡€ åœ¨Goè¯­è¨€ä¸­ï¼Œæ•°ç»„ä»å£°æ˜æ—¶å°±å·²ç»ç¡®å®šæ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹å’Œä¸ªæ•°ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸å¯å˜ æ•°ç»„çš„æœ€å¤§é•¿åº¦æ˜¯2GB ","date":"2022-01-10","objectID":"/2022/01/go-ch11/:0:0","tags":null,"title":"Ch11 æ•°ç»„","uri":"/2022/01/go-ch11/"},{"categories":["golang"],"content":"1 æ•°ç»„å®šä¹‰ var identifier [len]type ä¾‹å¦‚ï¼Œ var arr1 [3]int var arr2 [5]int æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯å¸¸é‡ï¼Œå¹¶ä¸”é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸€æ—¦ç¡®å®šï¼Œä¸èƒ½æ”¹å˜ã€‚ æ­¤å¤–ï¼Œ[3]intå’Œ[5]intæ˜¯ä¸åŒçš„ç±»å‹ã€‚ ","date":"2022-01-10","objectID":"/2022/01/go-ch11/:1:0","tags":null,"title":"Ch11 æ•°ç»„","uri":"/2022/01/go-ch11/"},{"categories":["golang"],"content":"2 æ•°ç»„åˆå§‹åŒ– var arr1 [3]int //[0,0,0] var arr2 [3]int{1,2} //[1,2,0] var arr3 [3]string{\"beijing\", \"shanghai\", \"shenzhen\"} //[åŒ—äº¬,ä¸Šæµ·,æ·±åœ³] var arr4 = [...]int{1,2} //[1,2] var arr5 = [...]int{1:1, 3:5} //[0,1,0.5] var arr6 = [3][2]string{ {\"åŒ—äº¬\", \"ä¸Šæµ·\"}, {\"å¹¿å·\", \"æ·±åœ³\"}, {\"æˆéƒ½\", \"é‡åº†\"}, } var arr7 = [...][2]string{ {\"åŒ—äº¬\", \"ä¸Šæµ·\"}, {\"å¹¿å·\", \"æ·±åœ³\"}, {\"æˆéƒ½\", \"é‡åº†\"}, } å½“[]ä¸ºç©ºï¼Œè€Œä¸æ˜¯...æ—¶ï¼Œæ­¤æ—¶çš„ç±»å‹æ˜¯slice å¤šç»´æ•°ç»„ä¸­ï¼Œåªæœ‰ç¬¬ä¸€å±‚å¯ä»¥ä½¿ç”¨...è®©ç¼–è¯‘å™¨æ¥æ¨å¯¼æ•°ç»„é•¿åº¦ ","date":"2022-01-10","objectID":"/2022/01/go-ch11/:2:0","tags":null,"title":"Ch11 æ•°ç»„","uri":"/2022/01/go-ch11/"},{"categories":["golang"],"content":"3 æ•°ç»„éå† for i := 0; i \u003c len(arr1); i++ { fmt.Println(arr1[i]) } for idx, value := range arrr1 { fmt.Println(idx, value) } for i := 0; i \u003c len(arr6); i++ { for j := 0; j \u003c len(arr6[i]); j++ { fmt.Println(arr6[i][j]) } fmt.Println() } for _, rows := range arr6 { for _, city := range rows { fmt.Println(city) } fmt.Println() } ","date":"2022-01-10","objectID":"/2022/01/go-ch11/:3:0","tags":null,"title":"Ch11 æ•°ç»„","uri":"/2022/01/go-ch11/"},{"categories":["golang"],"content":"4 æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æœ¬èº«å·®ä¸å¤šï¼Œåªä¸è¿‡å…ƒç´ ç±»å‹æ˜¯æŒ‡é’ˆã€‚ package main import \"fmt\" func main() { array := [5]*int{1:new(int), 3:new(int)} // è‡³æ­¤åªèƒ½ç»™ä¸‹æ ‡ä½1,3çš„è§£å¼•ç”¨ï¼Œå¯¹nilè§£å¼•ç”¨ä¼šä½¿å¾—ç³»ç»Ÿå´©æºƒ // ä¸èƒ½å¯¹ç©ºæŒ‡é’ˆè§£å¼•ç”¨ for idx, p := range array { if p != nil { fmt.Println(idx, *p) } else { fmt.Println(\"nil\") } } *array[1] = 1 array[0] = new(int) *array[0] = 2 fmt.Println(\"after......\") for idx, p := range array { if p != nil { fmt.Println(idx, *p) } else { fmt.Println(\"nil\") } } } æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œä¼ å‚æ—¶ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œæ”¹å˜å‰¯æœ¬çš„å€¼è€Œä¸æ”¹å˜æœ¬èº«çš„å€¼ã€‚å°†æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå¦‚æœéœ€è¦å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹ï¼Œå¹¶å°†ç»“æœä¿ç•™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ å…³äºåˆ‡ç‰‡å’Œå…³äºå‡½æ•°å°†åœ¨ch12 åˆ‡ç‰‡å’Œch13 å‡½æ•°è¯´æ˜ ä½¿ç”¨æŒ‡é’ˆ æ³¨æ„è¿™é‡Œä¸èƒ½ç”¨for-rangeç»“æ„éå†ä¿®æ”¹æ•°ç»„,å…·ä½“åŸå› å‚è€ƒch8 æ§åˆ¶ç»“æ„ package main import ( \"fmt\" ) func main() { array := [3]float64{7.0, 8.5, 9.1} fmt.Println(array) modifyArr(\u0026array) fmt.Println(array) } func modifyArr(arr *[3]float64) { for i := 0; i \u003c 3; i++ { if (*arr)[i] \u003e 5.0 { (*arr)[i] = 5.0 } //if arr[i] \u003e 5.0 { // arr[i] = 5.0 //} //è¯­æ³•ç³–ï¼Œä¸ä¸Šé¢ç­‰ä»·ï¼Œéšè—äº†é—´æ¥å¼•ç”¨ } } ä½¿ç”¨åˆ‡ç‰‡ package main import ( \"fmt\" ) func main() { array := [3]float64{7.0, 8.5, 9.1} fmt.Println(array) modifyArr(array[:]) fmt.Println(array) } func modifyArr(arr []float64) { for i := 0; i \u003c 3; i++ { if arr[i] \u003e 5.0 { arr[i] = 5.0 } } } ","date":"2022-01-10","objectID":"/2022/01/go-ch11/:4:0","tags":null,"title":"Ch11 æ•°ç»„","uri":"/2022/01/go-ch11/"},{"categories":["golang"],"content":"å€¼ç±»å‹ï¼Œå¦‚ï¼šintã€floatã€boolã€stringã€arrayã€struct å¼•ç”¨ç±»å‹ï¼Œå¦‚ï¼šptrï¼ˆæŒ‡é’ˆï¼‰, sliceã€mapã€channelã€funcã€interface å€¼ç±»å‹ï¼šå€¼ç±»å‹å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ã€‚ var i int = 7 var j = i ä½¿ç”¨=å°†ä¸€ä¸ªå˜é‡çš„å€¼èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­å°†içš„å€¼è¿›è¡Œäº†æ‹·è´ å¼•ç”¨ç±»å‹ï¼šè¢«å¼•ç”¨çš„å˜é‡ä¼šå­˜å‚¨åœ¨å †ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¸”æ¯”æ ˆæ‹¥æœ‰æ›´å¤§çš„å†…å­˜ç©ºé—´ã€‚ æ›´å¤æ‚çš„æ•°æ®ï¼Œä¾‹å¦‚ptrã€sliceã€mapã€channelã€funcã€interfaceé€šå¸¸ä¼šéœ€è¦ä½¿ç”¨å¤šä¸ªå­—ï¼Œè¿™äº›æ•°æ®ä¸€èˆ¬ä½¿ç”¨å¼•ç”¨ç±»å‹ä¿å­˜ã€‚ package main import \"fmt\" func main() { var r1 int = 20 var x, y *int = \u0026r1, \u0026r1 fmt.Println(*x, *y) } ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡x å­˜å‚¨çš„æ˜¯r1çš„å€¼æ‰€åœ¨çš„å†…å­˜åœ°å€ï¼Œæˆ–è€…å†…å­˜åœ°å€ä¸­ç¬¬ä¸€ä¸ªå­—æ‰€åœ¨çš„ä½ç½®ã€‚ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„æŒ‡é’ˆæŒ‡å‘çš„å¤šä¸ªå­—å¯ä»¥æ˜¯åœ¨è¿ç»­çš„å†…å­˜åœ°å€ä¸­ï¼ˆå†…å­˜å¸ƒå±€æ˜¯è¿ç»­çš„ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯è®¡ç®—æ•ˆç‡æœ€é«˜çš„ä¸€ç§å­˜å‚¨å½¢å¼ï¼›ä¹Ÿå¯ä»¥å°†è¿™äº›å­—åˆ†æ•£å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ¯ä¸ªå­—éƒ½æŒ‡ç¤ºäº†ä¸‹ä¸€ä¸ªå­—æ‰€åœ¨çš„å†…å­˜åœ°å€ã€‚ ","date":"2021-12-24","objectID":"/2021/12/go-ch10/:0:0","tags":null,"title":"Ch10 å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹","uri":"/2021/12/go-ch10/"},{"categories":["golang"],"content":"ä¸C++ä¸åŒçš„æ˜¯ï¼ŒGoè¯­è¨€ä¸ºç¨‹åºå‘˜æä¾›äº†æ§åˆ¶æ•°æ®ç»“æ„æŒ‡é’ˆçš„èƒ½åŠ›ï¼Œä½†å´ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ã€‚ é€šè¿‡ç»™äºˆç¨‹åºå‘˜åŸºæœ¬å†…å­˜å¸ƒå±€ï¼ŒGo è¯­è¨€å…è®¸æ§åˆ¶ç‰¹å®šé›†åˆçš„æ•°æ®ç»“æ„ã€åˆ†é…çš„æ•°é‡ä»¥åŠå†…å­˜è®¿é—®æ¨¡å¼ï¼Œè¿™äº›å¯¹æ„å»ºè¿è¡Œè‰¯å¥½çš„ç³»ç»Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ ","date":"2021-12-19","objectID":"/2021/12/go-ch9/:0:0","tags":null,"title":"Ch9 æŒ‡é’ˆ","uri":"/2021/12/go-ch9/"},{"categories":["golang"],"content":"1 æŒ‡é’ˆçš„å«ä¹‰ å£°æ˜å˜é‡çš„è¿‡ç¨‹å°±æ˜¯å‘ç³»ç»Ÿç”³è¯·å†…å­˜çš„è¿‡ç¨‹ã€‚å¦‚æœåœ¨ç¨‹åºä¸­å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿä¼šåˆ†é…ä¸€å—å†…å­˜ï¼Œæ­¤åå°±å¯ä»¥é€šè¿‡å˜é‡ååœ¨è¿™å—å†…å­˜ä¸­å­˜å‚¨ã€ä¿®æ”¹å€¼ã€‚ è¯¥å†…å­˜åœ¨æ“ä½œç³»ç»Ÿä¸­æ˜¯æœ‰åœ°å€çš„ï¼Œå¯ä»¥é€šè¿‡å–åœ°å€ç¬¦\u0026æ¥è·å¾—è¿™ä¸ªåœ°å€ï¼ŒæŠŠè¿™ä¸ªåœ°å€ä¿¡æ¯å­˜åœ¨å¦ä¸€ä¸ªå˜é‡ä¸­ï¼Œè¿™ä¸ªå˜é‡å°±å«åšæŒ‡é’ˆã€‚ å†…å­˜åœ°å€é€šå¸¸ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œ32ä½æœºå™¨4ä¸ªå­—èŠ‚ï¼Œ64ä½æœºå™¨8ä¸ªå­—èŠ‚ å½“ä¸€ä¸ªæŒ‡é’ˆè¢«å®šä¹‰åæ²¡æœ‰åˆ†é…åˆ°ä»»ä½•å˜é‡æ—¶ï¼Œå®ƒçš„å€¼ä½nil *ptrï¼Œå¯è·å¾—ptræŒ‡å‘åœ°å€ä¸Šæ‰€å­˜å‚¨çš„å€¼ï¼Œè¿™è¢«ç§°ä¸ºåå¼•ç”¨æˆ–è§£å¼•ç”¨ï¼ˆdereferenceï¼‰ package main import \"fmt\" func main() { var num = 5 fmt.Printf(\"An integer: %d, its location in memory: %p\\n\", num, \u0026num) var numPtr *int numPtr = \u0026i1 fmt.Printf(\"The value at memory location %p is %d\\n\", numPtr, *numPtr) } //An integer: 5, its location in memory: 0x24f0820 //The value at memory location 0x24f0820 is 5 ä¸‹é¢çš„ç¨‹åºï¼Œé€šè¿‡æŒ‡é’ˆä¿®æ”¹äº†åŸå­—ç¬¦ä¸²s package main import \"fmt\" func main() { s := \"good bye\" var p *string = \u0026s *p = \"ciao\" fmt.Printf(\"Here is the pointer p: %p\\n\", p) // prints address fmt.Printf(\"Here is the string *p: %s\\n\", *p) // prints string fmt.Printf(\"Here is the string s: %s\\n\", s) // prints same string } //Here is the pointer p: 0x2540820 //Here is the string *p: ciao //Here is the string s: ciao åœ¨æœ¬èŠ‚å¼€å¤´æåˆ°ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—æŒ‡çš„æ˜¯p++,p--è¿™ç§,è¿™äº›è¿ç®—æ˜¯ä¸è¢«å…è®¸çš„ã€‚ #include \u003ciostream\u003eusing namespace std; int main() { int arr[5] = {1, 2, 3, 4 ,5}; for(int *p = arr; p \u003c arr+5; p++) { cout \u003c\u003c *p \u003c\u003c endl; } return 0; } æ³¨æ„äº‹é¡¹ è­¦å‘Š ä¸èƒ½è·å–å¸¸é‡ï¼ˆå­—é¢é‡ä¹Ÿæ˜¯å¸¸é‡ï¼‰çš„åœ°å€ã€‚ const i = 5 ptr := \u0026i //error: cannot take the address of i ptr2 := \u002610 //error: cannot take the address of 10 è­¦å‘Š å¯¹ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨ä¸åˆæ³•ï¼Œä¼šä½¿ç¨‹åºå´©æºƒã€‚ package main func main() { var p *int = nil *p = 0 } // in Windows: stops only with: \u003cexit code=\"-1073741819\" msg=\"process crashed\"/\u003e // runtime error: invalid memory address or nil pointer dereference ","date":"2021-12-19","objectID":"/2021/12/go-ch9/:1:0","tags":null,"title":"Ch9 æŒ‡é’ˆ","uri":"/2021/12/go-ch9/"},{"categories":["golang"],"content":"2 æŒ‡é’ˆçš„åˆ©å¼Š å¥½å¤„ï¼šä¼ å‚æ—¶ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œä¸æ˜¯å˜é‡çš„æ‹·è´ï¼Œå¯ä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ•ˆç‡ã€‚ åå¤„ï¼šæŒ‡é’ˆçš„è¿‡åº¦é¢‘ç¹ä½¿ç”¨ä¹Ÿå¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥æŒ‡å‘å¦ä¸€ä¸ªæŒ‡é’ˆï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œä»»æ„æ·±åº¦çš„åµŒå¥—ï¼Œå¯¼è‡´å¯ä»¥æœ‰å¤šçº§çš„é—´æ¥å¼•ç”¨ï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µè¿™ä¼šä½¿ä»£ç ç»“æ„ä¸æ¸…æ™°ã€‚ ","date":"2021-12-19","objectID":"/2021/12/go-ch9/:2:0","tags":null,"title":"Ch9 æŒ‡é’ˆ","uri":"/2021/12/go-ch9/"},{"categories":["golang"],"content":"3 è¯­æ³•ç³– è¯­æ³•ç³–ï¼ˆSyntactic sugarï¼‰ï¼Œä¹Ÿè¯‘ä¸ºç³–è¡£è¯­æ³•ï¼Œæ˜¯ç”±è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶å½¼å¾—Â·çº¦ç¿°Â·å…°è¾¾ï¼ˆPeter J. Landinï¼‰å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½å¹¶æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚é€šå¸¸æ¥è¯´ä½¿ç”¨è¯­æ³•ç³–èƒ½å¤Ÿå¢åŠ ç¨‹åºçš„å¯è¯»æ€§ï¼Œä»è€Œå‡å°‘ç¨‹åºä»£ç å‡ºé”™çš„æœºä¼šã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ Go è¯­è¨€å¯ä»¥ä½¿ç¨‹åºå‘˜è½»æ¾åˆ›å»ºæŒ‡é’ˆï¼Œå¹¶ä¸”éšè—é—´æ¥å¼•ç”¨ï¼Œå³è‡ªåŠ¨è§£å¼•ç”¨ã€‚åœ¨ä¹‹åçš„ç»“æ„ä½“ä¹‹ä¸­ä½“ç°çš„æ›´åŠ æ˜æ˜¾ï¼Œè¿™æ˜¯Goè¯­è¨€æ”¯æŒçš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚ stuæ˜¯ä¸€ä¸ªstudentç»“æ„ä½“çš„æŒ‡é’ˆï¼Œè¦è°ƒç”¨æˆå‘˜å˜é‡ï¼Œåº”ä¸º(*stu).ageï¼Œä½†Goè¯­è¨€å†…éƒ¨æ”¯æŒstu.ageè¿™ç§æ–¹å¼ï¼Œèƒ½æ”¯æŒè¿™ç§æ–¹å¼è°ƒç”¨çš„æœ¬è´¨åŸå› æ˜¯Goä¸æ”¯æŒå¯¹æŒ‡é’ˆçš„ä¿®æ”¹ï¼Œå…·ä½“ä¼šåœ¨ç»“æ„ä¸€ç« å†æ¬¡è¿›è¡Œè¯´æ˜ã€‚ ch18 è‡ªå®šä¹‰ç±»å‹ä¸ç»“æ„ä½“ packge main import \"fmt\" type Student struct { Age int Name string } func main() { stu := \u0026Student{19, \"Tony\"} fmt.Println(stu.age) fmt.Println((*stu).age) } ","date":"2021-12-19","objectID":"/2021/12/go-ch9/:3:0","tags":null,"title":"Ch9 æŒ‡é’ˆ","uri":"/2021/12/go-ch9/"},{"categories":["golang"],"content":"1 æ¡ä»¶ç»“æ„å’Œåˆ†æ”¯ç»“æ„ ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:1:0","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"1.1 if-else ä¹ æƒ¯ç”¨æ³•ä¸€ var prompt = \"Enter a digit, e.g. 3 \"+ \"or %s to quit.\" func init() { if runtime.GOOS == \"windows\" { prompt = fmt.Sprintf(prompt, \"Ctrl+Z, Enter\") } else { //Unix-like prompt = fmt.Sprintf(prompt, \"Ctrl+D\") } } ä¹ æƒ¯ç”¨æ³•äºŒ ok-patternæ¨¡å¼ ifè¯­å¥å¯åŒ…å«ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥ï¼Œä¾‹å¦‚ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ if val := 10; val \u003e max { // do something } ä½¿ç”¨ç®€çŸ­æ–¹å¼:=å£°æ˜çš„å˜é‡valï¼Œå…¶ä½œç”¨åŸŸåªå­˜åœ¨äºifè¯­å¥ä¸­ï¼ŒåŒ…æ‹¬ifåçš„elseè¯­å¥ã€‚ å¦‚æœå˜é‡valåœ¨ifç»“æ„ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨ifè¯­å¥å—ä¸­ï¼Œè¯¥å˜é‡åŸæ¥çš„å€¼ä¼šè¢«éšè—ã€‚ if value := process(data); value \u003e max { // do something } value, err := pack1.Function1(param1) if err != nil { fmt.Printf(\"An error occured in pack1.Function1 with parameter %v\", param1) return err } ä½¿ç”¨ä¹ æƒ¯è¯­æ³•äºŒï¼Œå¯å°†ä¸Šè¿°ä»£ç ç®€åŒ–ä¸ºï¼Œè¿™ç§æ–¹å¼å¸¸ç§°ä¸ºok-patternæ¨¡å¼ if value, err := pack1.Function1(param1); err != nil { fmt.Printf(\"An error occured in pack1.Function1 with parameter %v\", param1) return err } ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:1:1","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"1.2 switchç»“æ„ switch var1 { case value1: ... case value2: ... default: ... } value1å’Œvalue2å¿…é¡»æ˜¯ç›¸åŒç±»å‹çš„å€¼æˆ–è®¡ç®—ç»“æœä¸ºç›¸åŒç±»å‹çš„è¡¨è¾¾å¼ ä¸Cè¯­è¨€ä¸€æ ·ï¼Œcaseåå¯è·Ÿå¤šä¸ªå¯èƒ½ç¬¦åˆæ¡ä»¶çš„å€¼ï¼Œä½¿ç”¨é€—å·åˆ†å‰² Golangä½¿ç”¨å¿«é€Ÿçš„æŸ¥æ‰¾ç®—æ³•æ¥æµ‹è¯•switchæ¡ä»¶ä¸caseåˆ†æ”¯çš„åŒ¹é…æ¸…ç©ºï¼Œç›´åˆ°ç®—æ³•åŒ¹é…åˆ°æŸä¸ªcaseæˆ–è¿›å…¥defaultä¸ºæ­¢ æŸä¸ªåˆ†æ”¯çš„ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œä¼šé€€å‡ºæ•´ä¸ªswitchä»£ç å—ã€‚å¦‚æœå¸Œæœ›æ‰§è¡Œåç»­åˆ†æ”¯çš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨fallthroughå…³é”®å­— åœ¨ case ...: è¯­å¥ä¹‹åï¼Œä¸éœ€è¦ä½¿ç”¨èŠ±æ‹¬å·å°†å¤šè¡Œè¯­å¥æ‹¬èµ·æ¥ï¼Œå½“ä»£ç å—åªæœ‰ä¸€è¡Œæ—¶ï¼Œå¯ä»¥ç›´æ¥æ”¾ç½®åœ¨ case è¯­å¥ä¹‹åã€‚ ä¹ æƒ¯ç”¨æ³•ä¸€ package main import \"fmt\" func main() { var num1 int = 100 switch num1 { case 98, 99: fmt.Println(\"It's equal to 98\") case 100: fmt.Println(\"It's equal to 100\") default: fmt.Println(\"It's not equal to 98 or 100\") } } ä¹ æƒ¯ç”¨æ³•äºŒ switch è¯­å¥çš„ç¬¬äºŒç§å½¢å¼æ˜¯ä¸æä¾›ä»»ä½•è¢«åˆ¤æ–­çš„å€¼ï¼ˆå®é™…ä¸Šé»˜è®¤ä¸ºåˆ¤æ–­æ˜¯å¦ä¸º trueï¼‰ï¼Œç„¶ååœ¨æ¯ä¸ª case åˆ†æ”¯ä¸­è¿›è¡Œæµ‹è¯•ä¸åŒçš„æ¡ä»¶ã€‚å½“ä»»ä¸€åˆ†æ”¯çš„æµ‹è¯•ç»“æœä¸º true æ—¶ï¼Œè¯¥åˆ†æ”¯çš„ä»£ç ä¼šè¢«æ‰§è¡Œã€‚è¿™çœ‹èµ·æ¥éå¸¸åƒé“¾å¼çš„ if-else è¯­å¥ï¼Œä½†æ˜¯åœ¨æµ‹è¯•æ¡ä»¶éå¸¸å¤šçš„æƒ…å†µä¸‹ï¼Œæä¾›äº†å¯è¯»æ€§æ›´å¥½çš„ä¹¦å†™æ–¹å¼ã€‚ package main import \"fmt\" func main() { var num1 int = 7 switch { case num1 \u003c 0: fmt.Println(\"Number is negative\") case num1 \u003e 0 \u0026\u0026 num1 \u003c 10: fmt.Println(\"Number is between 0 and 10\") default: fmt.Println(\"Number is 10 or greater\") } } ä¹ æƒ¯ç”¨æ³•ä¸‰ switch è¯­å¥çš„ç¬¬ä¸‰ç§å½¢å¼æ˜¯åŒ…å«ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥ï¼Œè¿™ç§å½¢å¼å¯ä»¥éå¸¸ä¼˜é›…åœ°è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚åœ¨ä¸‹é¢è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œå˜é‡ a å’Œ b è¢«å¹³è¡Œåˆå§‹åŒ–ï¼Œç„¶åä½œä¸ºåˆ¤æ–­æ¡ä»¶ï¼š switch a, b := x[i], y[j]; { case a \u003c b: t = -1 case a == b: t = 0 case a \u003e b: t = 1 } æ­¤å¤–ï¼Œå¦‚æœåˆå§‹åŒ–è¯­å¥å‡ºç°èµ‹å€¼å¤±è´¥çš„æƒ…å†µï¼Œä¾‹å¦‚å¦‚ä¸‹çš„è¯­å¥ï¼Œè¿™ç§æƒ…å†µéœ€è¦è‡ªå·±é¢å¤–æ³¨æ„ä¼šä¸ä¼šå¼•å…¥æ„å‘ä¸åˆ°çš„BUGã€‚ package main import \"fmt\" var scores = map[string]int{\"Tony\": 95, \"Tom\": 59, \"Sarah\": 79} func main() { switch score := scores[\"Lisa\"]; { case score \u003e 90: fmt.Println(score) fmt.Println(\"excellent\") case score \u003e 80: fmt.Println(\"Pretty good\") case score \u003e 60: fmt.Println(\"not bad\") default: fmt.Println(\"failed\") } } // Lisa doesn't exist, but this program still output failed otherwise 'unknown student'. ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:1:2","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"2 è¿­ä»£æˆ–å¾ªç¯ç»“æ„ ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:2:0","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"2.1 for ä¹ æƒ¯ç”¨æ³•ä¸€ å˜é‡i package main import \"fmt\" func main() { for i := 0; i \u003c 5; i++ { fmt.Printf(\"This is the %d iteration\\n\", i) } } è­¦å‘Š ç‰¹åˆ«æ³¨æ„, æ°¸è¿œä¸è¦åœ¨å¾ªç¯ä½“å†…ä¿®æ”¹è®¡æ•°å™¨ï¼Œè¿™åœ¨ä»»ä½•è¯­è¨€ä¸­éƒ½æ˜¯éå¸¸å·®çš„å®è·µï¼ å¾—ç›Šäº Go è¯­è¨€å…·æœ‰çš„å¹³è¡Œèµ‹å€¼çš„ç‰¹æ€§,==å¯ä»¥åœ¨å¾ªç¯ä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªè®¡æ•°å™¨ï¼š== for i, j := 0, N; i \u003c j; i, j = i+1, j-1 { // do something } ä¹ æƒ¯ç”¨æ³•äºŒ åŸºäºæ¡ä»¶åˆ¤æ–­çš„è¿­ä»£ for ç»“æ„çš„ç¬¬äºŒç§å½¢å¼æ˜¯æ²¡æœ‰å¤´éƒ¨çš„æ¡ä»¶åˆ¤æ–­è¿­ä»£ï¼ˆç±»ä¼¼å…¶å®ƒè¯­è¨€ä¸­çš„ while å¾ªç¯ï¼‰ï¼ŒåŸºæœ¬å½¢å¼ä¸ºï¼šfor æ¡ä»¶è¯­å¥ {}ã€‚ package main import \"fmt\" func main() { var i int = 5 for i \u003e= 0 { i = i - 1 fmt.Printf(\"The variable i is now: %d\\n\", i) } } ä¹ æƒ¯ç”¨æ³•ä¸‰ æ— é™å¾ªç¯ æ¡ä»¶è¯­å¥æ˜¯å¯ä»¥è¢«çœç•¥çš„ï¼Œå¦‚ i:=0; ; i++ æˆ– for { } æˆ– for ;; { }ï¼ˆ;; ä¼šåœ¨ä½¿ç”¨ gofmt æ—¶è¢«ç§»é™¤ï¼‰ï¼šè¿™äº›å¾ªç¯çš„æœ¬è´¨å°±æ˜¯æ— é™å¾ªç¯ã€‚æœ€åä¸€ä¸ªå½¢å¼ä¹Ÿå¯ä»¥è¢«æ”¹å†™ä¸º for true { }ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šç›´æ¥å†™ for { }ã€‚ å¦‚æœ for å¾ªç¯çš„å¤´éƒ¨æ²¡æœ‰æ¡ä»¶è¯­å¥ï¼Œé‚£ä¹ˆå°±ä¼šè®¤ä¸ºæ¡ä»¶æ°¸è¿œä¸º trueï¼Œå› æ­¤å¾ªç¯ä½“å†…å¿…é¡»æœ‰ç›¸å…³çš„æ¡ä»¶åˆ¤æ–­ä»¥ç¡®ä¿ä¼šåœ¨æŸä¸ªæ—¶åˆ»é€€å‡ºå¾ªç¯ã€‚æƒ³è¦ç›´æ¥é€€å‡ºå¾ªç¯ä½“ï¼Œå¯ä»¥ä½¿ç”¨ break è¯­å¥æˆ– return è¯­å¥ç›´æ¥è¿”å›ã€‚ æ— é™å¾ªç¯çš„ç»å…¸åº”ç”¨æ˜¯æœåŠ¡å™¨ï¼Œç”¨äºä¸æ–­ç­‰å¾…å’Œæ¥å—æ–°çš„è¯·æ±‚ã€‚ ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:2:1","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"2.2 for range è¿™æ˜¯ Goçš„ä¸€ç§è¿­ä»£ç»“æ„ï¼Œå®ƒå¯ä»¥è¿­ä»£ä»»ä½•ä¸€ä¸ªé›†åˆï¼ˆåŒ…æ‹¬æ•°ç»„å’Œ mapç­‰ï¼‰ã€‚ ä¸€èˆ¬å½¢å¼ä¸ºï¼šfor ix, val := range coll { }ã€‚ è­¦å‘Š è¦æ³¨æ„çš„æ˜¯ï¼Œval å§‹ç»ˆä¸ºé›†åˆä¸­å¯¹åº”ç´¢å¼•çš„å€¼æ‹·è´ï¼Œå› æ­¤å®ƒä¸€èˆ¬åªå…·æœ‰åªè¯»æ€§è´¨ï¼Œå¯¹å®ƒæ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°é›†åˆä¸­åŸæœ‰çš„å€¼ï¼Œä½†å¦‚æœ val ä¸ºæŒ‡é’ˆï¼Œåˆ™ä¼šäº§ç”ŸæŒ‡é’ˆçš„æ‹·è´ï¼Œä¾æ—§å¯ä»¥ä¿®æ”¹é›†åˆä¸­çš„åŸå€¼ã€‚ package main import \"fmt\" func main() { arr := []int{0, 1, 2, 3} for i, val := range arr { val = val * i fmt.Printf(\"in the loop, %dth element of arr is %d\\n\", i, val) } for i, val := range arr { fmt.Printf(\"after modify operation, %dth element of arr is %d\\n\", i, val) } matrix := [][]int{{1, 2, 3}, {4, 5, 6}} for _, row := range matrix { row[0] += row[0] } fmt.Println(matrix) } //in the loop, 0th element of arr is 0 //in the loop, 1th element of arr is 1 //in the loop, 2th element of arr is 4 //in the loop, 3th element of arr is 9 //after modify operation, 0th element of arr is 0 //after modify operation, 1th element of arr is 1 //after modify operation, 2th element of arr is 2 //after modify operation, 3th element of arr is 3 //[[1 2 3] [16 5 6]] ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:2:2","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"2.3 breakã€continue breakï¼šä½œç”¨èŒƒå›´ä¸ºè¯¥è¯­å¥æœ€åå‡ºç°çš„å†…éƒ¨ç»“æ„ï¼Œå¦‚forã€switchã€select continueï¼š å¿½ç•¥å‰©ä½™çš„å¾ªç¯ä½“ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ¬¡æ˜¯å¦è¿›å…¥å¾ªç¯çš„åˆ¤æ–­ï¼Œåªç”¨äºfor ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:2:3","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"2.4 labelã€goto æ­£å¸¸continueæƒ…å†µä¸‹ï¼Œcontinueåªå¿½è§†å†…å±‚å¾ªç¯ï¼Œè¿˜åº”è¾“å‡ºi is: 0, and j is : 5çš„ç»“æœï¼Œä½†è¿™é‡Œç›´æ¥ä½¿ i å˜æˆä¸‹ä¸€ä¸ªå¾ªç¯çš„å€¼ï¼Œè€Œæ­¤æ—¶ j çš„å€¼å°±è¢«é‡è®¾ä¸º 0ã€‚ func main() { LABEL1: for i := 0; i \u003c= 5; i++ { for j := 0; j \u003c= 5; j++ { if j == 4 { continue LABEL1 } fmt.Printf(\"i is: %d, and j is: %d\\n\", i, j) } } } //i is: 0, and j is: 0 //i is: 0, and j is: 1 //i is: 0, and j is: 2 //i is: 0, and j is: 3 //i is: 1, and j is: 0 //i is: 1, and j is: 1 //i is: 1, and j is: 2 //i is: 1, and j is: 3 //.. å°† continue æ”¹ä¸º breakï¼Œåˆ™ä¸ä¼šåªé€€å‡ºå†…å±‚å¾ªç¯ï¼Œè€Œæ˜¯ç›´æ¥é€€å‡ºå¤–å±‚å¾ªç¯ã€‚ func main() { LABEL1: for i := 0; i \u003c= 5; i++ { for j := 0; j \u003c= 5; j++ { if j == 4 { break LABEL1 } fmt.Printf(\"i is: %d, and j is: %d\\n\", i, j) } } } // i is: 0, and j is: 0 // i is: 0, and j is: 1 // i is: 0, and j is: 2 // i is: 0, and j is: 3 æ ‡ç­¾å’Œgotoè¯­å¥æ˜¯ä¸è¢«é¼“åŠ±çš„ï¼Œåªå»ºè®®ä½¿ç”¨ goto è¯­å¥æ¥è·³å‡ºæ— é™è¯»å–å¾ªç¯å¹¶å…³é—­ç›¸åº”çš„å®¢æˆ·ç«¯é“¾æ¥ã€‚ å¦‚æœå¿…é¡»ä½¿ç”¨ gotoï¼Œåº”å½“åªä½¿ç”¨æ­£åºçš„æ ‡ç­¾ï¼ˆæ ‡ç­¾ä½äº goto è¯­å¥ä¹‹åï¼‰ï¼Œä½†æ³¨æ„æ ‡ç­¾å’Œ goto è¯­å¥ä¹‹é—´ä¸èƒ½å‡ºç°å®šä¹‰æ–°å˜é‡çš„è¯­å¥ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ // compile error goto2.go:8: goto TARGET jumps over declaration of b at goto2.go:8 package main import \"fmt\" func main() { a := 1 goto TARGET // compile error b := 9 TARGET: b += a fmt.Printf(\"a is %v *** b is %v\", a, b) } ","date":"2021-12-16","objectID":"/2021/12/go-ch8/:2:4","tags":null,"title":"Ch8 æ§åˆ¶ç»“æ„","uri":"/2021/12/go-ch8/"},{"categories":["golang"],"content":"åœ¨åˆå­¦æ—¶ï¼Œåˆæ­¥æŒæ¡å‘½ä»¤è¡Œå‚æ•°ã€ä½¿ç”¨Scanæ—å‡½æ•°è¯»å–Stdinï¼Œä½¿ç”¨Printæ—å‡½æ•°å‘Stdoutè¾“å‡ºå³å¯ï¼Œå…³äºè¾“å…¥è¾“å‡ºæ›´å¤šçš„æ“ä½œï¼Œè¯·å‚è€ƒch28 è¿›é˜¶è¾“å…¥è¾“å‡º ","date":"2021-12-14","objectID":"/2021/12/go-ch7/:0:0","tags":null,"title":"Ch7 è¾“å…¥ä¸è¾“å‡º","uri":"/2021/12/go-ch7/"},{"categories":["golang"],"content":"1 å‘½ä»¤è¡Œå‚æ•° osä»¥è·¨å¹³å°çš„æ–¹å¼ï¼Œæä¾›äº†ä¸€äº›ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„å‡½æ•°å’Œå˜é‡ï¼Œç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°å¯ä»¥ä»osåŒ…ä¸­çš„Argså˜é‡è·å–ã€‚os.Argsæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„åˆ‡ç‰‡[]stringï¼Œå…¶ä¸­os.Args[0]æ˜¯æ–‡ä»¶åï¼Œå…¶ä»–å…ƒç´ æ˜¯ç¨‹åºå¯åŠ¨æ—¶ä¼ ç»™å®ƒçš„å‚æ•°ã€‚ package main import ( \"os\" \"fmt\" ) func main() { str := \"\" for _, v := range os.Args { str += \" \" str += v } fmt.Println(str) } ","date":"2021-12-14","objectID":"/2021/12/go-ch7/:1:0","tags":null,"title":"Ch7 è¾“å…¥ä¸è¾“å‡º","uri":"/2021/12/go-ch7/"},{"categories":["golang"],"content":"2 Scanæ—å‡½æ•° å¯ä½¿ç”¨fmtåŒ…æä¾›çš„Scanå¼€å¤´çš„å‡½æ•°ï¼Œä»é”®ç›˜å’Œæ ‡å‡†è¾“å…¥os.Stdinä¸­è¯»å–è¾“å…¥ æ³¨æ„ï¼Scanç±»æ— æ³•è¯»å–ç©ºæ ¼ï¼Œç©ºæ ¼ä¼šè¢«è§†ä¸ºä¸¤ä¸ªå‚æ•°ä¹‹é—´çš„åˆ†éš” Scan: è¯»å…¥ï¼Œç›´åˆ°å…¨éƒ¨å¾—åˆ°å‚æ•° package main import \"fmt\" func main() { var a string var b int fmt.Scan(\u0026a, \u0026b) fmt.Println(a, b) } // input: hello world ç›´æ¥ç»“æŸäº†ï¼Œä¸ç»™è¾“å…¥intå€¼çš„æœºä¼š // output: hello 0 Scanfï¼šå¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ­¤è¾“å…¥æ¨¡å¼ è‹¥æ ¼å¼åŒ–ä¸²å†…å«æœ‰å›è½¦ï¼Œåˆ™åœ¨é”®ç›˜è¾“å…¥æ—¶ï¼Œå¿…é¡»æœ‰ç›¸åº”çš„å›è½¦ç›¸å¯¹åº”ã€‚ æ ¼å¼åŒ–ä¸²å†…çš„ç©ºæ ¼æ•°ç›®å’Œè¾“å…¥ä¸­çš„ç©ºæ ¼æ•°ç›®æ²¡æœ‰å½±å“ã€‚ package main import \"fmt\" func main() { var a string var b int fmt.Scanf(\"%s \\n %d\", \u0026a, \u0026b) fmt.Println(a, b) } // input: hello // 1 // output: hello 1 // input: hello 1 // output: hello 0 Scanlnæ‰«ææ¥è‡ªæ ‡å‡†è¾“å…¥ä¸­ä¸€è¡Œçš„æ–‡æœ¬ï¼Œå°†ç©ºæ ¼åˆ†éš”çš„å€¼ä¾æ¬¡å­˜æ”¾åˆ°åç»­çš„å‚æ•°å†…ï¼Œç›´åˆ°ç¢°åˆ°æ¢è¡Œã€‚ å¦‚æœæ‰«æåˆ°çš„å€¼å°äºå‚æ•°æ•°ç›®ï¼Œåˆ™ç›´æ¥ç»“æŸï¼Œæœªè¢«èµ‹å€¼çš„å‚æ•°ä»ä¸ºåŸæ¥çš„å€¼ï¼ˆæˆ–é»˜è®¤å€¼ï¼‰ã€‚ å¦‚æœæ‰«æåˆ°çš„å€¼å¤šäºå‚æ•°æ•°ç›®ï¼Œä¼šå‡ºç°å¥‡æ€ªçš„é—®é¢˜ï¼Œè§ä¸‹æ–‡ä»£ç ã€‚ package main import \"fmt\" func main() { var a, b, c int fmt.Scanln(\u0026a, \u0026b, \u0026c) fmt.Println(a, b, c) } // input: 1 2 // output: 1 2 0 2ä¹‹åé‡åˆ°å›è½¦ä¸ä¼šç»§ç»­ç­‰å¾…è¾“å…¥ï¼Œç»“æŸScanlnè¯­å¥ // input: 1 2 3 // output: 1 2 3 // input: 1 2 3 4 // output: 1 2 3 package main import \"fmt\" func main() { var a, b, c, d, e int fmt.Scanln(\u0026a, \u0026b, \u0026c) fmt.Println(a, b, c) fmt.Scanln(\u0026d, \u0026e) fmt.Println(d, e) } // input: 1 2 3 4 5 // output: 1 2 3 // 5 0 // å‡ºç°æ­¤ç»“æœçš„åŸå› ï¼Œå¯èƒ½æ˜¯Scanlnå°†è¾“å…¥ç¼“å†²åŒºä¸­çš„4ä¿®æ”¹æˆä¸ºäº†æ¢è¡Œç¬¦ // å› æ­¤ï¼Œä¸ºäº†æ­£ç¡®çš„è¾“å…¥ï¼Œè¾“å…¥4ï¼Œ5æ—¶å¿…é¡»åœ¨æ¢è¡Œç¬¦ä¹‹å ","date":"2021-12-14","objectID":"/2021/12/go-ch7/:2:0","tags":null,"title":"Ch7 è¾“å…¥ä¸è¾“å‡º","uri":"/2021/12/go-ch7/"},{"categories":["golang"],"content":"3 Printæ—å‡½æ•° å¯ä½¿ç”¨fmtåŒ…æä¾›çš„Printå¼€å¤´çš„å‡½æ•°ï¼Œå¯å‘é”®ç›˜å’Œæ ‡å‡†è¾“å‡ºos.Stdoutä¸­è¿›è¡Œè¾“å‡º Printfï¼Œè¾“å‡ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸² å¸¸è§å ä½ç¬¦å¦‚ä¸‹ï¼Œ %bã€%dã€%oã€%x(%X)ï¼šäºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶è¡¨ç¤º %cï¼šç›¸åº”Unciodeç ç‚¹æ‰€è¡¨ç¤ºçš„å­—ç¬¦ %sï¼šå­—ç¬¦ä¸² %tï¼šå¸ƒå°” %gï¼šæµ®ç‚¹æ•° %pï¼šæŒ‡é’ˆï¼Œåå…­è¿›åˆ¶è¡¨ç¤º %Tï¼šå€¼çš„ç±»å‹ %vï¼šå€¼çš„é»˜è®¤æ ¼å¼ bool: %t int, int8 etc.: %d uint, uint8 etc.: %d, %x if printed with %#v float32, complex64, etc: %g string: %s chan: %p pointer: %p â€‹ å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š package main import \"fmt\" func main() { a := 20 b := 3.14 c := \"hi, Bruce\" d := true e := 3 + 4i f := 's' fmt.Printf(\"a:%v, %T, %d\\n\", a, a, a) fmt.Printf(\"b:%v, %T, %f\\n\", b, b, b) fmt.Printf(\"c:%v, %T, %s\\n\", c, c, c) fmt.Printf(\"d:%v, %T, %t\\n\", d, d, d) fmt.Printf(\"e:%v, %T, %g\\n\", e, e, e) fmt.Printf(\"f:%v, %T, %c\\n\", f, f, f) } // a:20, int, 20 // b:3.14, float64, 3.140000 // c:hi, Bruce, string, hi, Bruce // d:true, bool, true // e:(3+4i), complex128, (3+4i) // f:115, int32, s Printç­‰ä»·äºå¯¹æ¯ä¸€ä¸ªæ“ä½œæ•°éƒ½åº”ç”¨%v Println åº”ç”¨%vè¾“å‡ºåˆ°æ§åˆ¶å°å¹¶æ¢è¡Œ ","date":"2021-12-14","objectID":"/2021/12/go-ch7/:3:0","tags":null,"title":"Ch7 è¾“å…¥ä¸è¾“å‡º","uri":"/2021/12/go-ch7/"},{"categories":["golang"],"content":"1 å¸¸é‡ æ¯ä¸ªå¸¸é‡çš„æ½œåœ¨ç±»å‹éƒ½æ˜¯åŸºç¡€ç±»å‹ï¼šå¸ƒå°”ã€å­—ç¬¦ä¸²æˆ–æ•°å­— å¸¸é‡çš„å£°æ˜è¯­å¥å®šä¹‰äº†å¸¸é‡çš„åå­—å’Œæ•°å€¼ å¸¸é‡çš„å€¼åœ¨è¿è¡ŒæœŸé—´ä¸å¯ä¿®æ”¹ å¸¸é‡è¡¨è¾¾å¼çš„å€¼åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œè€Œä¸æ˜¯è¿è¡ŒæœŸ å¸¸é‡é—´çš„è¿ç®—ã€åŒ…æ‹¬ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—å’Œæ¯”è¾ƒè¿ç®—çš„ç»“æœéƒ½æ˜¯å¸¸é‡ï¼Œå¯¹å¸¸é‡çš„ç±»å‹è½¬æ¢æ“ä½œæˆ–ä»¥ä¸‹å‡½æ•°è°ƒç”¨ç»“æœä¹Ÿæ˜¯å¸¸é‡ï¼šlenã€capã€realã€imagã€complexã€å’Œunsafe.Sizeof å¸¸é‡æˆ–å¸¸é‡è¡¨è¾¾å¼çš„å€¼å¯ä»¥æ„æˆç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚æ•°ç»„é•¿åº¦ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:0","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1. 1 Typed and Untyped Constants å¼•ç”¨ ä»¥ä¸‹è‹±æ–‡å†…å®¹æ‘˜æŠ„è‡ªï¼šhttps://blog.csdn.net/pengpengzhou/article/details/107561792 ä¼—æ‰€å‘¨çŸ¥ï¼ŒGoæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æœŸé—´æ¯ä¸€ä¸ªå˜é‡çš„ç±»å‹éƒ½æ˜¯å·²çŸ¥æˆ–å¯æ¨å¯¼çš„ã€‚æ­¤å¤–ï¼Œå³ä½¿æ˜¯int64ç±»å‹å’Œint32ç±»å‹çš„å˜é‡ç›¸åŠ ä¹Ÿéœ€è¦è¿›è¡Œå¼ºç±»å‹è½¬æ¢ã€‚ var myFloat float64 = 21.54 var myInt int = 562 var myInt64 int64 = 120 // var res1 = myFloat + myInt // Not allowed // var res2 = myInt + myInt64 // Not allowed var res1 = myFloat + float64(myInt) var res2 = myInt + int(myInt64) ä½†ï¼Œå¦‚ä¸‹çš„ä»£ç å´æ˜¯åˆæ³•çš„ï¼Œä¸éœ€è¦å¯¹10è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå…¶ä¸­çš„åŸå› åœ¨äºGolangå¯¹äºå¸¸é‡çš„å¤„ç† var myInt32 int32 = 10 var myInt int = 10 var myFloat64 float64 = 10 var myComplex complex64 = 10 ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:1","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.2 Untyped Constants Golangä¸­çš„ä»»ä½•ä¸€ä¸ªå¸¸é‡ï¼Œé™¤éäººä¸ºè®¾ç½®ä¸€ä¸ªç±»å‹ï¼Œå¦åˆ™æ— è®ºæ˜¯æœ‰åå¸¸é‡ï¼ˆç”¨constå®šä¹‰çš„ï¼‰è¿˜æ˜¯æ— åå¸¸é‡ï¼ˆå­—é¢é‡ï¼‰éƒ½æ˜¯untyped 1 // untyped integer constant 4.5 // untyped floating-point constant true // untyped boolean constant \"Hello\" // untyped string constant // æˆ–è€…å¦‚ä¸‹å®šä¹‰ const a = 1 // untyped integer constant const f = 4.5 // untyped floating-point constant const b = true // untyped boolean constant const s = \"Hello\" // untyped string constant You may be confused that Iâ€™m using terms like integer constant, and Iâ€™m also saying that it is untyped. Well yes, the value 1 is an integer, 4.5 is a float, and \"Hello\" is a string. But they are just values. They are not given a fixed type yet, like int32 or float64 or string, that would force them to obey Goâ€™s strict type rules. The fact that the value 1 is untyped allows us to assign it to any variable whose type is compatible with integersï¼ˆstring and boolean are not included) var myInt int = 1 var myFloat float64 = 1 var myComplex complex64 = 1 ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:2","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.3 Constants and Type inferenceï¼šDefault Type Go supports type inference. That is, it can infer the type of a variable from the value that is used to initialize it. So you can declare a variable with an initial value, but without any type information, and Go will automatically determine the type var a = 5 // Go compiler automatically infers the type of the variable `a` But how does it work? Given that constants in Golang are untyped, what will be the type of the variable a in the above example? Will it be int8 or int16 or int32 or int64 or int? Well, it turns out that every untyped constant in Golang has a default type. The default type is used when we assign the constant to a variable that doesnâ€™t have any explicit type available. Following are the default types for various constants in Golang integers (10, 76) int floats (3.14, 7.92) float64 complex numbers (3+5i) complex128 characters (`'a'`, `'â™ '`) rune booleans (true, false) bool strings (â€œHelloâ€) sting So, in the statement var a = 5, since no explicit type information is available, the default type for integer constants is used to determine the type of a, which is int. ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:3","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.4 Typed Constants In Golang, Constants are typed when you explicitly specify the type in the declaration like this const typedInt int = 1 // Typed constant Just like variables, all the rules of Goâ€™s type system applies to typed constant. For example, you cannot assign a typed integer constant to a float variable var myFloat64 float64 = typedInt // Compiler Error With typed constants, you lose all the flexibility that comes with untyped constants like assigning them to any variable of compatible type or mixing them in mathematical operations. So you should declare a type for a constant only if itâ€™s absolutely necessary. Otherwise, just declare constants without a type. ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:4","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.5 Constant Expressions The fact that constants are untyped (unless given a type explicitly) allows you to mix them in any expression freely. So you can have a contant expression containing a mix of various untyped constants as long as those untyped constants are compatible with each other const a = 5 + 7.5 // Valid const b = 12/5 // Valid const c = 'z' + 1 // Valid const d = \"Hey\" + true // Invalid (untyped string constant and untyped boolean constant are not compatible with each other) The evaluation of constant expressions and their result follows certain rules. Letâ€™s look at those rules Rules for constant expressions A comparison operation between two untyped constants always outputs an untyped boolean constant. const a = 7.5 \u003e 5 // true (untyped boolean constant) const b = \"xyz\" \u003c \"uvw\" // false (untyped boolean constant) For any other operation (except shift) If both the operands are of the same type (ex - both are untyped integer constants), the result is also of the same type. For example, the expression 25/2 yields 12 not 12.5. Since both the operands are untyped integers, the result is truncated to an integer. If the operands are of different type, the result is of the operandâ€™s type that is broader as per the rule: integer \u003c rune \u003c floating-point \u003c complex. const a = 25/2 // 12 (untyped integer constant) const b = (6+8i)/2 // (3+4i) (untyped complex constant) Shift operation rules are a bit complex. First of all, there are some requirements The right operand of a shift expression must either have an unsigned integer type or be an untyped constant that can represent a value of type uint. The left operand must either have an integer type or be an untyped constant that can represent a value of type int The rule - If the left operand of a shift expression is an untyped constant, the result is an untyped integer constant; otherwise the result is of the same type as the left operand. const a = 1 \u003c\u003c 5 // 32 (untyped integer constant) const b = int32(1) \u003c\u003c 4 // 16 (int32) const c = 16.0 \u003e\u003e 2 // 4 (untyped integer constant) - 16.0 can represent a value of type `int` const d = 32 \u003e\u003e 3.0 // 4 (untyped integer constant) - 3.0 can represent a value of type `uint` const e = 10.50 \u003c\u003c 2 // ILLEGAL (10.50 can't represent a value of type `int`) const f = 64 \u003e\u003e -2 // ILLEGAL (The right operand must be an unsigned int or an untyped constant compatible with `uint`) æ‘˜è¦ åœ¨ä¸Šè¿°çš„è‹±æ–‡å†…å®¹ä¸­ï¼Œè¯´æ˜äº†å¸¸é‡çš„ä¸¤ç§ç±»å‹ Untyped Constants å’Œ Typed Constants Untyped Constantsï¼šå®è´¨ä¸Šå°±æ˜¯æŒ‡å­—é¢é‡ï¼Œå³100ï¼Œâ€™aâ€™ï¼Œ3.1415ç­‰ã€‚ Typed Constantsï¼šé€šè¿‡å¸¸é‡å£°æ˜ï¼Œå°†å­—é¢é‡å’Œä¸€ä¸ªæ ‡è¯†ç¬¦ç»‘å®šï¼ŒåŒæ—¶æŒ‡å®šç‰¹å®šçš„ç±»å‹ã€‚ åœ¨Goä¸­ï¼Œå¯¹æ¯ç§ç±»å‹çš„å­—é¢é‡æœ‰ä¸€ä¸ªé¢„è®¾çš„ç±»å‹ï¼Œå°†å­—é¢é‡ä¸ç‰¹å®šç±»å‹çš„æ ‡è¯†ç¬¦ç›¸ç»‘å®šæ—¶ï¼Œéœ€è¦è€ƒè™‘å…¼å®¹æ€§ã€‚æ­¤å¤–åœ¨å¸¸é‡è¡¨è¾¾å¼çš„è®¡ç®—ä¸­ä¹Ÿéœ€è¦è€ƒè™‘å­—é¢é‡ä¹‹é—´æ˜¯å¦å¯ä»¥ç›¸äº’å…¼å®¹ã€‚ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:5","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.6 å­—é¢é‡ å­—é¢é‡ï¼Œæ¯”å¦‚1ï¼Œ2.3ï¼Œtrueï¼Œâ€œHello\"ï¼Œå­—é¢é‡ä¹Ÿå¸¸ç§°ä¸ºæœªå‘½åå¸¸é‡ integer constants 100, 67413 floating-point constants 4.56, 128.372 boolean constants true, false rune constants 'C', 'Ã¤' complex constants 2.7i, 3 + 5i string constants \"Hello\", \"Rajeev\" ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:6","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.7 å¸¸é‡å£°æ˜æ ¼å¼ å¦‚æœæ ‡è¯†ç¬¦åä¸åŠ ç±»å‹ï¼Œä¼šæ ¹æ®å³è¾¹çš„å€¼è‡ªåŠ¨æ¨å¯¼ç±»å‹ const pi = 3.1415926 const e = 2.7182 const str string = \"abc\" // æˆ– const ( pi float64 = 3.1415926 e float64 = 2.7182 str string = \"abc\" ) // æ”¯æŒå¹¶è¡Œèµ‹å€¼ const a, b, c = 1, 2, 3 æ‰¹é‡å£°æ˜ï¼šconståŒæ—¶å£°æ˜å¤šä¸ªå¸¸é‡æ—¶ï¼Œå¦‚æœçœç•¥äº†å€¼ï¼Œåˆ™è¡¨ç¤ºä¸ä¸Šä¸€è¡Œç›¸åŒ const ( n1 = 100 n2 n3 ) æ³¨æ„äº‹é¡¹ï¼š ä¸å¯ä»¥ç”¨è‡ªå®šä¹‰çš„å‡½æ•°ç»™å¸¸é‡èµ‹å€¼ï¼Œä½†å†…ç½®å‡½æ•°å¯ä»¥ï¼Œä¾‹å¦‚len() const testConst = \"test\" const c1 = len(testConst) const c1 = len([]int{2, 3, 4}) // len(([]int literal)) (value of type int) is not constant const c2 = getNumber() // getNumber() (value of type int) is not constant func getNumber() int { return 1 } ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:7","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.8 iotaå¸¸é‡ç”Ÿæˆå™¨ iotaæ˜¯goè¯­è¨€çš„å¸¸é‡è®¡æ•°å™¨ï¼Œåªèƒ½åœ¨å¸¸é‡çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ iotaåœ¨constå…³é”®å­—å‡ºç°æ—¶å°†è¢«é‡ç½®ä¸º0ã€‚ constä¸­æ¯æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜å°†ä½¿iotaè®¡æ•°ä¸€æ¬¡(iotaå¯ç†è§£ä¸ºconstè¯­å¥å—ä¸­çš„è¡Œç´¢å¼•)ã€‚ ä½¿ç”¨iotaèƒ½ç®€åŒ–å®šä¹‰ï¼Œåœ¨å®šä¹‰æšä¸¾æ—¶å¾ˆæœ‰ç”¨ã€‚ å¸¸è§iotaç¤ºä¾‹: æšä¸¾ type Weekday int const ( Sunday Weekday = iota Monday Tuesday Wednesday Thursday Friday Saturday ) ä½¿ç”¨_è·³è¿‡æŸäº›å€¼ const ( n1 = iota //0 n2 //1 _ n4 //3 ) åœ¨iotaä¸­æ’é˜Ÿ const ( n1 = iota //0 n2 = 100 //100 n3 = iota //2 n4 //3 ) const n5 = iota //0 ä½¿ç”¨iotaå®šä¹‰æ•°é‡çº§ const ( _ = 1 \u003c\u003c (10 * iota) KiB // 1024 2^10 MiB // 1048576 2^20 GiB // 1073741824 2^30 TiB // 1099511627776 2^40 PiB // 1125899906842624 2^50 EiB // 1152921504606846976 2^60 ZiB // 1180591620717411303424 2^70 YiB // 1208925819614629174706176 2^80 ) // æ³¨æ„KBå’ŒKiBçš„åŒºåˆ« const ( KB = 1000 MB = 1000 * KB GB = 1000 * MB PB = 1000 * GB ) å¤šä¸ªiotaå®šä¹‰åœ¨ä¸€è¡Œ const ( a, b = iota + 1, iota + 2 //1,2 iota = 1 c, d //2,3 iota = 2 e, f //3,4 iota = 3 ) å–æ¶ˆiota // èµ‹å€¼ä¸€ä¸ªå¸¸é‡æ—¶ï¼Œä¹‹åæ²¡èµ‹å€¼çš„å¸¸é‡éƒ½ä¼šåº”ç”¨ä¸Šä¸€è¡Œçš„èµ‹å€¼è¡¨è¾¾å¼ const ( a = iota // a = 0 b // b = 1 c // c = 2 d = 5 // d = 5 e // e = 5 ) ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:8","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1.9 å…¶ä»– ä»¥ä¸‹ä»£ç ä¸­ï¼Œå¸¸é‡çš„å®šä¹‰å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„åŸºç¡€ç±»å‹ï¼Œæ­¤æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¸ºè¿™äº›æ²¡æœ‰æ˜ç¡®åŸºç¡€ç±»å‹çš„æ•°å­—å¸¸é‡æä¾›æ¯”åŸºç¡€ç±»å‹æ›´é«˜ç²¾åº¦çš„ç®—æœ¯è¿ç®— åæ–œæ \\å¯ä»¥åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½œä¸ºå¤šè¡Œçš„è¿æ¥ç¬¦ä½¿ç”¨ æ•°å­—å‹çš„å¸¸é‡æ— éœ€æ‹…å¿ƒç±»å‹è½¬æ¢é—®é¢˜ï¼Œå®ƒä»¬éƒ½æ˜¯éå¸¸ç†æƒ³çš„æ•°å­— å½“å¸¸é‡èµ‹å€¼ç»™ä¸€ä¸ªç²¾åº¦è¿‡å°çš„æ•°å­—å‹å˜é‡æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºæ— æ³•æ­£ç¡®è¡¨ç¤ºè€Œå¯¼è‡´æº¢å‡ºï¼Œä¼šåœ¨ç¼–è¯‘æœŸé—´å¼•å‘é”™è¯¯ const PI = 3.1415926 const Ln2 = 0.693147180559945309417232121458176568075500134360255254120680009 // æŠ¥é”™ï¼Œå¯èƒ½æ˜¯å·²ç»ç§»é™¤äº†è¿™ç§è¯­æ³• // const Ln2 = 0.693147180559945309417232121458\\ // 176568075500134360255254120680009 const Log2E = 1/Ln2 // this is a precise reciprocal const Billion = 1e9 // float constant const hardEight = (1 \u003c\u003c 100) \u003e\u003e 97 ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:1:9","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2 å˜é‡ ä¸åŒäºPHPå’ŒPython, Golangæ˜¯é™æ€ç±»å‹è¯­è¨€ å˜é‡å¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ Goè¯­è¨€åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¯¹å˜é‡å¯¹åº”çš„å†…å­˜åŒºåŸŸè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚æ¯ä¸ªå˜é‡ä¼šè¢«åˆå§‹åŒ–æˆå…¶ç±»å‹çš„é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼š æ•´å‹å’Œæµ®ç‚¹å‹å˜é‡çš„é»˜è®¤å€¼ä¸º0ã€‚ å­—ç¬¦ä¸²å˜é‡çš„é»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ å¸ƒå°”å‹å˜é‡é»˜è®¤ä¸ºfalseã€‚ åˆ‡ç‰‡ã€å‡½æ•°ã€æŒ‡é’ˆå˜é‡çš„é»˜è®¤ä¸ºnilã€‚ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:0","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.1 å˜é‡ä½œç”¨åŸŸ ä¸€ä¸ªå˜é‡ï¼ˆå¸¸é‡ã€ç±»å‹æˆ–å‡½æ•°ï¼‰åœ¨ç¨‹åºä¸­éƒ½æœ‰ä¸€å®šçš„ä½œç”¨èŒƒå›´ï¼Œç§°ä¹‹ä¸ºä½œç”¨åŸŸã€‚ å¦‚æœä¸€ä¸ªå˜é‡åœ¨å‡½æ•°ä½“å¤–å£°æ˜ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯å…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨æ•´ä¸ªåŒ…ï¼ˆè¢«å¯¼å‡ºåå¯ä»¥åœ¨å¤–éƒ¨åŒ…ï¼‰ä½¿ç”¨ã€‚ åœ¨å‡½æ•°ä½“å†…å£°æ˜çš„å˜é‡ç§°ä¹‹ä¸ºå±€éƒ¨å˜é‡ï¼Œå®ƒä»¬çš„ä½œç”¨åŸŸåªåœ¨å‡½æ•°ä½“å†…ï¼Œå‚æ•°å’Œè¿”å›å€¼å˜é‡ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸå¯ä»¥é€šè¿‡ä»£ç å—ï¼ˆç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†ï¼‰åˆ¤æ–­ã€‚ å¯ä»¥åœ¨æŸä¸ªä»£ç å—çš„å†…å±‚ä»£ç å—ä¸­ä½¿ç”¨ç›¸åŒåç§°çš„å˜é‡ï¼Œåˆ™æ­¤æ—¶å¤–éƒ¨çš„åŒåå˜é‡å°†ä¼šæš‚æ—¶éšè—ã€‚ å…³äºä½œç”¨åŸŸçš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒå¦‚ä¸‹æ–‡ç« ch14 åŒ…ä¸å˜é‡ä½œç”¨åŸŸ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:1","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.2 å£°æ˜æ ¼å¼ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGo å’Œè®¸å¤šç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œå®ƒåœ¨å£°æ˜å˜é‡æ—¶å°†å˜é‡çš„ç±»å‹æ”¾åœ¨å˜é‡çš„åç§°ä¹‹åã€‚ é¦–å…ˆï¼Œå®ƒæ˜¯ä¸ºäº†é¿å…åƒ C è¯­è¨€ä¸­é‚£æ ·å«ç³Šä¸æ¸…çš„å£°æ˜å½¢å¼ï¼Œä¾‹å¦‚ï¼šint* a, b;ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰ a æ˜¯æŒ‡é’ˆè€Œ b ä¸æ˜¯ã€‚å¦‚æœä½ æƒ³è¦è¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æŒ‡é’ˆï¼Œåˆ™éœ€è¦å°†å®ƒä»¬åˆ†å¼€ä¹¦å†™ã€‚å…¶æ¬¡ï¼Œè¿™ç§è¯­æ³•èƒ½å¤ŸæŒ‰ç…§ä»å·¦è‡³å³çš„é¡ºåºé˜…è¯»ï¼Œä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“ç†è§£ã€‚ æ ‡å‡†å£°æ˜æ ¼å¼ var name string æ‰¹é‡å£°æ˜æ ¼å¼ var( name string //\"\" age int //0 isOk bool //false ) // è¿™ç§å› å¼åˆ†è§£å…³é”®å­—çš„å†™æ³•ä¸€èˆ¬ç”¨äºå£°æ˜å…¨å±€å˜é‡ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:2","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.3 åˆå§‹åŒ– å¯åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šåˆå§‹å€¼ã€‚å˜é‡åˆå§‹åŒ–çš„æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š var å˜é‡å ç±»å‹ = è¡¨è¾¾å¼ ä¸¾ä¸ªä¾‹å­ï¼š var name string = \"Q1mi\" var age int = 18 ä¸€æ¬¡åˆå§‹åŒ–å¤šä¸ªå˜é‡ var name,age = \"QImi\",20 ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:3","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.4 ç±»å‹æ¨å¯¼ æœ‰æ—¶ä¼šå°†å˜é‡çš„ç±»å‹çœç•¥ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šæ ¹æ®ç­‰å·å³è¾¹çš„å€¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹å®Œæˆåˆå§‹åŒ– // å˜é‡ç±»å‹åœ¨ç¼–è¯‘æ—¶å®ç°è‡ªåŠ¨æ¨æ–­ var name = \"Qimi\" var age = 18 // å˜é‡ç±»å‹åœ¨è¿è¡Œæ—¶å®ç°è‡ªåŠ¨æ¨æ–­ var ( HOME = os.Getenv(\"HOME\") USER = os.Getenv(\"USER\") GOROOT = os.Getenv(\"GOROOT\") ) ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:4","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.5 çŸ­å˜é‡å£°æ˜ è¿™æ˜¯ä½¿ç”¨å˜é‡çš„é¦–é€‰å½¢å¼ï¼Œä½†åªèƒ½è¢«ç”¨åœ¨å‡½æ•°ä½“å†…ï¼Œä¸å¯ä»¥ç”¨äºå…¨å±€å˜é‡çš„å£°æ˜ä¸èµ‹å€¼ã€‚ ä½¿ç”¨æ“ä½œç¬¦ := å¯ä»¥é«˜æ•ˆåœ°åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œç§°ä¹‹ä¸ºåˆå§‹åŒ–å£°æ˜ã€‚ åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€ç•¥çš„ := æ–¹å¼å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ package main import \"fmt\" var m=100 func main(){ m := 10 //å±€éƒ¨å˜é‡ n := 20 fmt.Println(m,n) } æ³¨æ„ï¼šå±€éƒ¨å˜é‡å£°æ˜ä¹‹åå¿…é¡»ä½¿ç”¨ï¼Œå•çº¯çš„èµ‹å€¼ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œå…¨å±€å˜é‡å…è®¸å£°æ˜ä½†ä¸ä½¿ç”¨ ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:5","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.6 åŒ¿åå˜é‡ åœ¨ä½¿ç”¨å¤šé‡èµ‹å€¼æ—¶ï¼Œå¦‚æœæƒ³è¦å¿½ç•¥æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå˜é‡ï¼ˆanonymous variableï¼‰ã€‚ åŒ¿åå˜é‡ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿_è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š func foo() (int, string) { return 10, \"Q1mi\" } func main() { x, _ := foo() _, y := foo() fmt.Println(\"x=\", x) fmt.Println(\"y=\", y) } åŒ¿åå˜é‡ä¸å ç”¨å‘½åç©ºé—´ï¼Œä¸ä¼šåˆ†é…å†…å­˜ï¼Œæ‰€ä»¥åŒ¿åå˜é‡ä¹‹é—´ä¸å­˜åœ¨é‡å¤å£°æ˜ã€‚ (åœ¨Luaç­‰ç¼–ç¨‹è¯­è¨€é‡Œï¼ŒåŒ¿åå˜é‡ä¹Ÿè¢«å«åšå“‘å…ƒå˜é‡ã€‚) ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:6","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"2.7 initå‡½æ•°ä¸­çš„å˜é‡åˆå§‹åŒ– å˜é‡é™¤äº†å¯ä»¥åœ¨å…¨å±€å£°æ˜ä¸­åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨ init å‡½æ•°ä¸­åˆå§‹åŒ–ã€‚ è¿™æ˜¯ä¸€ç±»éå¸¸ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒä¸èƒ½å¤Ÿè¢«äººä¸ºè°ƒç”¨ï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªåŒ…å®Œæˆåˆå§‹åŒ–åè‡ªåŠ¨æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œä¼˜å…ˆçº§æ¯” main å‡½æ•°é«˜ã€‚ æ¯ä¸ªæºæ–‡ä»¶éƒ½åªèƒ½åŒ…å«ä¸€ä¸ª init å‡½æ•°ã€‚åˆå§‹åŒ–æ€»æ˜¯ä»¥å•çº¿ç¨‹æ‰§è¡Œï¼Œå¹¶ä¸”æŒ‰ç…§åŒ…çš„ä¾èµ–å…³ç³»é¡ºåºæ‰§è¡Œã€‚ ä¸€ä¸ªå¯èƒ½çš„ç”¨é€”æ˜¯åœ¨å¼€å§‹æ‰§è¡Œç¨‹åºä¹‹å‰å¯¹æ•°æ®è¿›è¡Œæ£€éªŒæˆ–ä¿®å¤ï¼Œä¿è¯ç¨‹åºçŠ¶æ€çš„æ­£ç¡®æ€§ã€‚ package trans import \"math\" var Pi float64 func init() { Pi = 4 * math.Atan(1) // init() function computes Pi } package main import ( \"fmt\" _ \"chao/trans\" ) var twoPi = 2 * trans.Pi func main() { fmt.Printf(\"2*Pi = %g\\n\", twoPi) // 2*Pi = 6.283185307179586 } init å‡½æ•°ä¹Ÿç»å¸¸è¢«ç”¨åœ¨å½“ä¸€ä¸ªç¨‹åºå¼€å§‹ä¹‹å‰è°ƒç”¨åå°æ‰§è¡Œçš„ goroutineï¼Œå¦‚ä¸‹é¢ä¾‹å­ä¸­çš„ backend()ï¼š func init() { // setup preparations go backend() } ","date":"2021-12-12","objectID":"/2021/12/go-ch6/:2:7","tags":null,"title":"Ch6 å¸¸é‡ä¸å˜é‡","uri":"/2021/12/go-ch6/"},{"categories":["golang"],"content":"1 ç®—æœ¯è¿ç®—ç¬¦ ç®—æ•°è¿ç®—ç¬¦åŒ…æ‹¬+,-,*,/,% æ³¨æ„ ++è‡ªå¢å’Œ-è‡ªå‡åœ¨Goè¯­è¨€ä¸­æ˜¯å•ç‹¬çš„è¯­å¥ï¼Œå¹¶ä¸æ˜¯è¿ç®—ç¬¦ å–æ¨¡è¿ç®—ç¬¦%ä»…ç”¨äºæ•´æ•°é—´çš„è¿ç®— æ•´æ•°é™¤ä»¥0å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒï¼Œä¼šå¼•å‘panicï¼›æµ®ç‚¹æ•°é™¤ä»¥0.0ä¼šè¿”å›ä¸€ä¸ªæ— ç©·å°½çš„ç»“æœï¼Œä½¿ç”¨+Infè¡¨ç¤º /å¯¹äºæ•´æ•°è¿ç®—è€Œè¨€ï¼Œç»“æœä¾æ—§ä¸ºæ•´æ•°ï¼Œä¼šå‘ç€0æ–¹å‘æˆªæ–­ä½™æ•° Goåœ¨è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ—¶å…è®¸ä½¿ç”¨å¯¹è¿ç®—ç¬¦+çš„é‡è½½ï¼Œä½†Goæœ¬èº«ä¸å…è®¸å¼€å‘è€…è¿›è¡Œè‡ªå®šä¹‰çš„è¿ç®—ç¬¦é‡è½½ åœ¨è¿ç®—æ—¶æº¢å‡ºä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼ŒGoä¼šç®€å•åœ°å°†è¶…å‡ºä½æ•°æŠ›å¼ƒï¼Œå¦‚æœéœ€è¦èŒƒå›´æ— é™å¤§çš„æ•´æ•°æˆ–è€…æœ‰ç†æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„bigåŒ…ï¼Œè¯¥åŒ…æä¾›äº†ç±»ä¼¼big.Intå’Œbig.Ratè¿™æ ·çš„ç±»å‹ã€‚ ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:1:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"2 å…³ç³»è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦åŒ…æ‹¬==,!=,\u003e,\u003e=,\u003c,\u003c= å¸ƒå°”å‹ã€æ•°å­—ç±»å‹å’Œå­—ç¬¦ä¸²ç­‰åŸºæœ¬ç±»å‹éƒ½æ˜¯å¯æ¯”è¾ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªç›¸åŒç±»å‹çš„å€¼å¯ä»¥ç”¨==å’Œ!=è¿›è¡Œæ¯”è¾ƒ ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:2:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"3 é€»è¾‘è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦åŒ…æ‹¬\u0026\u0026ã€||ã€! åœ¨æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œä½¿ç”¨%tæ¥è¡¨ç¤ºè¦è¾“å‡ºçš„å€¼ä¸ºå¸ƒå°”å‹ åœ¨Goè¯­è¨€ä¸­ï¼Œ\u0026\u0026å’Œ||æ˜¯å…·æœ‰å¿«æ·æ€§è´¨çš„è¿ç®—ç¬¦ï¼ˆçŸ­è·¯æ€§è´¨ï¼‰ï¼Œå½“è¿ç®—ç¬¦å·¦è¾¹è¡¨è¾¾å¼çš„å€¼å·²ç»èƒ½å¤Ÿå†³å®šæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼æ—¶ï¼Œè¿ç®—ç¬¦å³è¾¹çš„è¡¨è¾¾å¼ä¸ä¼šè¢«æ‰§è¡Œã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåº”å½“å°†è®¡ç®—è¿‡ç¨‹è¾ƒä¸ºå¤æ‚çš„è¡¨è¾¾å¼æ”¾åœ¨è¿ç®—ç¬¦çš„å³ä¾§ã€‚ ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:3:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"4 ä½è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦å¯¹æ•´æ•°åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œ ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:4:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"4.1 ä¸€å…ƒè¿ç®—ç¬¦ ^ æŒ‰ä½å–å \u003c\u003c bitPçš„ä½å‘å·¦ç§»åŠ¨nä½ï¼Œç®—æœ¯ä¸Šå·¦ç§»nä½ç­‰ä»·äºä¹˜ä»¥2çš„næ¬¡æ–¹ \u003e\u003e bitPçš„ä½å‘å³ç§»åŠ¨nä½ï¼Œç®—æœ¯ä¸Šå³ç§»nä½ç­‰ä»·äºé™¤ä»¥2çš„næ¬¡æ–¹ å¯¹äºæ— ç¬¦å·æ•°ï¼Œå·¦ç§»å’Œå³ç§»éƒ½æ˜¯ç”¨0å¡«å……ç©ºç¼ºçš„bitä½ å¯¹äºæœ‰ç¬¦å·æ•°ï¼Œå³ç§»è¿ç®—ä¼šç”¨ç¬¦å·ä½çš„å€¼å¡«å……å·¦è¾¹ç©ºç¼ºçš„bitä½ å› æ­¤ï¼Œæœ€å¥½ç”¨æ— ç¬¦å·è¿ç®—ï¼Œè¿™æ ·å¯ä»¥å°†æ•´æ•°å®Œå…¨å½“ä½œä¸€ä¸ªbitä½æ¨¡å¼å¤„ç† ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:4:1","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"4.2 äºŒå…ƒè¿ç®—ç¬¦ \u0026 å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸ä¸ | å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸æˆ– ^ å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æˆ–ï¼Œç›¸å¼‚ä¸º1 \u0026^ ä½æ¸…é™¤è¿ç®—ï¼Œå°†æŒ‡å®šä½ç½®ä¸Šçš„å€¼è®¾ç½®ä½0 ä½æ¸…ç©ºæ“ä½œï¼ša \u0026^ bï¼Œåœ¨aä¸­ï¼Œå°†ä¸€äº›ä½ç½®çš„å€¼è®¾ç½®ä¸º0ï¼Œè€Œè¿™äº›ä½ç½®ç”±bç¡®å®šã€‚bç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼ŒäºŒè¿›åˆ¶ä¸º1çš„ä½ç½®å°±æ˜¯aä¸­è¦æ¸…ç©ºçš„ä½ç½®ã€‚ package main import \"fmt\" func main() { a := 12 b := 4 c := a \u0026^ b fmt.Printf(\"a: %08b\\n\", a) fmt.Printf(\"bï¼š%08b\\n\", b) fmt.Printf(\"c: %#v äºŒè¿›åˆ¶ï¼š%08b\\n\",c,c) /*è¾“å‡ºï¼š a: 00001100 bï¼š00000100 c: 8 äºŒè¿›åˆ¶ï¼š00001000 */ } ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:4:2","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"5 èµ‹å€¼è¿ç®—ç¬¦ èµ‹å€¼è¿ç®—ç¬¦åŒ…æ‹¬=ï¼Œ+=ï¼Œ-=ï¼Œ*=ï¼Œ/=ï¼Œ%=ï¼Œ\u003c\u003c=ï¼Œ\u003e\u003e=ï¼Œ\u0026=ï¼Œ|=ï¼Œ^= ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:5:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"6 è¿ç®—ç¬¦ä¸ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ è¿ç®—ç¬¦ 7 ^ ! (ä¸€å…ƒè¿ç®—ç¬¦) 6 * / % \u003c\u003c \u003e\u003e \u0026 \u0026^ 5 + - | ^ 4 == != \u003c \u003c= \u003e= \u003e 3 \u003c- 2 \u0026\u0026 1 || åœ¨åŒä¸€ä¸ªä¼˜å…ˆçº§ä¸­ï¼Œä½¿ç”¨å·¦ä¼˜å…ˆç»“åˆè§„åˆ™ï¼Œ ä½†æ˜¯ä½¿ç”¨æ‹¬å·å¯ä»¥æ˜ç¡®ä¼˜å…ˆé¡ºåºï¼Œä¹Ÿå¯ä»¥ç”¨äºæå‡ä¼˜å…ˆçº§ï¼Œæ¯”å¦‚mask \u0026 (1 \u003c\u003c 28) å…³äº \u003c- è¿ç®—ç¬¦çš„æ›´å¤šä¿¡æ¯å‚è€ƒch22 é€šé“ ","date":"2021-12-11","objectID":"/2021/12/go-ch5/:6:0","tags":null,"title":"Ch5 è¿ç®—ç¬¦","uri":"/2021/12/go-ch5/"},{"categories":["golang"],"content":"å…³äºGoè¯­è¨€ä¸­çš„ç±»å‹ å¼•ç”¨ Goè¯­è¨€ä¸­çš„ç±»å‹å¯ä»¥æ˜¯ åŸºæœ¬ç±»å‹ï¼Œå¦‚ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ã€å­—ç¬¦ä¸²ç­‰ å¤åˆç±»å‹ï¼Œå¦‚ï¼šæ•°ç»„ã€ç»“æ„ä½“ç­‰ å¼•ç”¨ç±»å‹ï¼Œå¦‚ï¼šæŒ‡é’ˆã€åˆ‡ç‰‡ã€å­—å…¸ã€å‡½æ•°ã€é€šé“ç­‰ æ¥å£ç±»å‹ï¼Œå¦‚ï¼šæ¥å£ç­‰ ä»¥ä¸Šå†…å®¹æ‘˜è‡ª https://topgoer.cn/docs/gopl-zh/gopl-zh-1d2a096ino06l å¼•ç”¨ ç±»å‹å¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œå¦‚ï¼šintã€floatã€boolã€stringï¼›ç»“æ„åŒ–çš„ï¼ˆå¤åˆçš„ï¼‰ï¼Œå¦‚ï¼šstructã€arrayã€sliceã€mapã€channelï¼›åªæè¿°ç±»å‹çš„è¡Œä¸ºçš„ï¼Œå¦‚ï¼šinterfaceã€‚ ç»“æ„åŒ–çš„ç±»å‹æ²¡æœ‰çœŸæ­£çš„å€¼ï¼Œå®ƒä½¿ç”¨ nil ä½œä¸ºé»˜è®¤å€¼ï¼ˆåœ¨ Objective-C ä¸­æ˜¯ nilï¼Œåœ¨ Java ä¸­æ˜¯ nullï¼Œåœ¨ C å’Œ C++ ä¸­æ˜¯NULLæˆ– 0ï¼‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGo è¯­è¨€ä¸­ä¸å­˜åœ¨ç±»å‹ç»§æ‰¿ã€‚ ä»¥ä¸Šå†…å®¹æ‘˜è‡ª https://github.com/unknwon/the-way-to-go_ZH_CN/blob/master/eBook/04.2.md å¼•ç”¨ å…¶ä»–ç›¸å…³çš„åˆ†ç±»ï¼šhttps://gfw.go101.org/article/type-system-overview.html å…³äºç±»å‹çš„è¯´æ³•å¾ˆå¤šï¼Œä¸ªäººè®¤ä¸ºéœ€è¦è®°ä½çš„æ˜¯å¦‚ä¸‹å†…å®¹ å€¼ç±»å‹ï¼Œå¦‚ï¼šintã€floatã€boolã€stringã€arrayã€struct å¼•ç”¨ç±»å‹ï¼Œå¦‚ï¼šptrã€sliceã€mapã€channelã€funcã€interface å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹çš„åŒºåˆ«ï¼š å€¼ç±»å‹å˜é‡ç›´æ¥å­˜å‚¨å€¼ï¼Œå†…å­˜é€šå¸¸åœ¨æ ˆä¸­åˆ†é… å¼•ç”¨ç±»å‹å˜é‡å­˜å‚¨ä¸€ä¸ªåœ°å€ï¼ˆé»˜è®¤å€¼ä¸ºnilï¼‰ï¼Œå†…å­˜é€šå¸¸åœ¨å †ä¸Šåˆ†é… å…·ä½“åœ°ï¼Œè¯·å‚è€ƒGo å†…å­˜ç®¡ç†æœºåˆ¶ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:0:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1 æ•°å­— ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:1:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1.1 æ•´å‹ uint8 æ— ç¬¦å· 8ä½æ•´å‹ (0 åˆ° 255) uint16 æ— ç¬¦å· 16ä½æ•´å‹ (0 åˆ° 65535) uint32 æ— ç¬¦å· 32ä½æ•´å‹ (0 åˆ° 4294967295) uint64 æ— ç¬¦å· 64ä½æ•´å‹ (0 åˆ° 18446744073709551615) int8 æœ‰ç¬¦å· 8ä½æ•´å‹ (-128 åˆ° 127) int16 æœ‰ç¬¦å· 16ä½æ•´å‹ (-32768 åˆ° 32767) int32 æœ‰ç¬¦å· 32ä½æ•´å‹ (-2147483648 åˆ° 2147483647) int64 æœ‰ç¬¦å· 64ä½æ•´å‹ (-9223372036854775808 åˆ° 9223372036854775807) uint 32ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯uint32ï¼Œ64ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯uint64 int 32ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯int32ï¼Œ64ä½æ“ä½œç³»ç»Ÿä¸Šå°±æ˜¯int64 uintptr æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ æ³¨æ„äº‹é¡¹ï¼š åœ¨ä½¿ç”¨intå’Œuintç±»å‹æ—¶ï¼Œä¸èƒ½å‡å®šå®ƒæ˜¯32ä½æˆ–è€…64ä½çš„æ•´å‹ï¼Œè€Œæ˜¯è€ƒè™‘intå’Œuintå¯èƒ½åœ¨ä¸åŒå¹³å°ä¸Šçš„å·®å¼‚ã€‚ uintptræ²¡æœ‰æŒ‡å®šå…·ä½“çš„bitå¤§å°ï¼Œä½†æ˜¯è¶³å¤Ÿå®¹çº³æŒ‡é’ˆï¼Œä¸€èˆ¬åªæœ‰åœ¨åº•å±‚ç¼–ç¨‹æ—¶æ‰éœ€è¦ï¼Œç‰¹åˆ«æ˜¯Goè¯­è¨€å’ŒCè¯­è¨€å‡½æ•°åº“æˆ–æ“ä½œç³»ç»Ÿæ¥å£ç›¸äº¤äº’çš„åœ°æ–¹ã€‚ è·å–å¯¹è±¡çš„é•¿åº¦çš„å†…å»ºlen()å‡½æ•°è¿”å›çš„é•¿åº¦å¯ä»¥æ ¹æ®ä¸åŒå¹³å°çš„å­—èŠ‚é•¿åº¦è¿›è¡Œå˜åŒ–ã€‚å®é™…ä½¿ç”¨ä¸­ï¼Œmapæˆ–åˆ‡ç‰‡çš„å…ƒç´ æ•°é‡ç­‰éƒ½å¯ä»¥ç”¨intè¡¨ç¤ºã€‚ ä½†æ˜¯åœ¨æ¶‰åŠåˆ°äºŒè¿›åˆ¶ä¼ è¾“ï¼Œè¯»å†™æ–‡ä»¶çš„ç»“æ„æè¿°æ—¶ï¼Œä¸ºäº†ä¿æŒæ–‡ä»¶çš„ç»“æ„ä¸ä¼šå—åˆ°ä¸åŒç¼–è¯‘ç›®æ ‡å¹³å°å­—èŠ‚é•¿åº¦çš„å½±å“ï¼Œä¸è¦ä½¿ç”¨intå’Œuintã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:1:1","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1.2 æµ®ç‚¹æ•° Goè¯­è¨€æ”¯æŒä¸¤ç§æµ®ç‚¹å‹æ•°ï¼šfloat32å’Œfloat64ã€‚è¿™ä¸¤ç§æµ®ç‚¹å‹æ•°æ®æ ¼å¼éµå¾ªIEEE 754æ ‡å‡†ï¼šfloat32æµ®ç‚¹æ•°çš„æœ€å¤§èŒƒå›´çº¦ä¸º3.4e38ï¼Œå¸¸é‡å®šä¹‰ä¸ºmath.MaxFloat32; float64æµ®ç‚¹æ•°çš„æœ€å¤§èŒƒå›´çº¦ä¸º1.8e308ï¼Œå¸¸é‡å®šä¹‰ä¸ºmath.MaxFloat64 float32ç²¾ç¡®åˆ°å°æ•°ç‚¹å7ä½ï¼Œfloat64ç²¾ç¡®åˆ°å°æ•°ç‚¹å15ä½ã€‚ä½¿ç”¨==æˆ–!=æ¥æ¯”è¾ƒæµ®ç‚¹æ•°æ—¶åº”å½“éå¸¸å°å¿ƒï¼Œåœ¨æ­£å¼ä½¿ç”¨å‰æµ‹è¯•å¯¹äºç²¾ç¡®åº¦è¦æ±‚æ¯”è¾ƒé«˜çš„è¿ç®—ã€‚ mathåŒ…ä¸­é™¤äº†æä¾›å¤§é‡å¸¸ç”¨çš„æ•°å­¦å‡½æ•°å¤–ï¼Œè¿˜æä¾›äº†IEEE754æµ®ç‚¹æ•°æ ‡å‡†ä¸­å®šä¹‰çš„ç‰¹æ®Šå€¼çš„åˆ›å»ºå’Œæµ‹è¯• +Infå’Œ-Inf åˆ†åˆ«è¡¨ç¤ºæ­£æ— ç©·å¤§å’Œè´Ÿæ— ç©·å¤§ NaNéæ•°ï¼Œä¸€èˆ¬ç”¨äºè¡¨ç¤ºæ— æ•ˆçš„é™¤æ³•æ“ä½œç»“æœ0/0æˆ–Sqrt(-1). var z float64 fmt.Println(z, -z, 1/z, -1/z, z/z) // \"0 -0 +Inf -Inf NaN\" å‡½æ•°math.IsNaNç”¨äºæµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯éæ•°NaNï¼Œmath.NaNåˆ™è¿”å›éæ•°å¯¹åº”çš„å€¼ã€‚ è™½ç„¶å¯ä»¥ç”¨math.NaNæ¥è¡¨ç¤ºä¸€ä¸ªéæ³•çš„ç»“æœï¼Œä½†æ˜¯æµ‹è¯•ä¸€ä¸ªç»“æœæ˜¯å¦æ˜¯éæ•°NaNåˆ™æ˜¯å……æ»¡é£é™©çš„ï¼Œå› ä¸ºNaNå’Œä»»ä½•æ•°éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼ˆåœ¨æµ®ç‚¹æ•°ä¸­ï¼ŒNaNã€æ­£æ— ç©·å¤§å’Œè´Ÿæ— ç©·å¤§éƒ½ä¸æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªéƒ½æœ‰éå¸¸å¤šç§çš„bitæ¨¡å¼è¡¨ç¤ºï¼‰ï¼š nan := math.NaN() fmt.Println(nan == nan, nan \u003c nan, nan \u003e nan) // \"false false false\" å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›çš„æµ®ç‚¹æ•°ç»“æœå¯èƒ½å¤±è´¥ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ç”¨å•ç‹¬çš„æ ‡å¿—æŠ¥å‘Šå¤±è´¥ï¼Œåƒè¿™æ ·ï¼š func compute() (value float64, ok bool) { // ... if failed { return 0, false } return result, true } ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:1:2","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1.3 å¤æ•° complex64å’Œcomplex128 å¤æ•°æœ‰å®éƒ¨å’Œè™šéƒ¨ï¼Œcomplex64çš„å®éƒ¨å’Œè™šéƒ¨ä¸ºfloat32ï¼Œcomplex128çš„å®éƒ¨å’Œè™šéƒ¨ä¸ºfloat64 ä½¿ç”¨å­—é¢é‡åˆ›å»ºå¤æ•° var c1 complex64 c1 = 1 + 2i var c2 complex128 c2 = 2 + 3i // æˆ–è€… // c1 := 1 + 2i // c2 := 2 + 3i ä½¿ç”¨complexå‡½æ•°åˆ›å»ºå¤æ•° å¦‚æœå®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†çš„ç±»å‹å‡ä¸ºfloat32ï¼Œé‚£ä¹ˆç±»å‹ä¸ºcomplex64çš„å¤æ•°cå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è·å¾— c := complex(re, im) fmt.Println(real(c)) fmt.Println(imag(c)) // å‡½æ•°`real(c)`å’Œ`imag(c)`å¯ä»¥åˆ†åˆ«è·å¾—ç›¸åº”çš„å®æ•°å’Œè™šæ•°éƒ¨åˆ†ã€‚ +ã€ã€ ã€ / è¿ç®—ç¬¦æ”¯æŒå®æ•°ä¸å®æ•°ã€å®æ•°ä¸å¤æ•°ã€å¤æ•°ä¸å¤æ•°çš„è¿ç®—ï¼Œä½†%ä¸èƒ½ç”¨äºå¤æ•° å¤æ•°æ”¯æŒå’Œå…¶ä»–æ•°å­—ç±»å‹ä¸€æ ·çš„è¿ç®—ï¼Œå½“ä½¿ç”¨ç­‰å·==æˆ–ä¸ç­‰å·!=å¯¹å¤æ•°è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œæ³¨æ„å¯¹ç²¾ç¡®åº¦çš„æŠŠæ¡ã€‚ math/cmplxåŒ…ä¸­åŒ…å«äº†ä¸€äº›æ“ä½œå¤æ•°çš„å…¬å…±æ–¹æ³•ï¼Œæ¥æ”¶çš„ç±»å‹éƒ½æ˜¯complex128ã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:1:3","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1.4 æ•°å­—å­—é¢é‡è¯­æ³• Go1.13ç‰ˆæœ¬ä¹‹åå¼•å…¥äº†æ•°å­—å­—é¢é‡è¯­æ³•ï¼Œè¿™æ ·ä¾¿äºå¼€å‘è€…ä»¥äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶æµ®ç‚¹æ•°çš„æ ¼å¼å®šä¹‰æ•°å­—ï¼Œä¾‹å¦‚ï¼š num1 := 0b00101101 // ä»£è¡¨äºŒè¿›åˆ¶çš„ 101101ï¼Œç›¸å½“äºåè¿›åˆ¶çš„ 45 num2 := 0o366 // ä»£è¡¨å…«è¿›åˆ¶çš„ 377ï¼Œç›¸å½“äºåè¿›åˆ¶çš„ 255 num3 := 0x1p-2 // ä»£è¡¨åå…­è¿›åˆ¶çš„ 1 é™¤ä»¥ 2Â²ï¼Œä¹Ÿå°±æ˜¯ 0.25 num4 := 123_456 // å…è®¸ç”¨ _ æ¥åˆ†éš”æ•°å­—ï¼Œæ¯”å¦‚è¯´ï¼šv := 123_456 ç­‰äº 123456ã€‚ const e = 2.71828 // (approximately) å¾ˆå°æˆ–å¾ˆå¤§çš„æ•°æœ€å¥½ç”¨ç§‘å­¦è®¡æ•°æ³•ä¹¦å†™ï¼Œé€šè¿‡eæˆ–Eæ¥æŒ‡å®šæŒ‡æ•°éƒ¨åˆ†ï¼š const Avogadro = 6.02214129e23 // é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•° const Planck = 6.62606957e-34 // æ™®æœ—å…‹å¸¸æ•° æ³¨æ„äº‹é¡¹ num3 := 1p-2 ä¼šæŠ¥é”™ â€˜pâ€™ exponent requires hexadecimal mantissaï¼Œè¿™ç§æ–¹å¼åªèƒ½ç”¨äºåå…­çº§è¿›åˆ¶ å…«è¿›åˆ¶æ•°æ®é€šå¸¸ç”¨äºPOSIXæ“ä½œç³»ç»Ÿä¸Šçš„æ–‡ä»¶è®¿é—®æƒé™æ ‡å¿—ï¼Œåå…­è¿›åˆ¶æ•°å­—åˆ™æ›´å¼ºè°ƒæ•°å­—å€¼çš„bitä½æ¨¡å¼ã€‚ æµ®ç‚¹æ•°çš„å­—é¢å€¼ï¼Œå…¶ä¸­å°æ•°ç‚¹å‰é¢æˆ–åé¢çš„æ•°å­—éƒ½å¯èƒ½è¢«çœç•¥ï¼ˆä¾‹å¦‚.707æˆ–1.ï¼‰ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:1:4","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2 å­—ç¬¦ä¸å­—ç¬¦ä¸² ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.1 byteã€rune Go è¯­è¨€çš„å­—ç¬¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š uint8ç±»å‹ï¼Œæˆ–è€…å« byte å‹ï¼Œä»£è¡¨äº†ASCIIç çš„ä¸€ä¸ªå­—ç¬¦ã€‚ runeç±»å‹ï¼Œä»£è¡¨ä¸€ä¸ª Unicodeç ç‚¹ã€‚ å½“éœ€è¦å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡æˆ–è€…å…¶ä»–å¤åˆå­—ç¬¦æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°runeç±»å‹ã€‚ Unicodeå­—ç¬¦(runeç±»å‹)æ˜¯å’Œint32ç­‰ä»·çš„ç±»å‹ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºä¸€ä¸ªUnicodeç ç‚¹ã€‚ byteæ˜¯uint8ç±»å‹çš„ç­‰ä»·ç±»å‹ï¼Œbyteç±»å‹ä¸€èˆ¬ç”¨äºå¼ºè°ƒæ•°å€¼æ˜¯ä¸€ä¸ªåŸå§‹çš„æ•°æ®è€Œä¸æ˜¯ä¸€ä¸ªå°çš„æ•´æ•°ã€‚ å¼•ç”¨ å…³äºå­—ç¬¦ç¼–ç unicode utf-8ç­‰ç›¸å…³çŸ¥è¯†ï¼Œå¯å‚è€ƒhttp://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:1","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.2 byteã€runeçš„å­—é¢é‡ æŠ€å·§ å…³äº\\x41ã€\\101ï¼Œ\\u03B2ï¼Œ\\U00101234çš„ç”¨æ³•ä¼šåœ¨ä¸‹æ–‡å­—ç¬¦ä¸²è½¬ä¹‰éƒ¨åˆ†è¿›è¡Œè§£é‡Š byte åœ¨ASCIIç è¡¨ä¸­ï¼ŒAçš„å€¼æ˜¯65ï¼Œè€Œä½¿ç”¨16è¿›åˆ¶è¡¨ç¤ºåˆ™ä¸º41ï¼Œæ‰€ä»¥ä¸‹é¢çš„å†™æ³•æ˜¯ç­‰æ•ˆçš„ var ch byte = 65 var ch byte = '\\x41' // \\x åè·Ÿé•¿åº¦ä¸º2çš„16è¿›åˆ¶æ•° var ch byte = '\\101' // \\ åè·Ÿé•¿åº¦ä¸º3çš„8è¿›åˆ¶æ•° rune åœ¨ä¹¦å†™Unicodeå­—ç¬¦æ—¶ï¼Œéœ€è¦åœ¨16è¿›åˆ¶æ•°ä¹‹å‰åŠ ä¸Šå‰ç¼€\\uæˆ–è€…\\U å‰ç¼€ \\u æ€»æ˜¯ç´§è·Ÿç€é•¿åº¦ä¸º 4 çš„ 16 è¿›åˆ¶æ•°ï¼Œå‰ç¼€ \\U ç´§è·Ÿç€é•¿åº¦ä¸º 8 çš„ 16 è¿›åˆ¶æ•°ã€‚ var ch int = '\\u0041' var ch2 int = '\\u03B2' var ch3 int = '\\U00101234' fmt.Printf(\"%d - %d - %d\\n\", ch, ch2, ch3) // integer fmt.Printf(\"%c - %c - %c\\n\", ch, ch2, ch3) // character fmt.Printf(\"%X - %X - %X\\n\", ch, ch2, ch3) // UTF-8 bytes fmt.Printf(\"%U - %U - %U\", ch, ch2, ch3) // UTF-8 code point //65 - 946 - 1053236 //A - Î² - r //41 - 3B2 - 101234 //U+0041 - U+03B2 - U+101234 %dï¼šåè¿›åˆ¶è¡¨ç¤º %cï¼šç›¸åº”Unicodeç ç‚¹æ‰€è¡¨ç¤ºçš„å­—ç¬¦ %Xï¼šåå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå­—æ¯ä½å¤§å†™å½¢å¼ %Uï¼šUnicodeæ ¼å¼ï¼šU+1234 æ ¼å¼å ä½ç¬¦å°†åœ¨ch7 åŸºæœ¬è¾“å…¥è¾“å‡ºä¸­è¿›ä¸€æ­¥è¿›è¡Œè¯´æ˜ åŒ… unicode åŒ…å«äº†ä¸€äº›é’ˆå¯¹æµ‹è¯•å­—ç¬¦çš„éå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼ˆå…¶ä¸­ ch ä»£è¡¨å­—ç¬¦ï¼‰ï¼š åˆ¤æ–­æ˜¯å¦ä¸ºå­—æ¯ï¼šunicode.IsLetter(ch) åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ï¼šunicode.IsDigit(ch) åˆ¤æ–­æ˜¯å¦ä¸ºç©ºç™½ç¬¦å·ï¼šunicode.IsSpace(ch) åŒ… utf8 æ‹¥æœ‰æ›´å¤šä¸ rune ç±»å‹ç›¸å…³çš„å‡½æ•°ã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:2","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.3 å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„åº•å±‚ç»“æ„ Goè¯­è¨€é‡Œçš„å­—ç¬¦ä¸²çš„å†…éƒ¨å®ç°ä½¿ç”¨utf-8ç¼–ç ã€‚ å­—ç¬¦ä¸²åº•å±‚çš„æ˜¯ä¸€ä¸ªbyteæ•°ç»„+å­—ç¬¦ä¸²é•¿åº¦lenã€‚â€œhiï¼Œæˆ‘æ˜¯å°æ˜\"è¿™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†æŠŠæ¯ä¸ªUnicodeç ç‚¹ä½¿ç”¨UTF-8è¿›è¡Œç»Ÿä¸€ç¼–ç ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªå­—èŠ‚æ•°ç»„ã€‚ Goç¼–è¯‘å™¨è®¤ä¸ºå­—ç¬¦ä¸²é€šå¸¸æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ•…ä¼šå°†å­—ç¬¦ä¸²å­˜å‚¨åœ¨å¸¸é‡åŒºï¼Œå› æ­¤å°è¯•ä¿®æ”¹å­—ç¬¦ä¸²å†…éƒ¨æ•°æ®çš„æ“ä½œä¹Ÿæ˜¯è¢«ç¦æ­¢çš„ï¼š str := \"hi, æˆ‘æ˜¯å°æ˜\" str[0] = 'H' // compile error: cannot assign to s[0] ä¸å˜æ€§æ„å‘³ç€å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²å…±äº«ç›¸åŒçš„åº•å±‚æ•°æ®çš„è¯ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œè¿™ä½¿å¾—å¤åˆ¶ä»»ä½•é•¿åº¦çš„å­—ç¬¦ä¸²ä»£ä»·æ˜¯ä½å»‰çš„ã€‚ åŒæ ·ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²så’Œå¯¹åº”çš„å­å­—ç¬¦ä¸²åˆ‡ç‰‡çš„æ“ä½œä¹Ÿå¯ä»¥å®‰å…¨åœ°å…±äº«ç›¸åŒçš„å†…å­˜ï¼Œå› æ­¤å­—ç¬¦ä¸²åˆ‡ç‰‡æ“ä½œä»£ä»·ä¹Ÿæ˜¯ä½å»‰çš„ã€‚ åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½æ²¡æœ‰å¿…è¦åˆ†é…æ–°çš„å†…å­˜ã€‚ str := \"helloworld\" substr1 := str[0:5] substr2 := str[5:] fmt.Println(str, substr1, substr2) str = \"hiworld\" fmt.Println(str, substr1, substr2) // helloworld hello world // hiworld hello world å­—ç¬¦ä¸²çš„éå† // éå†å­—ç¬¦ä¸² func traversalString() { s := \"helloæ²™æ²³\" for i := 0; i \u003c len(s); i++ { //byte fmt.Printf(\"%v(%c) \", s[i], s[i]) } fmt.Println() for _, r := range s { //rune fmt.Printf(\"%v(%c) \", r, r) } fmt.Println() } è¾“å‡ºï¼š 104(h) 101(e) 108(l) 108(l) 111(o) 230(Ã¦) 178(Â²) 153() 230(Ã¦) 178(Â²) 179(Â³) 104(h) 101(e) 108(l) 108(l) 111(o) 27801(æ²™) 27827(æ²³) æ­£å¦‚ä¸Šè¿°æ‰€è¯´ï¼Œå­—ç¬¦ä¸²åº•å±‚æ˜¯ä¸€ä¸ªbyteæ•°ç»„ï¼Œlen(str)å¾—åˆ°çš„ç»“æœæ˜¯byteæ•°ç»„çš„é•¿åº¦ï¼Œè€ŒUTF8ç¼–ç ä¸‹ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼ˆé€šå¸¸ï¼‰ç”±3ä¸ªå­—èŠ‚ç»„æˆï¼Œæ‰€ä»¥ä¸èƒ½ç®€å•çš„æŒ‰ç…§å­—èŠ‚å»éå†ä¸€ä¸ªåŒ…å«ä¸­æ–‡çš„å­—ç¬¦ä¸²ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¸Šé¢è¾“å‡ºä¸­ç¬¬ä¸€è¡Œçš„ç»“æœã€‚æ­¤æ—¶ï¼Œå¯ä»¥é‡‡ç”¨for rangeæ–¹å¼æ¥éå†å­—ç¬¦ä¸²ï¼Œfor rangeæ–¹å¼æ˜¯éå†å­—ç¬¦ä¸²ä¸­çš„runeï¼Œå³Unicodeç ç‚¹ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:3","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.4 å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦ \\r å›è½¦ç¬¦ï¼ˆè¿”å›è‡³è¡Œé¦–) \\n æ¢è¡Œç¬¦ï¼ˆç›´æ¥è·³åˆ°ä¸‹ä¸€è¡Œçš„åŒåˆ—ä½ç½®ï¼‰ \\t åˆ¶è¡¨ç¬¦ \\' å•å¼•å· \\\" åŒå¼•å· \\\\ åæ–œæ  é™¤äº†ä¸Šè¿°çš„å­—ç¬¦å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šUnicodeå­—ç¬¦å¾ˆéš¾ç›´æ¥ä»é”®ç›˜è¾“å…¥ï¼Œå¹¶ä¸”è¿˜æœ‰å¾ˆå¤šå­—ç¬¦æœ‰ç€ç›¸ä¼¼çš„ç»“æ„ï¼ˆä¾‹å¦‚åœ¨ä¸­æ–‡å’Œæ—¥æ–‡ä¸­å°±æœ‰å¾ˆå¤šç›¸ä¼¼ä½†ä¸åŒçš„å­—ï¼‰ï¼Œæœ‰ä¸€äº›ç”šè‡³æ˜¯ä¸å¯è§çš„å­—ç¬¦ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGoè¯­è¨€å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„Unicodeè½¬ä¹‰å­—ç¬¦å…è®¸å¯ä»¥é€šè¿‡Unicodeç ç‚¹è¾“å…¥ç‰¹æ®Šçš„å­—ç¬¦ã€‚ æœ‰ä¸¤ç§æ–¹æ³•ï¼š æ–¹æ³•1ï¼šä½¿ç”¨UTF-8åçš„ç¼–ç å€¼ï¼ˆ\\xï¼‰ã€‚å°†Unicodeç ç‚¹å€¼ä½¿ç”¨UTF-8ç¼–ç åå¾—åˆ°hhhhhhï¼Œä½¿ç”¨\\xhh\\xhh\\xhhåºåˆ—è¡¨ç¤ºç¼–ç hhhhhhï¼Œä»¥æ­¤æ¥æ’å…¥è¯¥Unicodeç ç‚¹ã€‚ æ–¹æ³•2ï¼šä½¿ç”¨Unicodeç ç‚¹å€¼ï¼ˆ\\uæˆ–\\Uï¼‰ã€‚\\uhhhhï¼ˆ16bitçš„ç ç‚¹å€¼ï¼‰æˆ–\\Uhhhhhhhhï¼ˆ32bitçš„ç ç‚¹å€¼ï¼‰ã€‚ ä¾‹å¦‚ï¼šä¸‹é¢çš„å­—æ¯ä¸²é¢å€¼éƒ½è¡¨ç¤ºç›¸åŒçš„å€¼ï¼š \"ä¸–ç•Œ\" // ä¸–ç•Œçš„Unicode U+4E16 U+754C \"\\xe4\\xb8\\x96\\xe7\\x95\\x8c\" // å°† U+4E16 U+754Cè½¬åŒ–æˆUTF-8ç¼–ç ä¹‹åçš„å€¼äº† \"\\u4e16\\u754c\" \"\\U00004e16\\U0000754c\" æ— è®ºæ˜¯æ–¹æ³•ä¸€è¿˜æ˜¯æ–¹æ³•äºŒï¼Œå…¶å®å‘åº•å±‚çš„[]byteæ•°ç»„ä¸­å¡«å…¥çš„éƒ½æ˜¯åŒæ ·çš„æ•°æ®ï¼Œå³æ–¹æ³•ä¸€ä¸­çš„æ•°å€¼ï¼Œ0xe4,0xb8,0x96,0xe7,0x95,0x8cã€‚ å½“éœ€è¦è¯»å–æ•°æ®æ—¶ï¼Œä¼šå¯¹æ¯”ç‰¹æµè¿›è¡Œè§£ç ï¼Œä»è€Œè·å–æ•°æ®ã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:4","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.5 runeä¸è½¬ä¹‰ç¬¦ Unicodeè½¬ä¹‰ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨è¡¨ç¤ºruneå­—ç¬¦ä¸­ã€‚ä¸‹é¢ä¸‰ä¸ªå­—ç¬¦æ˜¯ç­‰ä»·çš„ï¼š 'ä¸–' '\\u4e16' '\\U00004e16' æ­¤å¤–ï¼Œå¯¹äºç ç‚¹å€¼å°äºç­‰äº0x7Fçš„ç ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ä¾‹å¦‚\\x41ï¼ˆå¯¹åº”å­—ç¬¦Aï¼‰çš„å½¢å¼è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹ï¼Œä½†æ˜¯å¯¹äºæ›´å¤§çš„ç ç‚¹ï¼Œä¾‹å¦‚'ä¸–'åˆ™å¿…é¡»ä½¿ç”¨\\uæˆ–\\Uè½¬ä¹‰å½¢å¼ï¼Œè€Œä¸æ˜¯ch = '\\xe4\\xb8\\x96'ã€‚ åŸå› ï¼š èƒ½ä½¿ç”¨\\x41è¡¨ç¤ºå­—ç¬¦â€™Aâ€™æ˜¯å› ä¸º0x41ä¸ä»…æ˜¯å­—ç¬¦â€™Aâ€™çš„Unicodeç ç‚¹ï¼Œä¹Ÿæ˜¯å…¶ç»è¿‡UTF-8åçš„ç¼–ç å€¼ã€‚ '\\xe4\\xb8\\x96' ä¼šç»å†ä¸‰æ¬¡è½¬ä¹‰ï¼Œæ¯ä¸ª\\xåˆ†åˆ«ä»£è¡¨äº†ä¸€ä¸ªruneå­—ç¬¦ï¼Œä¸”å‡ä¸ºä¸åˆæ³•å­—ç¬¦ã€‚ import \"fmt\" int main() { s := \"\\u0041\\u00FF\\x41\\xC3\\xBF\\xFF\" fmt.Println(s) } // AÃ¿AÃ¿ï¿½ å…³äºï¿½çš„è¯´æ˜å¦‚ä¸‹ï¼š æ¯ä¸€ä¸ªUTF8å­—ç¬¦è§£ç ï¼Œä¸ç®¡æ˜¯æ˜¾å¼åœ°è°ƒç”¨utf8.DecodeRuneInStringè§£ç æˆ–æ˜¯åœ¨rangeå¾ªç¯ä¸­éšå¼åœ°è§£ç ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªé”™è¯¯çš„UTF8ç¼–ç è¾“å…¥ï¼Œå°†ç”Ÿæˆä¸€ä¸ªç‰¹åˆ«çš„Unicodeå­—ç¬¦\\uFFFDï¼Œåœ¨å°åˆ·ä¸­è¿™ä¸ªç¬¦å·é€šå¸¸æ˜¯ä¸€ä¸ªé»‘è‰²å…­è§’æˆ–é’»çŸ³å½¢çŠ¶ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªç™½è‰²çš„é—®å·â€?â€ã€‚å½“ç¨‹åºé‡åˆ°è¿™æ ·çš„ä¸€ä¸ªå­—ç¬¦ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå±é™©ä¿¡å·ï¼Œè¯´æ˜è¾“å…¥å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œç¾æ²¡æœ‰é”™è¯¯çš„UTF8å­—ç¬¦ä¸²ã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:5","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"2.6 åŸç”Ÿå­—ç¬¦ä¸² ä¸€ä¸ªåŸç”Ÿçš„å­—ç¬¦ä¸²é¢å€¼å½¢å¼æ˜¯ä½¿ç”¨åå¼•å·ä»£æ›¿åŒå¼•å·ã€‚ åœ¨åŸç”Ÿçš„å­—ç¬¦ä¸²é¢å€¼ä¸­ï¼Œæ²¡æœ‰è½¬ä¹‰æ“ä½œï¼›å…¨éƒ¨çš„å†…å®¹éƒ½æ˜¯å­—é¢çš„æ„æ€ï¼ŒåŒ…å«é€€æ ¼å’Œæ¢è¡Œï¼Œå› æ­¤ä¸€ä¸ªç¨‹åºä¸­çš„åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼å¯èƒ½è·¨è¶Šå¤šè¡Œã€‚ åœ¨åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼å†…éƒ¨æ˜¯æ— æ³•ç›´æ¥å†™å­—ç¬¦çš„ï¼Œå¯ä»¥ç”¨å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶è½¬ä¹‰æˆ–ç”¨+**\"\"**è¿æ¥å­—ç¬¦ä¸²å¸¸é‡å®Œæˆ å”¯ä¸€çš„ç‰¹æ®Šå¤„ç†æ˜¯ä¼šåˆ é™¤å›è½¦ä»¥ä¿è¯åœ¨æ‰€æœ‰å¹³å°ä¸Šçš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŒ…æ‹¬é‚£äº›æŠŠå›è½¦ä¹Ÿæ”¾å…¥æ–‡æœ¬æ–‡ä»¶çš„ç³»ç»Ÿï¼ˆè¯‘æ³¨ï¼šWindowsç³»ç»Ÿä¼šæŠŠå›è½¦å’Œæ¢è¡Œä¸€èµ·æ”¾å…¥æ–‡æœ¬æ–‡ä»¶ä¸­ï¼‰ã€‚ åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼ç”¨äºç¼–å†™æ­£åˆ™è¡¨è¾¾å¼ä¼šå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¾€å¾€ä¼šåŒ…å«å¾ˆå¤šåæ–œæ ã€‚åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼åŒæ—¶è¢«å¹¿æ³›åº”ç”¨äºHTMLæ¨¡æ¿ã€JSONé¢å€¼ã€å‘½ä»¤è¡Œæç¤ºä¿¡æ¯ä»¥åŠé‚£äº›éœ€è¦æ‰©å±•åˆ°å¤šè¡Œçš„åœºæ™¯ã€‚ const GoUsage = `Go is a tool for managing Go source code. Usage: go command [arguments] ...` ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:2:6","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"3 å¸ƒå°” Goè¯­è¨€ä¸­ä»¥boolç±»å‹è¿›è¡Œå£°æ˜å¸ƒå°”å‹æ•°æ®ï¼Œå¸ƒå°”å‹æ•°æ®åªæœ‰trueå’Œflaseä¸¤ä¸ªå€¼ æ³¨æ„ï¼š å¸ƒå°”ç±»å‹å˜é‡çš„é»˜è®¤å€¼false Goè¯­è¨€ä¸­ä¸å…è®¸å°†æ•´å‹å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å‹ å¸ƒå°”å‹æ— æ³•å‚ä¸æ•°å€¼è¿ç®—ï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–ç±»å‹è¿›è¡Œè½¬æ¢ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:3:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"4 ç±»å‹è½¬æ¢ Goè¯­è¨€ä¸­åªæœ‰å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ã€‚è¯¥è¯­æ³•åªèƒ½åœ¨ä¸¤ä¸ªç±»å‹ä¹‹é—´æ”¯æŒç›¸äº’è½¬æ¢çš„æ—¶å€™ä½¿ç”¨ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸºæœ¬è¯­æ³•ä¸ºï¼šT(è¡¨è¾¾å¼)ï¼Œå…¶ä¸­ï¼ŒTè¡¨ç¤ºè¦è½¬æ¢çš„ç±»å‹ã€‚è¡¨è¾¾å¼åŒ…æ‹¬å˜é‡ã€å¤æ‚ç®—å­å’Œå‡½æ•°è¿”å›å€¼ç­‰. æ¯”å¦‚ï¼Œè®¡ç®—ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹é•¿æ—¶ä½¿ç”¨mathåŒ…çš„Sqrt()å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶çš„æ˜¯float64ç±»å‹çš„å‚æ•°ï¼Œè€Œå˜é‡aå’Œbéƒ½æ˜¯intç±»å‹çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å°†aå’Œbå¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºfloat64ç±»å‹ã€‚ func sqrtDemo() { var a, b = 3, 4 var c int // math.Sqrt()æ¥æ”¶çš„å‚æ•°æ˜¯float64ç±»å‹ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ c = int(math.Sqrt(float64(a*a + b*b))) fmt.Println(c) } å¯¹äºæ¯ç§ç±»å‹Tï¼Œå¦‚æœè½¬æ¢å…è®¸çš„è¯ï¼Œç±»å‹è½¬æ¢æ“ä½œT(x)å°†xè½¬æ¢ä¸ºTç±»å‹ã€‚è®¸å¤šæ•´æ•°ä¹‹é—´çš„ç›¸äº’è½¬æ¢å¹¶ä¸ä¼šæ”¹å˜æ•°å€¼ï¼›å®ƒä»¬åªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•è§£é‡Šè¿™ä¸ªå€¼ã€‚ ä½†æ˜¯å¯¹äºå°†ä¸€ä¸ªå¤§å°ºå¯¸çš„æ•´æ•°ç±»å‹è½¬ä¸ºä¸€ä¸ªå°å°ºå¯¸çš„æ•´æ•°ç±»å‹ï¼Œæˆ–è€…æ˜¯å°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬ä¸ºæ•´æ•°ï¼Œå¯èƒ½ä¼šæ”¹å˜æ•°å€¼æˆ–ä¸¢å¤±ç²¾åº¦ï¼š f := 3.141 // a float64 i := int(f) fmt.Println(f, i) // \"3.141 3\" f = 1.99 fmt.Println(int(f)) // \"1\" æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢å°†ä¸¢å¤±ä»»ä½•å°æ•°éƒ¨åˆ†ï¼Œç„¶åå‘æ•°è½´é›¶æ–¹å‘æˆªæ–­ã€‚ åº”è¯¥é¿å…å¯¹å¯èƒ½ä¼šè¶…å‡ºç›®æ ‡ç±»å‹è¡¨ç¤ºèŒƒå›´çš„æ•°å€¼åšç±»å‹è½¬æ¢ï¼Œå› ä¸ºæˆªæ–­çš„è¡Œä¸ºå¯èƒ½ä¾èµ–äºå…·ä½“çš„å®ç°ï¼š f := 1e100 // a float64 i := int(f) // ç»“æœä¾èµ–äºå…·ä½“å®ç° ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:4:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"5 å€¼ä¼ é€’ åŸºæœ¬ç±»å‹æ˜¯Goè¯­è¨€è‡ªå¸¦çš„ç±»å‹ï¼Œæ¯”å¦‚æ•°å€¼ç±»å‹ï¼Œæµ®ç‚¹å‹ï¼Œå­—ç¬¦ç±»å‹å’Œå¸ƒå°”ç±»å‹ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯åŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸å¯æ”¹å˜ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œï¼Œä¸€èˆ¬éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„å€¼ã€‚æ‰€ä»¥æŠŠè¿™äº›å€¼ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå…¶å®ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼çš„å‰¯æœ¬ã€‚ func main(){ name:=\"å¼ ä¸‰\" fmt.Println(modift(name)) fmt.Println(name) } func modify(s string) string{ s=s+s return s } åŸºæœ¬ç±»å‹å› ä¸ºæ˜¯æ‹·è´çš„å€¼ï¼Œå¹¶ä¸”åœ¨å¯¹å®ƒè¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œç”Ÿæˆçš„ä¹Ÿæ˜¯æ–°åˆ›å»ºçš„å€¼ï¼Œæ‰€ä»¥è¿™äº›ç±»å‹åœ¨å¤šçº¿ç¨‹é‡Œæ˜¯å®‰å…¨çš„ï¼Œä¸ç”¨æ‹…å¿ƒä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹å½±å“äº†å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®ã€‚ ","date":"2021-12-10","objectID":"/2021/12/go-ch4/:5:0","tags":null,"title":"Ch4 åŸºæœ¬æ•°æ®ç±»å‹","uri":"/2021/12/go-ch4/"},{"categories":["golang"],"content":"1 æ ‡è¯†ç¬¦åŠå‘½åè§„èŒƒ åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æ ‡è¯†ç¬¦æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„è¯ï¼Œæ¯”å¦‚å˜é‡åã€å¸¸é‡åã€å‡½æ•°åç­‰ã€‚ å‘½åè§„èŒƒï¼š æ¨èä½¿ç”¨é©¼å³°å¼å‘½å å¤§å°å†™æ•æ„Ÿï¼ŒheapSortå’ŒHeapsortä¸åŒ Goè¯­è¨€ä¸­æ ‡è¯†ç¬¦ç”±å­—æ¯æ•°å­—å’Œ_(ä¸‹åˆ’çº¿ï¼‰ç»„æˆï¼Œå¹¶ä¸”åªèƒ½ä»¥å­—æ¯å’Œ_å¼€å¤´ã€‚ ä¸¾å‡ ä¸ªä¾‹å­ï¼šabc, _, _123, a123ã€‚ ","date":"2021-12-08","objectID":"/2021/12/go-ch3/:1:0","tags":null,"title":"Ch3 æ ‡è¯†ç¬¦ä¸å…³é”®å­—","uri":"/2021/12/go-ch3/"},{"categories":["golang"],"content":"2 å…³é”®å­—ä¸ä¿ç•™å­— å…³é”®å­—æ˜¯æŒ‡ç¼–ç¨‹è¯­è¨€ä¸­é¢„å…ˆå®šä¹‰å¥½çš„å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„æ ‡è¯†ç¬¦ã€‚ å…³é”®å­—å’Œä¿ç•™å­—éƒ½ä¸å»ºè®®ç”¨ä½œå˜é‡åã€‚ Goè¯­è¨€ä¸­æœ‰25ä¸ªå…³é”®å­—ï¼š break default func interface select case defer go map struct chan else goto package switch const fallthrough if range type continue for import return var å…³é”®å­—å°‘ï¼Œæ˜¯ä¸ºäº†ç®€åŒ–åœ¨ç¼–è¯‘è¿‡ç¨‹ç¬¬ä¸€æ­¥ä¸­çš„ä»£ç è§£æã€‚ æ­¤å¤–ï¼ŒGoè¯­è¨€ä¸­è¿˜æœ‰30å¤šä¸ªä¿ç•™å­—ï¼Œæ¯”å¦‚,intå’Œtrueç­‰ï¼Œä¸»è¦å¯¹åº”å†…å»ºçš„å¸¸é‡ã€ç±»å‹å’Œå‡½æ•°è¿™äº›å†…éƒ¨é¢„å®šä¹‰çš„åå­—å¹¶ä¸æ˜¯å…³é”®å­—ï¼Œå¯ä»¥åœ¨å®šä¹‰ä¸­é‡æ–°ä½¿ç”¨ï¼Œä½†åº”å°½é‡é¿å…é‡å®šä¹‰ï¼Œä¸€é¢å½±èµ·è¯­ä¹‰æ··ä¹±ã€‚ Constants: true false iota nil Types: int int8 int16 int32 int64 uint uint8 uint16 uint32 uint64 uintptr float32 float64 complex128 complex64 bool byte rune string error Functions: make len cap new append copy close delete complex real imag panic recover å¼•ç”¨ https://www.liwenzhou.com/posts/Go/01_var_and_const/ https://topgoer.cn/docs/gopl-zh/gopl-zh-1d2a07a5bc4o0 å¯¹äºä¿ç•™å­—çš„è¯´æ³•ï¼Œåœ¨åˆ«å¤„çœ‹åˆ°äº†ä¸åŒçš„æè¿°ï¼Œæ‘˜å½•äºæ­¤ã€‚ é™¤äº†ä»¥ä¸Šä»‹ç»çš„è¿™äº›å…³é”®å­—ï¼ŒGo è¯­è¨€è¿˜æœ‰ 36 ä¸ªé¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œå…¶ä¸­åŒ…å«äº†åŸºæœ¬ç±»å‹çš„åç§°å’Œä¸€äº›åŸºæœ¬çš„å†…ç½®å‡½æ•°ã€‚ å¼•ç”¨ https://github.com/unknwon/the-way-to-go_ZH_CN/blob/master/eBook/04.1.md ","date":"2021-12-08","objectID":"/2021/12/go-ch3/:2:0","tags":null,"title":"Ch3 æ ‡è¯†ç¬¦ä¸å…³é”®å­—","uri":"/2021/12/go-ch3/"},{"categories":["golang"],"content":"åœ¨ä¸Šä¸€ç« ä¸­ï¼Œè¿è¡Œäº†å¦‚ä¸‹ç¨‹åºï¼Œ package main import \"fmt\" func main(){ fmt.Println(\"hello world!\") } ä¸‹é¢å°†ç»“åˆæ­¤ç¨‹åºï¼Œè¿›è¡Œä¸€äº›ç®€å•çš„è¯´æ˜ã€‚ ","date":"2021-12-06","objectID":"/2021/12/go-ch2/:0:0","tags":null,"title":"Ch2 Hello World","uri":"/2021/12/go-ch2/"},{"categories":["golang"],"content":"1 Goè¯­è¨€ä¸­çš„åŒ… Goè¯­è¨€çš„ä»£ç é€šè¿‡åŒ…ï¼ˆpackageï¼‰ç»„ç»‡ï¼Œä¸€ä¸ªåŒ…ç”±ä½äºå•ä¸ªç›®å½•ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª.goæºä»£ç æ–‡ä»¶ç»„æˆã€‚åŒ…ä¸­çš„æ¯ä¸ªæºæ–‡ä»¶éƒ½ä»¥ä¸€æ¡packageå£°æ˜è¯­å¥å¼€å§‹ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œå°±æ˜¯package mainï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å±äºå“ªä¸ªåŒ…ã€‚ Goçš„æ ‡å‡†åº“æä¾›äº†100å¤šä¸ªåŒ…ï¼Œä»¥æ”¯æŒå¸¸è§åŠŸèƒ½ï¼Œå¦‚è¾“å…¥ã€è¾“å‡ºã€æ’åºä»¥åŠæ–‡æœ¬å¤„ç†ã€‚æ¯”å¦‚fmtåŒ…ï¼Œå°±å«æœ‰æ ¼å¼åŒ–è¾“å‡ºã€æ¥æ”¶è¾“å…¥çš„å‡½æ•°ï¼ŒPrintlnæ˜¯å…¶ä¸­ä¸€ä¸ªåŸºç¡€å‡½æ•°ï¼Œå¯ä»¥æ‰“å°ä»¥ç©ºæ ¼é—´éš”çš„ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œå¹¶åœ¨æœ€åæ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œä»è€Œè¾“å‡ºä¸€æ•´è¡Œã€‚ mainåŒ…æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼Œåœ¨mainåŒ…ä¸­çš„main å‡½æ•°æ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡Œæ—¶çš„å…¥å£ã€‚ å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨æºæ–‡ä»¶éœ€è¦å“ªäº›åŒ…ï¼Œè¿™å°±æ˜¯è·Ÿéšåœ¨packageå£°æ˜åé¢çš„importå£°æ˜æ‰®æ¼”çš„è§’è‰²ã€‚ å¿…é¡»æ°å½“å¯¼å…¥éœ€è¦çš„åŒ…ï¼Œç¼ºå°‘äº†å¿…è¦çš„åŒ…æˆ–è€…å¯¼å…¥äº†ä¸éœ€è¦çš„åŒ…ï¼Œç¨‹åºéƒ½æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚è¿™é¡¹ä¸¥æ ¼è¦æ±‚é¿å…äº†ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­å¼•å…¥æœªä½¿ç”¨çš„åŒ…ã€‚ æœ‰ä¸ªç›¸å…³çš„å·¥å…·ï¼Œgoimportsï¼Œå¯ä»¥æ ¹æ®ä»£ç éœ€è¦ï¼Œè‡ªåŠ¨åœ°æ·»åŠ æˆ–åˆ é™¤importå£°æ˜ã€‚è¿™ä¸ªå·¥å…·å¹¶æ²¡æœ‰åŒ…å«åœ¨æ ‡å‡†çš„åˆ†å‘åŒ…ä¸­ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…ï¼š $ go get golang.org/x/tools/cmd/goimports ","date":"2021-12-06","objectID":"/2021/12/go-ch2/:1:0","tags":null,"title":"Ch2 Hello World","uri":"/2021/12/go-ch2/"},{"categories":["golang"],"content":"Goè¯­è¨€é£æ ¼ Goè¯­è¨€ä¸éœ€è¦åœ¨è¯­å¥æˆ–è€…å£°æ˜çš„æœ«å°¾æ·»åŠ åˆ†å·ï¼Œé™¤éä¸€è¡Œä¸Šæœ‰å¤šæ¡è¯­å¥ã€‚ å®é™…ä¸Šï¼Œç¼–è¯‘å™¨ä¼šä¸»åŠ¨æŠŠç‰¹å®šç¬¦å·åçš„æ¢è¡Œç¬¦è½¬æ¢ä¸ºåˆ†å·ï¼Œå› æ­¤æ¢è¡Œç¬¦æ·»åŠ çš„ä½ç½®ä¼šå½±å“Goä»£ç çš„æ­£ç¡®è§£æã€‚ ç¤ºä¾‹ æ¯”å¦‚è¡Œæœ«æ˜¯ä¸‹åˆ—å†…å®¹æ—¶ï¼Œå°†è‡ªåŠ¨æŠŠæ¢è¡Œç¬¦è½¬æ¢ä¸ºåˆ†å·ï¼š æ ‡è¯†ç¬¦ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€è™šæ•°ã€å­—ç¬¦æˆ–å­—ç¬¦ä¸²æ–‡å­—ã€å…³é”®å­—breakã€continueã€fallthroughæˆ–returnä¸­çš„ä¸€ä¸ªã€è¿ç®—ç¬¦å’Œåˆ†éš”ç¬¦++ã€--ã€)ã€]æˆ–}ä¸­çš„ä¸€ä¸ªã€‚ å½“æ¢è¡Œç¬¦é”™è¯¯æ·»åŠ æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘ä¸é€šè¿‡ï¼Œä¾‹å¦‚ å‡½æ•°çš„å·¦æ‹¬å·{å¿…é¡»å’Œfuncå‡½æ•°å£°æ˜åœ¨åŒä¸€è¡Œä¸Šï¼Œä¸”ä½äºæœ«å°¾ï¼Œä¸èƒ½ç‹¬å ä¸€è¡Œã€‚ åœ¨è¡¨è¾¾å¼x + yä¸­ï¼Œå¯åœ¨+åæ¢è¡Œï¼Œä¸èƒ½åœ¨+å‰æ¢è¡Œ ç¤ºä¾‹ ä»¥+ç»“å°¾ä¸ä¼šè¢«æ’å…¥åˆ†å·åˆ†éš”ç¬¦ï¼Œä½†ä»¥xç»“å°¾åˆ™ä¼šæ’å…¥åˆ†å·åˆ†éš”ç¬¦ï¼Œä»è€Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚ Goè¯­è¨€åœ¨ä»£ç æ ¼å¼ä¸Šé‡‡å–äº†å¾ˆå¼ºç¡¬çš„æ€åº¦ã€‚gofmtå·¥å…·æŠŠä»£ç æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ ¼å¼ï¼ˆè¯¥æ ¼å¼åŒ–å·¥å…·æ²¡æœ‰ä»»ä½•å¯ä»¥è°ƒæ•´ä»£ç æ ¼å¼çš„å‚æ•°ï¼‰ï¼Œå¹¶ä¸”goå·¥å…·ä¸­çš„fmtå­å‘½ä»¤ä¼šå¯¹æŒ‡å®šåŒ…ï¼ˆé»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼‰ä¸­æ‰€æœ‰.goæºæ–‡ä»¶åº”ç”¨gofmtå‘½ä»¤ã€‚è¿™æ ·å¯ä»¥çš„å¥½å¤„æ˜¯å°‘äº†äº‰è®®ï¼Œä¸”ä¾¿äºåšå¤šç§è‡ªåŠ¨æºç è½¬æ¢ã€‚å¾ˆå¤šæ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥é…ç½®ä¸ºä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œgofmtï¼Œè¿™æ ·æºä»£ç æ€»ä¼šè¢«æ°å½“åœ°æ ¼å¼åŒ–ã€‚ ","date":"2021-12-06","objectID":"/2021/12/go-ch2/:2:0","tags":null,"title":"Ch2 Hello World","uri":"/2021/12/go-ch2/"},{"categories":["golang"],"content":"Goç¨‹åºçš„åŸºæœ¬ç»“æ„ ä¸‹é¢çš„ç¨‹åºå¯ä»¥è¢«é¡ºåˆ©ç¼–è¯‘ä½†ä»€ä¹ˆéƒ½åšä¸äº†ï¼Œä¸è¿‡è¿™å¾ˆå¥½åœ°å±•ç¤ºäº†ä¸€ä¸ª Go ç¨‹åºçš„é¦–é€‰ç»“æ„ã€‚è¿™ç§ç»“æ„å¹¶æ²¡æœ‰è¢«å¼ºåˆ¶è¦æ±‚ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸å…³å¿ƒ main å‡½æ•°åœ¨å‰è¿˜æ˜¯å˜é‡çš„å£°æ˜åœ¨å‰ï¼Œä½†ä½¿ç”¨ç»Ÿä¸€çš„ç»“æ„èƒ½å¤Ÿåœ¨ä»ä¸Šè‡³ä¸‹é˜…è¯» Go ä»£ç æ—¶æœ‰æ›´å¥½çš„ä½“éªŒã€‚ åŒ…åï¼Œä¾‹å¦‚package main åœ¨å®ŒæˆåŒ…çš„ import ä¹‹åï¼Œå¼€å§‹å¯¹å¸¸é‡ã€å˜é‡å’Œç±»å‹çš„å®šä¹‰æˆ–å£°æ˜ã€‚ å¦‚æœå­˜åœ¨init å‡½æ•°çš„è¯ï¼Œåˆ™å¯¹è¯¥å‡½æ•°è¿›è¡Œå®šä¹‰ã€‚è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œæ¯ä¸ªå«æœ‰è¯¥å‡½æ•°çš„åŒ…éƒ½ä¼šé¦–å…ˆæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¹‹åä¼šå†æ¬¡æåˆ°ã€‚ å¦‚æœå½“å‰åŒ…æ˜¯ main åŒ…ï¼Œåˆ™å®šä¹‰ main å‡½æ•°ã€‚ ç„¶åå®šä¹‰å…¶ä½™çš„å‡½æ•°ï¼Œé¦–å…ˆæ˜¯ç±»å‹çš„æ–¹æ³•ï¼Œæ¥ç€æ˜¯æŒ‰ç…§ main å‡½æ•°ä¸­å…ˆåè°ƒç”¨çš„é¡ºåºæ¥å®šä¹‰ç›¸å…³å‡½æ•°ï¼Œå¦‚æœæœ‰å¾ˆå¤šå‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‰ç…§å­—æ¯é¡ºåºæ¥è¿›è¡Œæ’åºã€‚ package main import ( \"fmt\" ) const c = \"C\" var v int = 5 type T struct{} func init() { // initialization of package } func main() { var a int Func1() // ... fmt.Println(a) } func (t T) Method1() { //... } func Func1() { // exported function Func1 //... } Go ç¨‹åºçš„æ‰§è¡Œï¼ˆç¨‹åºå¯åŠ¨ï¼‰é¡ºåºå¦‚ä¸‹ï¼š æŒ‰é¡ºåºå¯¼å…¥æ‰€æœ‰è¢« main åŒ…å¼•ç”¨çš„å…¶å®ƒåŒ…ï¼Œç„¶ååœ¨æ¯ä¸ªåŒ…ä¸­æ‰§è¡Œå¦‚ä¸‹æµç¨‹ï¼š å¦‚æœè¯¥åŒ…åˆå¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œåˆ™ä»ç¬¬ä¸€æ­¥å¼€å§‹é€’å½’æ‰§è¡Œï¼Œä½†æ˜¯æ¯ä¸ªåŒ…åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ã€‚ åœ¨æ¯ä¸ªåŒ…ä¸­åˆå§‹åŒ–å¸¸é‡å’Œå˜é‡ï¼Œå¦‚æœè¯¥åŒ…å«æœ‰ init å‡½æ•°çš„è¯ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°ã€‚ åœ¨å®Œæˆè¿™ä¸€åˆ‡ä¹‹åï¼Œmain ä¹Ÿæ‰§è¡ŒåŒæ ·çš„è¿‡ç¨‹ï¼Œæœ€åè°ƒç”¨ main å‡½æ•°å¼€å§‹æ‰§è¡Œç¨‹åºã€‚ ","date":"2021-12-06","objectID":"/2021/12/go-ch2/:3:0","tags":null,"title":"Ch2 Hello World","uri":"/2021/12/go-ch2/"},{"categories":["golang"],"content":"1 ä¸‹è½½ ä¸‹è½½åœ°å€ï¼šhttps://golang.google.cn/dl/ æ ¹æ®ç¯å¢ƒï¼Œä¸‹è½½æ‰€éœ€ç‰ˆæœ¬ ","date":"2021-12-05","objectID":"/2021/12/go-ch1/:1:0","tags":null,"title":"ch1 å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"/2021/12/go-ch1/"},{"categories":["golang"],"content":"2 é…ç½®ç¯å¢ƒå˜é‡ GOROOT GOROOTè¡¨ç¤ºGoè¯­è¨€çš„å®‰è£…ç›®å½•ï¼Œå°†GOROOTçš„å€¼è®¾ç½®ä¸ºå¯¹åº”çš„å®‰è£…ç›®å½•ã€‚ æ­¤å¤–ï¼ŒGOROOT/binåˆ™åŒ…å«GOæä¾›çš„å·¥å…·é“¾ï¼Œåº”å°†GOROOT/biné…ç½®åˆ°ç¯å¢ƒå˜é‡PATHä¸­ï¼Œä»è€Œèƒ½å¤Ÿåœ¨å…¨å±€ä¸­ä½¿ç”¨GOå·¥å…·é“¾ã€‚ GOPATH Go1.8ç‰ˆæœ¬ä¹‹å‰ï¼ŒGOPATHç¯å¢ƒå˜é‡é»˜è®¤æ˜¯ç©ºçš„ï¼Œä»Go1.8ç‰ˆæœ¬ä¹‹åï¼ŒGoå¼€å‘åŒ…ä¼šåœ¨å®‰è£…å®Œæˆä¹‹åä¸ºGOPATHè®¾ç½®ä¸€ä¸ªé»˜è®¤ç›®å½•ï¼Œå¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œæ‰“å¼€ç¯å¢ƒå˜é‡å¯çœ‹åˆ°é»˜è®¤ç›®å½•ï¼Œå¦‚æœ‰éœ€è¦å¯è¿›è¡Œä¿®æ”¹ã€‚ åœ¨Goè¾ƒè€çš„ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†Goçš„SDKå¤–ï¼Œæ‰€æœ‰ä»£ç éƒ½æ¨èæ”¾ç½®åœ¨GOPATHç›®å½•ä¸‹ã€‚æ­¤æ—¶GOROOTå’ŒGOPATHåˆ†åˆ«æŒ‡å‘ç³»ç»Ÿå®‰è£…è·¯å¾„å’Œå·¥ä½œè·¯å¾„ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯è‡ªå·±ç¼–å†™çš„ä»£ç ä¸ç³»ç»Ÿæ–‡ä»¶åˆ†ç¦»ã€‚ åœ¨Go1.11ç‰ˆæœ¬ä¸­æ¨å‡ºäº†Go Modulesï¼Œä½¿ç”¨Go Moduleæ¨¡å¼ä»¥åå¯ä»¥ä¸ç”¨å°†ä»£ç æ”¾ç½®åœ¨$GOPATH/srcä¸‹äº†ã€‚ åœ¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­ï¼Œä¼šè‡ªåŠ¨å¯ç”¨Go Moduleæ¨¡å¼ï¼Œå¯é€šè¿‡è¾“å…¥go env -w GO111MODULE=offå…³é—­ï¼Œæˆ–è€…è¾“å…¥go env -w GO111MODULE=on å¼€å¯ é…ç½®å®Œç¯å¢ƒå˜é‡åï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥go versionï¼Œè‹¥çœ‹åˆ°è¾“å‡ºgoçš„ç‰ˆæœ¬ä¿¡æ¯åˆ™è¯æ˜é…ç½®æˆåŠŸã€‚ ","date":"2021-12-05","objectID":"/2021/12/go-ch1/:2:0","tags":null,"title":"ch1 å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"/2021/12/go-ch1/"},{"categories":["golang"],"content":"3 Go PATH ä¸ Go Module ä¿¡æ¯ ç”±äºGo PATHçš„å±€é™æ€§ï¼Œè¯¥æ¨¡å¼å‡ ä¹å·²ä¸å†ä½¿ç”¨ åœ¨è¿›è¡ŒGoè¯­è¨€å¼€å‘çš„æ—¶å€™ï¼Œä»£ç æ€»æ˜¯ä¼šä¿å­˜åœ¨$GOPATH/srcç›®å½•ä¸‹ã€‚åœ¨å·¥ç¨‹ç»è¿‡go buildã€go installæˆ–go getç­‰æŒ‡ä»¤åä¹‹åï¼Œ ä¼šå°†ä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…æºä»£ç æ–‡ä»¶æ”¾åœ¨$GOPATH/srcç›®å½•ä¸‹ äº§ç”Ÿçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ $GOPATH/binç›®å½•ä¸‹ ç”Ÿæˆçš„ä¸­é—´ç¼“å­˜æ–‡ä»¶ä¼šè¢«ä¿å­˜åœ¨ $GOPATH/pkg ä¸‹ã€‚ å¦‚æœä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ˆVersion Control Systemï¼ŒVCSã€‚å¸¸ç”¨å¦‚Gitï¼‰æ¥ç®¡ç†é¡¹ç›®ä»£ç ï¼Œåªéœ€è¦æ·»åŠ $GOPATH/srcç›®å½•çš„æºä»£ç å³å¯ã€‚bin å’Œ pkg ç›®å½•çš„å†…å®¹æ— éœ€è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ ä½†åœ¨Go1.11å¼•å…¥Go Modulesä¹‹åï¼Œä»£ç ä¸å¿…å¼ºåˆ¶æ”¾ç½®åœ¨$GOPATH/srcä¸‹äº†ï¼Œå¯ä»¥æ˜¯ä»»æ„ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ å…³äºGoçš„ç›¸å…³å‘½ä»¤çš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒGoä¾èµ–ç®¡ç† ","date":"2021-12-05","objectID":"/2021/12/go-ch1/:3:0","tags":null,"title":"ch1 å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"/2021/12/go-ch1/"},{"categories":["golang"],"content":"4 Hello Worldç¨‹åº E: mkdir workspace_go cd workspace_go mkdir helloworld cd helloworld // hellowordæ˜¯è¿™ä¸ªæ¨¡å—çš„åå­—ï¼Œå¯ä»»æ„æŒ‡å®š go mod init helloworld go mod tidy æ–°å»ºmain.goæ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ package main import \"fmt\" func main() { fmt.Println(\"hello world\") } å›åˆ°ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œ go build main.go main.exe // æˆ–è€… go run main.go å…³äºGoçš„ç›¸å…³å‘½ä»¤çš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒGoæŒ‡ä»¤ ","date":"2021-12-05","objectID":"/2021/12/go-ch1/:4:0","tags":null,"title":"ch1 å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"/2021/12/go-ch1/"},{"categories":["golang"],"content":"5 VS Codeå®‰è£…ä¸ä½¿ç”¨ ä¸‹è½½VS Codeï¼Œåº”ç”¨å•†åº—æœç´¢chineseï¼Œå®‰è£…æ±‰åŒ–åŒ…æ’ä»¶ï¼Œåº”ç”¨å•†åº—æœç´¢goï¼Œå®‰è£…æ’ä»¶ã€‚ æ‰“å¼€ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œæ–°å»ºmain.goæ–‡ä»¶ï¼Œæ‰§è¡Œgo mod init modlueNameå’Œgo mod tidy ï¼ŒmodlueNameæ˜¯æŒ‡è¿™ä¸ªæ¨¡å—çš„åå­—ï¼Œå¯ä»»æ„è¾“å…¥ã€‚åœ¨main.goä¸­è¾“å…¥ä»¥ä¸‹ä»£ç  package main import \"fmt\" func main() { fmt.Println(\"hello world!\") } å³é”®main.go åœ¨ç»ˆç«¯ä¸­æ‰“å¼€ï¼Œç»ˆç«¯é€‰æ‹©cmdï¼Œè¾“å…¥go buildæˆ–go runæŒ‡ä»¤ã€‚ é—®é¢˜ è‹¥åœ¨vscodeæ‰“å¼€çš„ç»ˆç«¯å†…ï¼Œæç¤ºæ²¡æœ‰æ‰¾åˆ°è¯¥å‘½ä»¤ã€‚ å³é”®-\u003eå±æ€§-\u003eå…¼å®¹æ€§-\u003eç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼ŒåŸå›  åŸå› ï¼šé…ç½®äº†ç³»ç»Ÿå˜é‡ï¼Œè€Œä¸æ˜¯ç”¨æˆ·å˜é‡ï¼Œæ‰€ä»¥éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ æ’ä»¶çš„å®‰è£…ï¼šåœ¨ä½¿ç”¨vscodeçš„è¿‡ç¨‹ä¸­ä¼šä¸æ–­æç¤ºä¸‹è½½æ’ä»¶ï¼Œä¸€èˆ¬éƒ½å¾ˆéš¾ä¸‹è½½æˆåŠŸã€‚æ­¤æ—¶éœ€è¦è®¾ç½®ä»£ç†ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥go env -w GOPROXY=https://goproxy.cn,direct ï¼Œç„¶åå†å»ä¸‹è½½ã€‚ â€‹ ","date":"2021-12-05","objectID":"/2021/12/go-ch1/:5:0","tags":null,"title":"ch1 å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"/2021/12/go-ch1/"},{"categories":null,"content":" å¾å®¶åº„ç”µå™¨è£…ä¿®å­¦æ ¡ åœ¨è¯»ç ”ç©¶ç”Ÿ æœŸæœ›æ¯•ä¸šèƒ½æ‰¾åˆ°ä¸€ä»½å·¥ä½œï¼Œå¥½å¥½åšä¸€ä¸ªGopher é‚®ç®±ï¼šzchaoyu1126@gmail.com çŠ¶æ€ï¼šç„¦è™‘ç„¦è™‘ç„¦è™‘ ","date":"2021-04-24","objectID":"/about/:0:0","tags":null,"title":"å…³äº","uri":"/about/"},{"categories":null,"content":"Goè¯­è¨€å­¦ä¹ èµ„æ–™ï¼šã€ä¼ é€é—¨ã€‘ ","date":"0001-01-01","objectID":"/documentation/golang/:0:0","tags":null,"title":"Golang","uri":"/documentation/golang/"}]