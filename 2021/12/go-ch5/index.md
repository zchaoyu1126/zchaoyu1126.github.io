# Ch5 运算符


## 1 算术运算符

算数运算符包括`+`,`-`,`*`,`/`,`%`

注意

- `++自增`和`-自减`在Go语言中是单独的语句，并不是运算符
- 取模运算符`%`仅用于整数间的运算
- 整数除以0可能导致程序崩溃，会引发panic；浮点数除以0.0会返回一个无穷尽的结果，使用`+Inf`表示
- `/`对于整数运算而言，结果依旧为整数，会向着0方向截断余数
- Go在进行字符串拼接时允许使用对运算符`+`的重载，但Go本身不允许开发者进行自定义的运算符重载
- 在运算时**溢出**不会产生错误，Go会简单地将超出位数抛弃，如果需要范围无限大的整数或者有理数，可以使用标准库中的`big`包，该包提供了类似`big.Int`和`big.Rat`这样的类型。



## 2 关系运算符

关系运算符包括`==`,`!=`,`>`,`>=`,`<`,`<=`

布尔型、数字类型和字符串等基本类型都是可比较的，也就是说两个相同类型的值可以用==和!=进行比较



## 3 逻辑运算符

逻辑运算符包括`&&`、`||`、`!`

- 在格式化输出时，使用`%t`来表示要输出的值为布尔型
- 在Go语言中，&&和||是具有快捷性质的运算符（短路性质），当运算符左边表达式的值已经能够决定整个表达式的值时，运算符右边的表达式不会被执行。利用这个特性，如果有多个条件判断，应当将计算过程较为复杂的表达式放在运算符的右侧。



## 4 位运算符

位运算符对整数在内存中的二进制位进行操作

### 4.1 一元运算符

```
^         按位取反
<<        bitP的位向左移动n位，算术上左移n位等价于乘以2的n次方
>>        bitP的位向右移动n位，算术上右移n位等价于除以2的n次方
```

- 对于无符号数，左移和右移都是用0填充空缺的bit位
- 对于有符号数，右移运算会用符号位的值填充左边空缺的bit位

因此，最好用无符号运算，这样可以将整数完全当作一个bit位模式处理

### 4.2 二元运算符

```
&       参与运算的两数各对应的二进位相与
|       参与运算的两数各对应的二进位相或
^       参与运算的两数各对应的二进位相异或，相异为1
&^      位清除运算，将指定位置上的值设置位0
```

**位清空操作**：`a &^ b`，在a中，将一些位置的值设置为0，而这些位置由b确定。b用二进制表示，二进制为1的位置就是a中要清空的位置。

```go
package main

import "fmt"

func main() {
    a := 12
    b := 4
    c := a &^ b
    fmt.Printf("a: %08b\n", a)
    fmt.Printf("b：%08b\n", b)
    fmt.Printf("c: %#v   二进制：%08b\n",c,c)

    /*输出：
    a: 00001100
    b：00000100
    c: 8   二进制：00001000
    */
}
```



## 5 赋值运算符

赋值运算符包括`=`，`+=`，`-=`，`*=`，`/=`，`%=`，`<<=`，`>>=`，`&=`，`|=`，`^=`



## 6 运算符与优先级

```
优先级   运算符
	 7      ^ ! (一元运算符)
	 6      * / % << >> & &^
	 5      + - | ^
	 4      == != < <= >= >
	 3      <-
	 2      &&
	 1      ||
```

在同一个优先级中，使用左优先结合规则， 但是使用括号可以明确优先顺序，也可以用于提升优先级，比如`mask & (1 << 28)`

关于 <- 运算符的更多信息参考[ch22 通道](http://zchaoyu1126.github.io/go-ch22.html)

